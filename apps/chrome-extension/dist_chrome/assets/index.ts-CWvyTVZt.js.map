{"version":3,"file":"index.ts-CWvyTVZt.js","sources":["../../../../node_modules/@trpc/client/dist/objectSpread2-BvkFp-_Y.mjs","../../../../node_modules/@trpc/server/dist/observable-UMO3vUa_.mjs","../../../../node_modules/@trpc/server/dist/observable-CUiPknO-.mjs","../../../../node_modules/@trpc/client/dist/splitLink-B7Cuf2c_.mjs","../../../../node_modules/@trpc/server/dist/utils-DdbbrDku.mjs","../../../../node_modules/@trpc/server/dist/getErrorShape-Uhlrl4Bk.mjs","../../../../node_modules/@trpc/server/dist/tracked-gU3ttYjg.mjs","../../../../node_modules/@trpc/client/dist/TRPCClientError-CjKyS10w.mjs","../../../../node_modules/@trpc/client/dist/unstable-internals-Bg7n9BBj.mjs","../../../../node_modules/@trpc/client/dist/httpUtils-Bkv1johT.mjs","../../../../node_modules/@trpc/client/dist/httpLink-CYOcG9kQ.mjs","../../../../node_modules/@trpc/client/dist/httpBatchLink-CA96-gnJ.mjs","../../../../node_modules/@trpc/client/dist/loggerLink-ineCN1PO.mjs","../../../../node_modules/@trpc/client/dist/wsLink-H5IjZfJW.mjs","../../../../node_modules/@trpc/client/dist/index.mjs","../../../../node_modules/superjson/dist/double-indexed-kv.js","../../../../node_modules/superjson/dist/registry.js","../../../../node_modules/superjson/dist/class-registry.js","../../../../node_modules/superjson/dist/util.js","../../../../node_modules/superjson/dist/custom-transformer-registry.js","../../../../node_modules/superjson/dist/is.js","../../../../node_modules/superjson/dist/pathstringifier.js","../../../../node_modules/superjson/dist/transformer.js","../../../../node_modules/superjson/dist/accessDeep.js","../../../../node_modules/superjson/dist/plainer.js","../../../../node_modules/is-what/dist/index.js","../../../../node_modules/copy-anything/dist/index.js","../../../../node_modules/superjson/dist/index.js","../../src/services/trpc-client.ts","../../src/services/ai-service.ts","../../src/pages/background/message-router.ts","../../src/pages/background/index.ts"],"sourcesContent":["//#region rolldown:runtime\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __commonJS = (cb, mod) => function() {\n\treturn mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n\tif (from && typeof from === \"object\" || typeof from === \"function\") for (var keys = __getOwnPropNames(from), i = 0, n = keys.length, key; i < n; i++) {\n\t\tkey = keys[i];\n\t\tif (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n\t\t\tget: ((k) => from[k]).bind(null, key),\n\t\t\tenumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n\t\t});\n\t}\n\treturn to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", {\n\tvalue: mod,\n\tenumerable: true\n}) : target, mod));\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js\nvar require_typeof = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js\"(exports, module) {\n\tfunction _typeof$2(o) {\n\t\t\"@babel/helpers - typeof\";\n\t\treturn module.exports = _typeof$2 = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o$1) {\n\t\t\treturn typeof o$1;\n\t\t} : function(o$1) {\n\t\t\treturn o$1 && \"function\" == typeof Symbol && o$1.constructor === Symbol && o$1 !== Symbol.prototype ? \"symbol\" : typeof o$1;\n\t\t}, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof$2(o);\n\t}\n\tmodule.exports = _typeof$2, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js\nvar require_toPrimitive = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js\"(exports, module) {\n\tvar _typeof$1 = require_typeof()[\"default\"];\n\tfunction toPrimitive$1(t, r) {\n\t\tif (\"object\" != _typeof$1(t) || !t) return t;\n\t\tvar e = t[Symbol.toPrimitive];\n\t\tif (void 0 !== e) {\n\t\t\tvar i = e.call(t, r || \"default\");\n\t\t\tif (\"object\" != _typeof$1(i)) return i;\n\t\t\tthrow new TypeError(\"@@toPrimitive must return a primitive value.\");\n\t\t}\n\t\treturn (\"string\" === r ? String : Number)(t);\n\t}\n\tmodule.exports = toPrimitive$1, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js\nvar require_toPropertyKey = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js\"(exports, module) {\n\tvar _typeof = require_typeof()[\"default\"];\n\tvar toPrimitive = require_toPrimitive();\n\tfunction toPropertyKey$1(t) {\n\t\tvar i = toPrimitive(t, \"string\");\n\t\treturn \"symbol\" == _typeof(i) ? i : i + \"\";\n\t}\n\tmodule.exports = toPropertyKey$1, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js\nvar require_defineProperty = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js\"(exports, module) {\n\tvar toPropertyKey = require_toPropertyKey();\n\tfunction _defineProperty(e, r, t) {\n\t\treturn (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n\t\t\tvalue: t,\n\t\t\tenumerable: !0,\n\t\t\tconfigurable: !0,\n\t\t\twritable: !0\n\t\t}) : e[r] = t, e;\n\t}\n\tmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js\nvar require_objectSpread2 = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js\"(exports, module) {\n\tvar defineProperty = require_defineProperty();\n\tfunction ownKeys(e, r) {\n\t\tvar t = Object.keys(e);\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tvar o = Object.getOwnPropertySymbols(e);\n\t\t\tr && (o = o.filter(function(r$1) {\n\t\t\t\treturn Object.getOwnPropertyDescriptor(e, r$1).enumerable;\n\t\t\t})), t.push.apply(t, o);\n\t\t}\n\t\treturn t;\n\t}\n\tfunction _objectSpread2(e) {\n\t\tfor (var r = 1; r < arguments.length; r++) {\n\t\t\tvar t = null != arguments[r] ? arguments[r] : {};\n\t\t\tr % 2 ? ownKeys(Object(t), !0).forEach(function(r$1) {\n\t\t\t\tdefineProperty(e, r$1, t[r$1]);\n\t\t\t}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function(r$1) {\n\t\t\t\tObject.defineProperty(e, r$1, Object.getOwnPropertyDescriptor(t, r$1));\n\t\t\t});\n\t\t}\n\t\treturn e;\n\t}\n\tmodule.exports = _objectSpread2, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\nexport { __commonJS, __toESM, require_defineProperty, require_objectSpread2 };\n//# sourceMappingURL=objectSpread2-BvkFp-_Y.mjs.map","//#region src/observable/observable.ts\n/** @public */\nfunction isObservable(x) {\n\treturn typeof x === \"object\" && x !== null && \"subscribe\" in x;\n}\n/** @public */\nfunction observable(subscribe) {\n\tconst self = {\n\t\tsubscribe(observer) {\n\t\t\tlet teardownRef = null;\n\t\t\tlet isDone = false;\n\t\t\tlet unsubscribed = false;\n\t\t\tlet teardownImmediately = false;\n\t\t\tfunction unsubscribe() {\n\t\t\t\tif (teardownRef === null) {\n\t\t\t\t\tteardownImmediately = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (unsubscribed) return;\n\t\t\t\tunsubscribed = true;\n\t\t\t\tif (typeof teardownRef === \"function\") teardownRef();\n\t\t\t\telse if (teardownRef) teardownRef.unsubscribe();\n\t\t\t}\n\t\t\tteardownRef = subscribe({\n\t\t\t\tnext(value) {\n\t\t\t\t\tvar _observer$next;\n\t\t\t\t\tif (isDone) return;\n\t\t\t\t\t(_observer$next = observer.next) === null || _observer$next === void 0 || _observer$next.call(observer, value);\n\t\t\t\t},\n\t\t\t\terror(err) {\n\t\t\t\t\tvar _observer$error;\n\t\t\t\t\tif (isDone) return;\n\t\t\t\t\tisDone = true;\n\t\t\t\t\t(_observer$error = observer.error) === null || _observer$error === void 0 || _observer$error.call(observer, err);\n\t\t\t\t\tunsubscribe();\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tvar _observer$complete;\n\t\t\t\t\tif (isDone) return;\n\t\t\t\t\tisDone = true;\n\t\t\t\t\t(_observer$complete = observer.complete) === null || _observer$complete === void 0 || _observer$complete.call(observer);\n\t\t\t\t\tunsubscribe();\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (teardownImmediately) unsubscribe();\n\t\t\treturn { unsubscribe };\n\t\t},\n\t\tpipe(...operations) {\n\t\t\treturn operations.reduce(pipeReducer, self);\n\t\t}\n\t};\n\treturn self;\n}\nfunction pipeReducer(prev, fn) {\n\treturn fn(prev);\n}\n/** @internal */\nfunction observableToPromise(observable$1) {\n\tconst ac = new AbortController();\n\tconst promise = new Promise((resolve, reject) => {\n\t\tlet isDone = false;\n\t\tfunction onDone() {\n\t\t\tif (isDone) return;\n\t\t\tisDone = true;\n\t\t\tobs$.unsubscribe();\n\t\t}\n\t\tac.signal.addEventListener(\"abort\", () => {\n\t\t\treject(ac.signal.reason);\n\t\t});\n\t\tconst obs$ = observable$1.subscribe({\n\t\t\tnext(data) {\n\t\t\t\tisDone = true;\n\t\t\t\tresolve(data);\n\t\t\t\tonDone();\n\t\t\t},\n\t\t\terror(data) {\n\t\t\t\treject(data);\n\t\t\t},\n\t\t\tcomplete() {\n\t\t\t\tac.abort();\n\t\t\t\tonDone();\n\t\t\t}\n\t\t});\n\t});\n\treturn promise;\n}\n/**\n* @internal\n*/\nfunction observableToReadableStream(observable$1, signal) {\n\tlet unsub = null;\n\tconst onAbort = () => {\n\t\tunsub === null || unsub === void 0 || unsub.unsubscribe();\n\t\tunsub = null;\n\t\tsignal.removeEventListener(\"abort\", onAbort);\n\t};\n\treturn new ReadableStream({\n\t\tstart(controller) {\n\t\t\tunsub = observable$1.subscribe({\n\t\t\t\tnext(data) {\n\t\t\t\t\tcontroller.enqueue({\n\t\t\t\t\t\tok: true,\n\t\t\t\t\t\tvalue: data\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\terror(error) {\n\t\t\t\t\tcontroller.enqueue({\n\t\t\t\t\t\tok: false,\n\t\t\t\t\t\terror\n\t\t\t\t\t});\n\t\t\t\t\tcontroller.close();\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tcontroller.close();\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (signal.aborted) onAbort();\n\t\t\telse signal.addEventListener(\"abort\", onAbort, { once: true });\n\t\t},\n\t\tcancel() {\n\t\t\tonAbort();\n\t\t}\n\t});\n}\n/** @internal */\nfunction observableToAsyncIterable(observable$1, signal) {\n\tconst stream = observableToReadableStream(observable$1, signal);\n\tconst reader = stream.getReader();\n\tconst iterator = {\n\t\tasync next() {\n\t\t\tconst value = await reader.read();\n\t\t\tif (value.done) return {\n\t\t\t\tvalue: void 0,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t\tconst { value: result } = value;\n\t\t\tif (!result.ok) throw result.error;\n\t\t\treturn {\n\t\t\t\tvalue: result.value,\n\t\t\t\tdone: false\n\t\t\t};\n\t\t},\n\t\tasync return() {\n\t\t\tawait reader.cancel();\n\t\t\treturn {\n\t\t\t\tvalue: void 0,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\t};\n\treturn { [Symbol.asyncIterator]() {\n\t\treturn iterator;\n\t} };\n}\n\n//#endregion\nexport { isObservable, observable, observableToAsyncIterable, observableToPromise };\n//# sourceMappingURL=observable-UMO3vUa_.mjs.map","import { observable } from \"./observable-UMO3vUa_.mjs\";\n\n//#region src/observable/operators.ts\nfunction map(project) {\n\treturn (source) => {\n\t\treturn observable((destination) => {\n\t\t\tlet index = 0;\n\t\t\tconst subscription = source.subscribe({\n\t\t\t\tnext(value) {\n\t\t\t\t\tdestination.next(project(value, index++));\n\t\t\t\t},\n\t\t\t\terror(error) {\n\t\t\t\t\tdestination.error(error);\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tdestination.complete();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn subscription;\n\t\t});\n\t};\n}\nfunction share(_opts) {\n\treturn (source) => {\n\t\tlet refCount = 0;\n\t\tlet subscription = null;\n\t\tconst observers = [];\n\t\tfunction startIfNeeded() {\n\t\t\tif (subscription) return;\n\t\t\tsubscription = source.subscribe({\n\t\t\t\tnext(value) {\n\t\t\t\t\tfor (const observer of observers) {\n\t\t\t\t\t\tvar _observer$next;\n\t\t\t\t\t\t(_observer$next = observer.next) === null || _observer$next === void 0 || _observer$next.call(observer, value);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror(error) {\n\t\t\t\t\tfor (const observer of observers) {\n\t\t\t\t\t\tvar _observer$error;\n\t\t\t\t\t\t(_observer$error = observer.error) === null || _observer$error === void 0 || _observer$error.call(observer, error);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tfor (const observer of observers) {\n\t\t\t\t\t\tvar _observer$complete;\n\t\t\t\t\t\t(_observer$complete = observer.complete) === null || _observer$complete === void 0 || _observer$complete.call(observer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tfunction resetIfNeeded() {\n\t\t\tif (refCount === 0 && subscription) {\n\t\t\t\tconst _sub = subscription;\n\t\t\t\tsubscription = null;\n\t\t\t\t_sub.unsubscribe();\n\t\t\t}\n\t\t}\n\t\treturn observable((subscriber) => {\n\t\t\trefCount++;\n\t\t\tobservers.push(subscriber);\n\t\t\tstartIfNeeded();\n\t\t\treturn { unsubscribe() {\n\t\t\t\trefCount--;\n\t\t\t\tresetIfNeeded();\n\t\t\t\tconst index = observers.findIndex((v) => v === subscriber);\n\t\t\t\tif (index > -1) observers.splice(index, 1);\n\t\t\t} };\n\t\t});\n\t};\n}\nfunction tap(observer) {\n\treturn (source) => {\n\t\treturn observable((destination) => {\n\t\t\treturn source.subscribe({\n\t\t\t\tnext(value) {\n\t\t\t\t\tvar _observer$next2;\n\t\t\t\t\t(_observer$next2 = observer.next) === null || _observer$next2 === void 0 || _observer$next2.call(observer, value);\n\t\t\t\t\tdestination.next(value);\n\t\t\t\t},\n\t\t\t\terror(error) {\n\t\t\t\t\tvar _observer$error2;\n\t\t\t\t\t(_observer$error2 = observer.error) === null || _observer$error2 === void 0 || _observer$error2.call(observer, error);\n\t\t\t\t\tdestination.error(error);\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tvar _observer$complete2;\n\t\t\t\t\t(_observer$complete2 = observer.complete) === null || _observer$complete2 === void 0 || _observer$complete2.call(observer);\n\t\t\t\t\tdestination.complete();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n}\nconst distinctUnsetMarker = Symbol();\nfunction distinctUntilChanged(compare = (a, b) => a === b) {\n\treturn (source) => {\n\t\treturn observable((destination) => {\n\t\t\tlet lastValue = distinctUnsetMarker;\n\t\t\treturn source.subscribe({\n\t\t\t\tnext(value) {\n\t\t\t\t\tif (lastValue !== distinctUnsetMarker && compare(lastValue, value)) return;\n\t\t\t\t\tlastValue = value;\n\t\t\t\t\tdestination.next(value);\n\t\t\t\t},\n\t\t\t\terror(error) {\n\t\t\t\t\tdestination.error(error);\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tdestination.complete();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n}\nconst isDeepEqual = (a, b) => {\n\tif (a === b) return true;\n\tconst bothAreObjects = a && b && typeof a === \"object\" && typeof b === \"object\";\n\treturn !!bothAreObjects && Object.keys(a).length === Object.keys(b).length && Object.entries(a).every(([k, v]) => isDeepEqual(v, b[k]));\n};\nfunction distinctUntilDeepChanged() {\n\treturn distinctUntilChanged(isDeepEqual);\n}\n\n//#endregion\n//#region src/observable/behaviorSubject.ts\n/**\n* @internal\n* An observable that maintains and provides a \"current value\" to subscribers\n* @see https://www.learnrxjs.io/learn-rxjs/subjects/behaviorsubject\n*/\nfunction behaviorSubject(initialValue) {\n\tlet value = initialValue;\n\tconst observerList = [];\n\tconst addObserver = (observer) => {\n\t\tif (value !== void 0) observer.next(value);\n\t\tobserverList.push(observer);\n\t};\n\tconst removeObserver = (observer) => {\n\t\tobserverList.splice(observerList.indexOf(observer), 1);\n\t};\n\tconst obs = observable((observer) => {\n\t\taddObserver(observer);\n\t\treturn () => {\n\t\t\tremoveObserver(observer);\n\t\t};\n\t});\n\tobs.next = (nextValue) => {\n\t\tif (value === nextValue) return;\n\t\tvalue = nextValue;\n\t\tfor (const observer of observerList) observer.next(nextValue);\n\t};\n\tobs.get = () => value;\n\treturn obs;\n}\n\n//#endregion\nexport { behaviorSubject, distinctUntilChanged, distinctUntilDeepChanged, map, share, tap };\n//# sourceMappingURL=observable-CUiPknO-.mjs.map","import { observable } from \"@trpc/server/observable\";\n\n//#region src/links/internals/createChain.ts\n/** @internal */\nfunction createChain(opts) {\n\treturn observable((observer) => {\n\t\tfunction execute(index = 0, op = opts.op) {\n\t\t\tconst next = opts.links[index];\n\t\t\tif (!next) throw new Error(\"No more links to execute - did you forget to add an ending link?\");\n\t\t\tconst subscription = next({\n\t\t\t\top,\n\t\t\t\tnext(nextOp) {\n\t\t\t\t\tconst nextObserver = execute(index + 1, nextOp);\n\t\t\t\t\treturn nextObserver;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn subscription;\n\t\t}\n\t\tconst obs$ = execute();\n\t\treturn obs$.subscribe(observer);\n\t});\n}\n\n//#endregion\n//#region src/links/splitLink.ts\nfunction asArray(value) {\n\treturn Array.isArray(value) ? value : [value];\n}\nfunction splitLink(opts) {\n\treturn (runtime) => {\n\t\tconst yes = asArray(opts.true).map((link) => link(runtime));\n\t\tconst no = asArray(opts.false).map((link) => link(runtime));\n\t\treturn (props) => {\n\t\t\treturn observable((observer) => {\n\t\t\t\tconst links = opts.condition(props.op) ? yes : no;\n\t\t\t\treturn createChain({\n\t\t\t\t\top: props.op,\n\t\t\t\t\tlinks\n\t\t\t\t}).subscribe(observer);\n\t\t\t});\n\t\t};\n\t};\n}\n\n//#endregion\nexport { createChain, splitLink };\n//# sourceMappingURL=splitLink-B7Cuf2c_.mjs.map","//#region src/unstable-core-do-not-import/rpc/codes.ts\n/**\n* JSON-RPC 2.0 Error codes\n*\n* `-32000` to `-32099` are reserved for implementation-defined server-errors.\n* For tRPC we're copying the last digits of HTTP 4XX errors.\n*/\nconst TRPC_ERROR_CODES_BY_KEY = {\n\tPARSE_ERROR: -32700,\n\tBAD_REQUEST: -32600,\n\tINTERNAL_SERVER_ERROR: -32603,\n\tNOT_IMPLEMENTED: -32603,\n\tBAD_GATEWAY: -32603,\n\tSERVICE_UNAVAILABLE: -32603,\n\tGATEWAY_TIMEOUT: -32603,\n\tUNAUTHORIZED: -32001,\n\tPAYMENT_REQUIRED: -32002,\n\tFORBIDDEN: -32003,\n\tNOT_FOUND: -32004,\n\tMETHOD_NOT_SUPPORTED: -32005,\n\tTIMEOUT: -32008,\n\tCONFLICT: -32009,\n\tPRECONDITION_FAILED: -32012,\n\tPAYLOAD_TOO_LARGE: -32013,\n\tUNSUPPORTED_MEDIA_TYPE: -32015,\n\tUNPROCESSABLE_CONTENT: -32022,\n\tTOO_MANY_REQUESTS: -32029,\n\tCLIENT_CLOSED_REQUEST: -32099\n};\nconst TRPC_ERROR_CODES_BY_NUMBER = {\n\t[-32700]: \"PARSE_ERROR\",\n\t[-32600]: \"BAD_REQUEST\",\n\t[-32603]: \"INTERNAL_SERVER_ERROR\",\n\t[-32001]: \"UNAUTHORIZED\",\n\t[-32002]: \"PAYMENT_REQUIRED\",\n\t[-32003]: \"FORBIDDEN\",\n\t[-32004]: \"NOT_FOUND\",\n\t[-32005]: \"METHOD_NOT_SUPPORTED\",\n\t[-32008]: \"TIMEOUT\",\n\t[-32009]: \"CONFLICT\",\n\t[-32012]: \"PRECONDITION_FAILED\",\n\t[-32013]: \"PAYLOAD_TOO_LARGE\",\n\t[-32015]: \"UNSUPPORTED_MEDIA_TYPE\",\n\t[-32022]: \"UNPROCESSABLE_CONTENT\",\n\t[-32029]: \"TOO_MANY_REQUESTS\",\n\t[-32099]: \"CLIENT_CLOSED_REQUEST\"\n};\n/**\n* tRPC error codes that are considered retryable\n* With out of the box SSE, the client will reconnect when these errors are encountered\n*/\nconst retryableRpcCodes = [\n\tTRPC_ERROR_CODES_BY_KEY.BAD_GATEWAY,\n\tTRPC_ERROR_CODES_BY_KEY.SERVICE_UNAVAILABLE,\n\tTRPC_ERROR_CODES_BY_KEY.GATEWAY_TIMEOUT,\n\tTRPC_ERROR_CODES_BY_KEY.INTERNAL_SERVER_ERROR\n];\n\n//#endregion\n//#region src/unstable-core-do-not-import/utils.ts\n/**\n* Ensures there are no duplicate keys when building a procedure.\n* @internal\n*/\nfunction mergeWithoutOverrides(obj1, ...objs) {\n\tconst newObj = Object.assign(Object.create(null), obj1);\n\tfor (const overrides of objs) for (const key in overrides) {\n\t\tif (key in newObj && newObj[key] !== overrides[key]) throw new Error(`Duplicate key ${key}`);\n\t\tnewObj[key] = overrides[key];\n\t}\n\treturn newObj;\n}\n/**\n* Check that value is object\n* @internal\n*/\nfunction isObject(value) {\n\treturn !!value && !Array.isArray(value) && typeof value === \"object\";\n}\nfunction isFunction(fn) {\n\treturn typeof fn === \"function\";\n}\n/**\n* Create an object without inheriting anything from `Object.prototype`\n* @internal\n*/\nfunction omitPrototype(obj) {\n\treturn Object.assign(Object.create(null), obj);\n}\nconst asyncIteratorsSupported = typeof Symbol === \"function\" && !!Symbol.asyncIterator;\nfunction isAsyncIterable(value) {\n\treturn asyncIteratorsSupported && isObject(value) && Symbol.asyncIterator in value;\n}\n/**\n* Run an IIFE\n*/\nconst run = (fn) => fn();\nfunction noop() {}\nfunction identity(it) {\n\treturn it;\n}\n/**\n* Generic runtime assertion function. Throws, if the condition is not `true`.\n*\n* Can be used as a slightly less dangerous variant of type assertions. Code\n* mistakes would be revealed at runtime then (hopefully during testing).\n*/\nfunction assert(condition, msg = \"no additional info\") {\n\tif (!condition) throw new Error(`AssertionError: ${msg}`);\n}\nfunction sleep(ms = 0) {\n\treturn new Promise((res) => setTimeout(res, ms));\n}\n/**\n* Ponyfill for\n* [`AbortSignal.any`](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal/any_static).\n*/\nfunction abortSignalsAnyPonyfill(signals) {\n\tif (typeof AbortSignal.any === \"function\") return AbortSignal.any(signals);\n\tconst ac = new AbortController();\n\tfor (const signal of signals) {\n\t\tif (signal.aborted) {\n\t\t\ttrigger();\n\t\t\tbreak;\n\t\t}\n\t\tsignal.addEventListener(\"abort\", trigger, { once: true });\n\t}\n\treturn ac.signal;\n\tfunction trigger() {\n\t\tac.abort();\n\t\tfor (const signal of signals) signal.removeEventListener(\"abort\", trigger);\n\t}\n}\n\n//#endregion\nexport { TRPC_ERROR_CODES_BY_KEY, TRPC_ERROR_CODES_BY_NUMBER, abortSignalsAnyPonyfill, assert, identity, isAsyncIterable, isFunction, isObject, mergeWithoutOverrides, noop, omitPrototype, retryableRpcCodes, run, sleep };\n//# sourceMappingURL=utils-DdbbrDku.mjs.map","import { TRPC_ERROR_CODES_BY_KEY, TRPC_ERROR_CODES_BY_NUMBER, isObject } from \"./utils-DdbbrDku.mjs\";\n\n//#region rolldown:runtime\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __commonJS = (cb, mod) => function() {\n\treturn mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n\tif (from && typeof from === \"object\" || typeof from === \"function\") for (var keys = __getOwnPropNames(from), i = 0, n = keys.length, key; i < n; i++) {\n\t\tkey = keys[i];\n\t\tif (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n\t\t\tget: ((k) => from[k]).bind(null, key),\n\t\t\tenumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n\t\t});\n\t}\n\treturn to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", {\n\tvalue: mod,\n\tenumerable: true\n}) : target, mod));\n\n//#endregion\n//#region src/unstable-core-do-not-import/createProxy.ts\nconst noop = () => {};\nconst freezeIfAvailable = (obj) => {\n\tif (Object.freeze) Object.freeze(obj);\n};\nfunction createInnerProxy(callback, path, memo) {\n\tvar _memo$cacheKey;\n\tconst cacheKey = path.join(\".\");\n\t(_memo$cacheKey = memo[cacheKey]) !== null && _memo$cacheKey !== void 0 || (memo[cacheKey] = new Proxy(noop, {\n\t\tget(_obj, key) {\n\t\t\tif (typeof key !== \"string\" || key === \"then\") return void 0;\n\t\t\treturn createInnerProxy(callback, [...path, key], memo);\n\t\t},\n\t\tapply(_1, _2, args) {\n\t\t\tconst lastOfPath = path[path.length - 1];\n\t\t\tlet opts = {\n\t\t\t\targs,\n\t\t\t\tpath\n\t\t\t};\n\t\t\tif (lastOfPath === \"call\") opts = {\n\t\t\t\targs: args.length >= 2 ? [args[1]] : [],\n\t\t\t\tpath: path.slice(0, -1)\n\t\t\t};\n\t\t\telse if (lastOfPath === \"apply\") opts = {\n\t\t\t\targs: args.length >= 2 ? args[1] : [],\n\t\t\t\tpath: path.slice(0, -1)\n\t\t\t};\n\t\t\tfreezeIfAvailable(opts.args);\n\t\t\tfreezeIfAvailable(opts.path);\n\t\t\treturn callback(opts);\n\t\t}\n\t}));\n\treturn memo[cacheKey];\n}\n/**\n* Creates a proxy that calls the callback with the path and arguments\n*\n* @internal\n*/\nconst createRecursiveProxy = (callback) => createInnerProxy(callback, [], Object.create(null));\n/**\n* Used in place of `new Proxy` where each handler will map 1 level deep to another value.\n*\n* @internal\n*/\nconst createFlatProxy = (callback) => {\n\treturn new Proxy(noop, { get(_obj, name) {\n\t\tif (name === \"then\") return void 0;\n\t\treturn callback(name);\n\t} });\n};\n\n//#endregion\n//#region src/unstable-core-do-not-import/http/getHTTPStatusCode.ts\nconst JSONRPC2_TO_HTTP_CODE = {\n\tPARSE_ERROR: 400,\n\tBAD_REQUEST: 400,\n\tUNAUTHORIZED: 401,\n\tPAYMENT_REQUIRED: 402,\n\tFORBIDDEN: 403,\n\tNOT_FOUND: 404,\n\tMETHOD_NOT_SUPPORTED: 405,\n\tTIMEOUT: 408,\n\tCONFLICT: 409,\n\tPRECONDITION_FAILED: 412,\n\tPAYLOAD_TOO_LARGE: 413,\n\tUNSUPPORTED_MEDIA_TYPE: 415,\n\tUNPROCESSABLE_CONTENT: 422,\n\tTOO_MANY_REQUESTS: 429,\n\tCLIENT_CLOSED_REQUEST: 499,\n\tINTERNAL_SERVER_ERROR: 500,\n\tNOT_IMPLEMENTED: 501,\n\tBAD_GATEWAY: 502,\n\tSERVICE_UNAVAILABLE: 503,\n\tGATEWAY_TIMEOUT: 504\n};\nconst HTTP_CODE_TO_JSONRPC2 = {\n\t400: \"BAD_REQUEST\",\n\t401: \"UNAUTHORIZED\",\n\t402: \"PAYMENT_REQUIRED\",\n\t403: \"FORBIDDEN\",\n\t404: \"NOT_FOUND\",\n\t405: \"METHOD_NOT_SUPPORTED\",\n\t408: \"TIMEOUT\",\n\t409: \"CONFLICT\",\n\t412: \"PRECONDITION_FAILED\",\n\t413: \"PAYLOAD_TOO_LARGE\",\n\t415: \"UNSUPPORTED_MEDIA_TYPE\",\n\t422: \"UNPROCESSABLE_CONTENT\",\n\t429: \"TOO_MANY_REQUESTS\",\n\t499: \"CLIENT_CLOSED_REQUEST\",\n\t500: \"INTERNAL_SERVER_ERROR\",\n\t501: \"NOT_IMPLEMENTED\",\n\t502: \"BAD_GATEWAY\",\n\t503: \"SERVICE_UNAVAILABLE\",\n\t504: \"GATEWAY_TIMEOUT\"\n};\nfunction getStatusCodeFromKey(code) {\n\tvar _JSONRPC2_TO_HTTP_COD;\n\treturn (_JSONRPC2_TO_HTTP_COD = JSONRPC2_TO_HTTP_CODE[code]) !== null && _JSONRPC2_TO_HTTP_COD !== void 0 ? _JSONRPC2_TO_HTTP_COD : 500;\n}\nfunction getStatusKeyFromCode(code) {\n\tvar _HTTP_CODE_TO_JSONRPC;\n\treturn (_HTTP_CODE_TO_JSONRPC = HTTP_CODE_TO_JSONRPC2[code]) !== null && _HTTP_CODE_TO_JSONRPC !== void 0 ? _HTTP_CODE_TO_JSONRPC : \"INTERNAL_SERVER_ERROR\";\n}\nfunction getHTTPStatusCode(json) {\n\tconst arr = Array.isArray(json) ? json : [json];\n\tconst httpStatuses = new Set(arr.map((res) => {\n\t\tif (\"error\" in res && isObject(res.error.data)) {\n\t\t\tvar _res$error$data;\n\t\t\tif (typeof ((_res$error$data = res.error.data) === null || _res$error$data === void 0 ? void 0 : _res$error$data[\"httpStatus\"]) === \"number\") return res.error.data[\"httpStatus\"];\n\t\t\tconst code = TRPC_ERROR_CODES_BY_NUMBER[res.error.code];\n\t\t\treturn getStatusCodeFromKey(code);\n\t\t}\n\t\treturn 200;\n\t}));\n\tif (httpStatuses.size !== 1) return 207;\n\tconst httpStatus = httpStatuses.values().next().value;\n\treturn httpStatus;\n}\nfunction getHTTPStatusCodeFromError(error) {\n\treturn getStatusCodeFromKey(error.code);\n}\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js\nvar require_typeof = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js\"(exports, module) {\n\tfunction _typeof$2(o) {\n\t\t\"@babel/helpers - typeof\";\n\t\treturn module.exports = _typeof$2 = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o$1) {\n\t\t\treturn typeof o$1;\n\t\t} : function(o$1) {\n\t\t\treturn o$1 && \"function\" == typeof Symbol && o$1.constructor === Symbol && o$1 !== Symbol.prototype ? \"symbol\" : typeof o$1;\n\t\t}, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof$2(o);\n\t}\n\tmodule.exports = _typeof$2, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js\nvar require_toPrimitive = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js\"(exports, module) {\n\tvar _typeof$1 = require_typeof()[\"default\"];\n\tfunction toPrimitive$1(t, r) {\n\t\tif (\"object\" != _typeof$1(t) || !t) return t;\n\t\tvar e = t[Symbol.toPrimitive];\n\t\tif (void 0 !== e) {\n\t\t\tvar i = e.call(t, r || \"default\");\n\t\t\tif (\"object\" != _typeof$1(i)) return i;\n\t\t\tthrow new TypeError(\"@@toPrimitive must return a primitive value.\");\n\t\t}\n\t\treturn (\"string\" === r ? String : Number)(t);\n\t}\n\tmodule.exports = toPrimitive$1, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js\nvar require_toPropertyKey = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js\"(exports, module) {\n\tvar _typeof = require_typeof()[\"default\"];\n\tvar toPrimitive = require_toPrimitive();\n\tfunction toPropertyKey$1(t) {\n\t\tvar i = toPrimitive(t, \"string\");\n\t\treturn \"symbol\" == _typeof(i) ? i : i + \"\";\n\t}\n\tmodule.exports = toPropertyKey$1, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js\nvar require_defineProperty = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js\"(exports, module) {\n\tvar toPropertyKey = require_toPropertyKey();\n\tfunction _defineProperty(e, r, t) {\n\t\treturn (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n\t\t\tvalue: t,\n\t\t\tenumerable: !0,\n\t\t\tconfigurable: !0,\n\t\t\twritable: !0\n\t\t}) : e[r] = t, e;\n\t}\n\tmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js\nvar require_objectSpread2 = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js\"(exports, module) {\n\tvar defineProperty = require_defineProperty();\n\tfunction ownKeys(e, r) {\n\t\tvar t = Object.keys(e);\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tvar o = Object.getOwnPropertySymbols(e);\n\t\t\tr && (o = o.filter(function(r$1) {\n\t\t\t\treturn Object.getOwnPropertyDescriptor(e, r$1).enumerable;\n\t\t\t})), t.push.apply(t, o);\n\t\t}\n\t\treturn t;\n\t}\n\tfunction _objectSpread2(e) {\n\t\tfor (var r = 1; r < arguments.length; r++) {\n\t\t\tvar t = null != arguments[r] ? arguments[r] : {};\n\t\t\tr % 2 ? ownKeys(Object(t), !0).forEach(function(r$1) {\n\t\t\t\tdefineProperty(e, r$1, t[r$1]);\n\t\t\t}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function(r$1) {\n\t\t\t\tObject.defineProperty(e, r$1, Object.getOwnPropertyDescriptor(t, r$1));\n\t\t\t});\n\t\t}\n\t\treturn e;\n\t}\n\tmodule.exports = _objectSpread2, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region src/unstable-core-do-not-import/error/getErrorShape.ts\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\n/**\n* @internal\n*/\nfunction getErrorShape(opts) {\n\tconst { path, error, config } = opts;\n\tconst { code } = opts.error;\n\tconst shape = {\n\t\tmessage: error.message,\n\t\tcode: TRPC_ERROR_CODES_BY_KEY[code],\n\t\tdata: {\n\t\t\tcode,\n\t\t\thttpStatus: getHTTPStatusCodeFromError(error)\n\t\t}\n\t};\n\tif (config.isDev && typeof opts.error.stack === \"string\") shape.data.stack = opts.error.stack;\n\tif (typeof path === \"string\") shape.data.path = path;\n\treturn config.errorFormatter((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, opts), {}, { shape }));\n}\n\n//#endregion\nexport { HTTP_CODE_TO_JSONRPC2, JSONRPC2_TO_HTTP_CODE, __commonJS, __toESM, createFlatProxy, createRecursiveProxy, getErrorShape, getHTTPStatusCode, getHTTPStatusCodeFromError, getStatusCodeFromKey, getStatusKeyFromCode, require_defineProperty, require_objectSpread2 };\n//# sourceMappingURL=getErrorShape-Uhlrl4Bk.mjs.map","import { __toESM, createRecursiveProxy, require_defineProperty, require_objectSpread2 } from \"./getErrorShape-Uhlrl4Bk.mjs\";\nimport { isFunction, isObject, mergeWithoutOverrides, omitPrototype } from \"./utils-DdbbrDku.mjs\";\n\n//#region src/unstable-core-do-not-import/error/formatter.ts\nconst defaultFormatter = ({ shape }) => {\n\treturn shape;\n};\n\n//#endregion\n//#region src/unstable-core-do-not-import/error/TRPCError.ts\nvar import_defineProperty = __toESM(require_defineProperty(), 1);\nvar UnknownCauseError = class extends Error {};\nfunction getCauseFromUnknown(cause) {\n\tif (cause instanceof Error) return cause;\n\tconst type = typeof cause;\n\tif (type === \"undefined\" || type === \"function\" || cause === null) return void 0;\n\tif (type !== \"object\") return new Error(String(cause));\n\tif (isObject(cause)) return Object.assign(new UnknownCauseError(), cause);\n\treturn void 0;\n}\nfunction getTRPCErrorFromUnknown(cause) {\n\tif (cause instanceof TRPCError) return cause;\n\tif (cause instanceof Error && cause.name === \"TRPCError\") return cause;\n\tconst trpcError = new TRPCError({\n\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\tcause\n\t});\n\tif (cause instanceof Error && cause.stack) trpcError.stack = cause.stack;\n\treturn trpcError;\n}\nvar TRPCError = class extends Error {\n\tconstructor(opts) {\n\t\tvar _ref, _opts$message, _this$cause;\n\t\tconst cause = getCauseFromUnknown(opts.cause);\n\t\tconst message = (_ref = (_opts$message = opts.message) !== null && _opts$message !== void 0 ? _opts$message : cause === null || cause === void 0 ? void 0 : cause.message) !== null && _ref !== void 0 ? _ref : opts.code;\n\t\tsuper(message, { cause });\n\t\t(0, import_defineProperty.default)(this, \"cause\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"code\", void 0);\n\t\tthis.code = opts.code;\n\t\tthis.name = \"TRPCError\";\n\t\t(_this$cause = this.cause) !== null && _this$cause !== void 0 || (this.cause = cause);\n\t}\n};\n\n//#endregion\n//#region src/unstable-core-do-not-import/transformer.ts\nvar import_objectSpread2$1 = __toESM(require_objectSpread2(), 1);\n/**\n* @internal\n*/\nfunction getDataTransformer(transformer) {\n\tif (\"input\" in transformer) return transformer;\n\treturn {\n\t\tinput: transformer,\n\t\toutput: transformer\n\t};\n}\n/**\n* @internal\n*/\nconst defaultTransformer = {\n\tinput: {\n\t\tserialize: (obj) => obj,\n\t\tdeserialize: (obj) => obj\n\t},\n\toutput: {\n\t\tserialize: (obj) => obj,\n\t\tdeserialize: (obj) => obj\n\t}\n};\nfunction transformTRPCResponseItem(config, item) {\n\tif (\"error\" in item) return (0, import_objectSpread2$1.default)((0, import_objectSpread2$1.default)({}, item), {}, { error: config.transformer.output.serialize(item.error) });\n\tif (\"data\" in item.result) return (0, import_objectSpread2$1.default)((0, import_objectSpread2$1.default)({}, item), {}, { result: (0, import_objectSpread2$1.default)((0, import_objectSpread2$1.default)({}, item.result), {}, { data: config.transformer.output.serialize(item.result.data) }) });\n\treturn item;\n}\n/**\n* Takes a unserialized `TRPCResponse` and serializes it with the router's transformers\n**/\nfunction transformTRPCResponse(config, itemOrItems) {\n\treturn Array.isArray(itemOrItems) ? itemOrItems.map((item) => transformTRPCResponseItem(config, item)) : transformTRPCResponseItem(config, itemOrItems);\n}\n/** @internal */\nfunction transformResultInner(response, transformer) {\n\tif (\"error\" in response) {\n\t\tconst error = transformer.deserialize(response.error);\n\t\treturn {\n\t\t\tok: false,\n\t\t\terror: (0, import_objectSpread2$1.default)((0, import_objectSpread2$1.default)({}, response), {}, { error })\n\t\t};\n\t}\n\tconst result = (0, import_objectSpread2$1.default)((0, import_objectSpread2$1.default)({}, response.result), (!response.result.type || response.result.type === \"data\") && {\n\t\ttype: \"data\",\n\t\tdata: transformer.deserialize(response.result.data)\n\t});\n\treturn {\n\t\tok: true,\n\t\tresult\n\t};\n}\nvar TransformResultError = class extends Error {\n\tconstructor() {\n\t\tsuper(\"Unable to transform response from server\");\n\t}\n};\n/**\n* Transforms and validates that the result is a valid TRPCResponse\n* @internal\n*/\nfunction transformResult(response, transformer) {\n\tlet result;\n\ttry {\n\t\tresult = transformResultInner(response, transformer);\n\t} catch (_unused) {\n\t\tthrow new TransformResultError();\n\t}\n\tif (!result.ok && (!isObject(result.error.error) || typeof result.error.error[\"code\"] !== \"number\")) throw new TransformResultError();\n\tif (result.ok && !isObject(result.result)) throw new TransformResultError();\n\treturn result;\n}\n\n//#endregion\n//#region src/unstable-core-do-not-import/router.ts\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\nconst lazySymbol = Symbol(\"lazy\");\nfunction once(fn) {\n\tconst uncalled = Symbol();\n\tlet result = uncalled;\n\treturn () => {\n\t\tif (result === uncalled) result = fn();\n\t\treturn result;\n\t};\n}\n/**\n* Lazy load a router\n* @see https://trpc.io/docs/server/merging-routers#lazy-load\n*/\nfunction lazy(importRouter) {\n\tasync function resolve() {\n\t\tconst mod = await importRouter();\n\t\tif (isRouter(mod)) return mod;\n\t\tconst routers = Object.values(mod);\n\t\tif (routers.length !== 1 || !isRouter(routers[0])) throw new Error(\"Invalid router module - either define exactly 1 export or return the router directly.\\nExample: `lazy(() => import('./slow.js').then((m) => m.slowRouter))`\");\n\t\treturn routers[0];\n\t}\n\tresolve[lazySymbol] = true;\n\treturn resolve;\n}\nfunction isLazy(input) {\n\treturn typeof input === \"function\" && lazySymbol in input;\n}\nfunction isRouter(value) {\n\treturn isObject(value) && isObject(value[\"_def\"]) && \"router\" in value[\"_def\"];\n}\nconst emptyRouter = {\n\t_ctx: null,\n\t_errorShape: null,\n\t_meta: null,\n\tqueries: {},\n\tmutations: {},\n\tsubscriptions: {},\n\terrorFormatter: defaultFormatter,\n\ttransformer: defaultTransformer\n};\n/**\n* Reserved words that can't be used as router or procedure names\n*/\nconst reservedWords = [\n\t\"then\",\n\t\"call\",\n\t\"apply\"\n];\n/**\n* @internal\n*/\nfunction createRouterFactory(config) {\n\tfunction createRouterInner(input) {\n\t\tconst reservedWordsUsed = new Set(Object.keys(input).filter((v) => reservedWords.includes(v)));\n\t\tif (reservedWordsUsed.size > 0) throw new Error(\"Reserved words used in `router({})` call: \" + Array.from(reservedWordsUsed).join(\", \"));\n\t\tconst procedures = omitPrototype({});\n\t\tconst lazy$1 = omitPrototype({});\n\t\tfunction createLazyLoader(opts) {\n\t\t\treturn {\n\t\t\t\tref: opts.ref,\n\t\t\t\tload: once(async () => {\n\t\t\t\t\tconst router$1 = await opts.ref();\n\t\t\t\t\tconst lazyPath = [...opts.path, opts.key];\n\t\t\t\t\tconst lazyKey = lazyPath.join(\".\");\n\t\t\t\t\topts.aggregate[opts.key] = step(router$1._def.record, lazyPath);\n\t\t\t\t\tdelete lazy$1[lazyKey];\n\t\t\t\t\tfor (const [nestedKey, nestedItem] of Object.entries(router$1._def.lazy)) {\n\t\t\t\t\t\tconst nestedRouterKey = [...lazyPath, nestedKey].join(\".\");\n\t\t\t\t\t\tlazy$1[nestedRouterKey] = createLazyLoader({\n\t\t\t\t\t\t\tref: nestedItem.ref,\n\t\t\t\t\t\t\tpath: lazyPath,\n\t\t\t\t\t\t\tkey: nestedKey,\n\t\t\t\t\t\t\taggregate: opts.aggregate[opts.key]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t};\n\t\t}\n\t\tfunction step(from, path = []) {\n\t\t\tconst aggregate = omitPrototype({});\n\t\t\tfor (const [key, item] of Object.entries(from !== null && from !== void 0 ? from : {})) {\n\t\t\t\tif (isLazy(item)) {\n\t\t\t\t\tlazy$1[[...path, key].join(\".\")] = createLazyLoader({\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tref: item,\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\taggregate\n\t\t\t\t\t});\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (isRouter(item)) {\n\t\t\t\t\taggregate[key] = step(item._def.record, [...path, key]);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (!isProcedure(item)) {\n\t\t\t\t\taggregate[key] = step(item, [...path, key]);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst newPath = [...path, key].join(\".\");\n\t\t\t\tif (procedures[newPath]) throw new Error(`Duplicate key: ${newPath}`);\n\t\t\t\tprocedures[newPath] = item;\n\t\t\t\taggregate[key] = item;\n\t\t\t}\n\t\t\treturn aggregate;\n\t\t}\n\t\tconst record = step(input);\n\t\tconst _def = (0, import_objectSpread2.default)((0, import_objectSpread2.default)({\n\t\t\t_config: config,\n\t\t\trouter: true,\n\t\t\tprocedures,\n\t\t\tlazy: lazy$1\n\t\t}, emptyRouter), {}, { record });\n\t\tconst router = (0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, record), {}, {\n\t\t\t_def,\n\t\t\tcreateCaller: createCallerFactory()({ _def })\n\t\t});\n\t\treturn router;\n\t}\n\treturn createRouterInner;\n}\nfunction isProcedure(procedureOrRouter) {\n\treturn typeof procedureOrRouter === \"function\";\n}\n/**\n* @internal\n*/\nasync function getProcedureAtPath(router, path) {\n\tconst { _def } = router;\n\tlet procedure = _def.procedures[path];\n\twhile (!procedure) {\n\t\tconst key = Object.keys(_def.lazy).find((key$1) => path.startsWith(key$1));\n\t\tif (!key) return null;\n\t\tconst lazyRouter = _def.lazy[key];\n\t\tawait lazyRouter.load();\n\t\tprocedure = _def.procedures[path];\n\t}\n\treturn procedure;\n}\n/**\n* @internal\n*/\nasync function callProcedure(opts) {\n\tconst { type, path } = opts;\n\tconst proc = await getProcedureAtPath(opts.router, path);\n\tif (!proc || !isProcedure(proc) || proc._def.type !== type && !opts.allowMethodOverride) throw new TRPCError({\n\t\tcode: \"NOT_FOUND\",\n\t\tmessage: `No \"${type}\"-procedure on path \"${path}\"`\n\t});\n\t/* istanbul ignore if -- @preserve */\n\tif (proc._def.type !== type && opts.allowMethodOverride && proc._def.type === \"subscription\") throw new TRPCError({\n\t\tcode: \"METHOD_NOT_SUPPORTED\",\n\t\tmessage: `Method override is not supported for subscriptions`\n\t});\n\treturn proc(opts);\n}\nfunction createCallerFactory() {\n\treturn function createCallerInner(router) {\n\t\tconst { _def } = router;\n\t\treturn function createCaller(ctxOrCallback, opts) {\n\t\t\treturn createRecursiveProxy(async ({ path, args }) => {\n\t\t\t\tconst fullPath = path.join(\".\");\n\t\t\t\tif (path.length === 1 && path[0] === \"_def\") return _def;\n\t\t\t\tconst procedure = await getProcedureAtPath(router, fullPath);\n\t\t\t\tlet ctx = void 0;\n\t\t\t\ttry {\n\t\t\t\t\tif (!procedure) throw new TRPCError({\n\t\t\t\t\t\tcode: \"NOT_FOUND\",\n\t\t\t\t\t\tmessage: `No procedure found on path \"${path}\"`\n\t\t\t\t\t});\n\t\t\t\t\tctx = isFunction(ctxOrCallback) ? await Promise.resolve(ctxOrCallback()) : ctxOrCallback;\n\t\t\t\t\treturn await procedure({\n\t\t\t\t\t\tpath: fullPath,\n\t\t\t\t\t\tgetRawInput: async () => args[0],\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\ttype: procedure._def.type,\n\t\t\t\t\t\tsignal: opts === null || opts === void 0 ? void 0 : opts.signal\n\t\t\t\t\t});\n\t\t\t\t} catch (cause) {\n\t\t\t\t\tvar _opts$onError, _procedure$_def$type;\n\t\t\t\t\topts === null || opts === void 0 || (_opts$onError = opts.onError) === null || _opts$onError === void 0 || _opts$onError.call(opts, {\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\terror: getTRPCErrorFromUnknown(cause),\n\t\t\t\t\t\tinput: args[0],\n\t\t\t\t\t\tpath: fullPath,\n\t\t\t\t\t\ttype: (_procedure$_def$type = procedure === null || procedure === void 0 ? void 0 : procedure._def.type) !== null && _procedure$_def$type !== void 0 ? _procedure$_def$type : \"unknown\"\n\t\t\t\t\t});\n\t\t\t\t\tthrow cause;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t};\n}\nfunction mergeRouters(...routerList) {\n\tvar _routerList$;\n\tconst record = mergeWithoutOverrides({}, ...routerList.map((r) => r._def.record));\n\tconst errorFormatter = routerList.reduce((currentErrorFormatter, nextRouter) => {\n\t\tif (nextRouter._def._config.errorFormatter && nextRouter._def._config.errorFormatter !== defaultFormatter) {\n\t\t\tif (currentErrorFormatter !== defaultFormatter && currentErrorFormatter !== nextRouter._def._config.errorFormatter) throw new Error(\"You seem to have several error formatters\");\n\t\t\treturn nextRouter._def._config.errorFormatter;\n\t\t}\n\t\treturn currentErrorFormatter;\n\t}, defaultFormatter);\n\tconst transformer = routerList.reduce((prev, current) => {\n\t\tif (current._def._config.transformer && current._def._config.transformer !== defaultTransformer) {\n\t\t\tif (prev !== defaultTransformer && prev !== current._def._config.transformer) throw new Error(\"You seem to have several transformers\");\n\t\t\treturn current._def._config.transformer;\n\t\t}\n\t\treturn prev;\n\t}, defaultTransformer);\n\tconst router = createRouterFactory({\n\t\terrorFormatter,\n\t\ttransformer,\n\t\tisDev: routerList.every((r) => r._def._config.isDev),\n\t\tallowOutsideOfServer: routerList.every((r) => r._def._config.allowOutsideOfServer),\n\t\tisServer: routerList.every((r) => r._def._config.isServer),\n\t\t$types: (_routerList$ = routerList[0]) === null || _routerList$ === void 0 ? void 0 : _routerList$._def._config.$types\n\t})(record);\n\treturn router;\n}\n\n//#endregion\n//#region src/unstable-core-do-not-import/stream/tracked.ts\nconst trackedSymbol = Symbol();\n/**\n* Produce a typed server-sent event message\n* @deprecated use `tracked(id, data)` instead\n*/\nfunction sse(event) {\n\treturn tracked(event.id, event.data);\n}\nfunction isTrackedEnvelope(value) {\n\treturn Array.isArray(value) && value[2] === trackedSymbol;\n}\n/**\n* Automatically track an event so that it can be resumed from a given id if the connection is lost\n*/\nfunction tracked(id, data) {\n\tif (id === \"\") throw new Error(\"`id` must not be an empty string as empty string is the same as not setting the id at all\");\n\treturn [\n\t\tid,\n\t\tdata,\n\t\ttrackedSymbol\n\t];\n}\n\n//#endregion\nexport { TRPCError, callProcedure, createCallerFactory, createRouterFactory, defaultFormatter, defaultTransformer, getCauseFromUnknown, getDataTransformer, getProcedureAtPath, getTRPCErrorFromUnknown, isTrackedEnvelope, lazy, mergeRouters, sse, tracked, transformResult, transformTRPCResponse };\n//# sourceMappingURL=tracked-gU3ttYjg.mjs.map","import { __toESM, require_defineProperty, require_objectSpread2 } from \"./objectSpread2-BvkFp-_Y.mjs\";\nimport { isObject } from \"@trpc/server/unstable-core-do-not-import\";\n\n//#region src/TRPCClientError.ts\nvar import_defineProperty = __toESM(require_defineProperty(), 1);\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\nfunction isTRPCClientError(cause) {\n\treturn cause instanceof TRPCClientError;\n}\nfunction isTRPCErrorResponse(obj) {\n\treturn isObject(obj) && isObject(obj[\"error\"]) && typeof obj[\"error\"][\"code\"] === \"number\" && typeof obj[\"error\"][\"message\"] === \"string\";\n}\nfunction getMessageFromUnknownError(err, fallback) {\n\tif (typeof err === \"string\") return err;\n\tif (isObject(err) && typeof err[\"message\"] === \"string\") return err[\"message\"];\n\treturn fallback;\n}\nvar TRPCClientError = class TRPCClientError extends Error {\n\tconstructor(message, opts) {\n\t\tvar _opts$result, _opts$result2;\n\t\tconst cause = opts === null || opts === void 0 ? void 0 : opts.cause;\n\t\tsuper(message, { cause });\n\t\t(0, import_defineProperty.default)(this, \"cause\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"shape\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"data\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"meta\", void 0);\n\t\tthis.meta = opts === null || opts === void 0 ? void 0 : opts.meta;\n\t\tthis.cause = cause;\n\t\tthis.shape = opts === null || opts === void 0 || (_opts$result = opts.result) === null || _opts$result === void 0 ? void 0 : _opts$result.error;\n\t\tthis.data = opts === null || opts === void 0 || (_opts$result2 = opts.result) === null || _opts$result2 === void 0 ? void 0 : _opts$result2.error.data;\n\t\tthis.name = \"TRPCClientError\";\n\t\tObject.setPrototypeOf(this, TRPCClientError.prototype);\n\t}\n\tstatic from(_cause, opts = {}) {\n\t\tconst cause = _cause;\n\t\tif (isTRPCClientError(cause)) {\n\t\t\tif (opts.meta) cause.meta = (0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, cause.meta), opts.meta);\n\t\t\treturn cause;\n\t\t}\n\t\tif (isTRPCErrorResponse(cause)) return new TRPCClientError(cause.error.message, (0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, opts), {}, { result: cause }));\n\t\treturn new TRPCClientError(getMessageFromUnknownError(cause, \"Unknown error\"), (0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, opts), {}, { cause }));\n\t}\n};\n\n//#endregion\nexport { TRPCClientError, isTRPCClientError };\n//# sourceMappingURL=TRPCClientError-CjKyS10w.mjs.map","//#region src/internals/transformer.ts\n/**\n* @internal\n*/\n/**\n* @internal\n*/\nfunction getTransformer(transformer) {\n\tconst _transformer = transformer;\n\tif (!_transformer) return {\n\t\tinput: {\n\t\t\tserialize: (data) => data,\n\t\t\tdeserialize: (data) => data\n\t\t},\n\t\toutput: {\n\t\t\tserialize: (data) => data,\n\t\t\tdeserialize: (data) => data\n\t\t}\n\t};\n\tif (\"input\" in _transformer) return _transformer;\n\treturn {\n\t\tinput: _transformer,\n\t\toutput: _transformer\n\t};\n}\n\n//#endregion\nexport { getTransformer };\n//# sourceMappingURL=unstable-internals-Bg7n9BBj.mjs.map","import { __toESM, require_objectSpread2 } from \"./objectSpread2-BvkFp-_Y.mjs\";\nimport { getTransformer } from \"./unstable-internals-Bg7n9BBj.mjs\";\n\n//#region src/getFetch.ts\nconst isFunction = (fn) => typeof fn === \"function\";\nfunction getFetch(customFetchImpl) {\n\tif (customFetchImpl) return customFetchImpl;\n\tif (typeof window !== \"undefined\" && isFunction(window.fetch)) return window.fetch;\n\tif (typeof globalThis !== \"undefined\" && isFunction(globalThis.fetch)) return globalThis.fetch;\n\tthrow new Error(\"No fetch implementation found\");\n}\n\n//#endregion\n//#region src/links/internals/httpUtils.ts\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\nfunction resolveHTTPLinkOptions(opts) {\n\treturn {\n\t\turl: opts.url.toString(),\n\t\tfetch: opts.fetch,\n\t\ttransformer: getTransformer(opts.transformer),\n\t\tmethodOverride: opts.methodOverride\n\t};\n}\nfunction arrayToDict(array) {\n\tconst dict = {};\n\tfor (let index = 0; index < array.length; index++) {\n\t\tconst element = array[index];\n\t\tdict[index] = element;\n\t}\n\treturn dict;\n}\nconst METHOD = {\n\tquery: \"GET\",\n\tmutation: \"POST\",\n\tsubscription: \"PATCH\"\n};\nfunction getInput(opts) {\n\treturn \"input\" in opts ? opts.transformer.input.serialize(opts.input) : arrayToDict(opts.inputs.map((_input) => opts.transformer.input.serialize(_input)));\n}\nconst getUrl = (opts) => {\n\tconst parts = opts.url.split(\"?\");\n\tconst base = parts[0].replace(/\\/$/, \"\");\n\tlet url = base + \"/\" + opts.path;\n\tconst queryParts = [];\n\tif (parts[1]) queryParts.push(parts[1]);\n\tif (\"inputs\" in opts) queryParts.push(\"batch=1\");\n\tif (opts.type === \"query\" || opts.type === \"subscription\") {\n\t\tconst input = getInput(opts);\n\t\tif (input !== void 0 && opts.methodOverride !== \"POST\") queryParts.push(`input=${encodeURIComponent(JSON.stringify(input))}`);\n\t}\n\tif (queryParts.length) url += \"?\" + queryParts.join(\"&\");\n\treturn url;\n};\nconst getBody = (opts) => {\n\tif (opts.type === \"query\" && opts.methodOverride !== \"POST\") return void 0;\n\tconst input = getInput(opts);\n\treturn input !== void 0 ? JSON.stringify(input) : void 0;\n};\nconst jsonHttpRequester = (opts) => {\n\treturn httpRequest((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, opts), {}, {\n\t\tcontentTypeHeader: \"application/json\",\n\t\tgetUrl,\n\t\tgetBody\n\t}));\n};\n/**\n* Polyfill for DOMException with AbortError name\n*/\nvar AbortError = class extends Error {\n\tconstructor() {\n\t\tconst name = \"AbortError\";\n\t\tsuper(name);\n\t\tthis.name = name;\n\t\tthis.message = name;\n\t}\n};\n/**\n* Polyfill for `signal.throwIfAborted()`\n*\n* @see https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal/throwIfAborted\n*/\nconst throwIfAborted = (signal) => {\n\tvar _signal$throwIfAborte;\n\tif (!(signal === null || signal === void 0 ? void 0 : signal.aborted)) return;\n\t(_signal$throwIfAborte = signal.throwIfAborted) === null || _signal$throwIfAborte === void 0 || _signal$throwIfAborte.call(signal);\n\tif (typeof DOMException !== \"undefined\") throw new DOMException(\"AbortError\", \"AbortError\");\n\tthrow new AbortError();\n};\nasync function fetchHTTPResponse(opts) {\n\tvar _opts$methodOverride;\n\tthrowIfAborted(opts.signal);\n\tconst url = opts.getUrl(opts);\n\tconst body = opts.getBody(opts);\n\tconst { type } = opts;\n\tconst resolvedHeaders = await (async () => {\n\t\tconst heads = await opts.headers();\n\t\tif (Symbol.iterator in heads) return Object.fromEntries(heads);\n\t\treturn heads;\n\t})();\n\tconst headers = (0, import_objectSpread2.default)((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, opts.contentTypeHeader ? { \"content-type\": opts.contentTypeHeader } : {}), opts.trpcAcceptHeader ? { \"trpc-accept\": opts.trpcAcceptHeader } : void 0), resolvedHeaders);\n\treturn getFetch(opts.fetch)(url, {\n\t\tmethod: (_opts$methodOverride = opts.methodOverride) !== null && _opts$methodOverride !== void 0 ? _opts$methodOverride : METHOD[type],\n\t\tsignal: opts.signal,\n\t\tbody,\n\t\theaders\n\t});\n}\nasync function httpRequest(opts) {\n\tconst meta = {};\n\tconst res = await fetchHTTPResponse(opts);\n\tmeta.response = res;\n\tconst json = await res.json();\n\tmeta.responseJSON = json;\n\treturn {\n\t\tjson,\n\t\tmeta\n\t};\n}\n\n//#endregion\nexport { fetchHTTPResponse, getBody, getFetch, getUrl, httpRequest, jsonHttpRequester, resolveHTTPLinkOptions };\n//# sourceMappingURL=httpUtils-Bkv1johT.mjs.map","import { __toESM, require_objectSpread2 } from \"./objectSpread2-BvkFp-_Y.mjs\";\nimport { TRPCClientError } from \"./TRPCClientError-CjKyS10w.mjs\";\nimport { getUrl, httpRequest, jsonHttpRequester, resolveHTTPLinkOptions } from \"./httpUtils-Bkv1johT.mjs\";\nimport { observable } from \"@trpc/server/observable\";\nimport { transformResult } from \"@trpc/server/unstable-core-do-not-import\";\n\n//#region src/links/internals/contentTypes.ts\nfunction isOctetType(input) {\n\treturn input instanceof Uint8Array || input instanceof Blob;\n}\nfunction isFormData(input) {\n\treturn input instanceof FormData;\n}\nfunction isNonJsonSerializable(input) {\n\treturn isOctetType(input) || isFormData(input);\n}\n\n//#endregion\n//#region src/links/httpLink.ts\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\nconst universalRequester = (opts) => {\n\tif (\"input\" in opts) {\n\t\tconst { input } = opts;\n\t\tif (isFormData(input)) {\n\t\t\tif (opts.type !== \"mutation\" && opts.methodOverride !== \"POST\") throw new Error(\"FormData is only supported for mutations\");\n\t\t\treturn httpRequest((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, opts), {}, {\n\t\t\t\tcontentTypeHeader: void 0,\n\t\t\t\tgetUrl,\n\t\t\t\tgetBody: () => input\n\t\t\t}));\n\t\t}\n\t\tif (isOctetType(input)) {\n\t\t\tif (opts.type !== \"mutation\" && opts.methodOverride !== \"POST\") throw new Error(\"Octet type input is only supported for mutations\");\n\t\t\treturn httpRequest((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, opts), {}, {\n\t\t\t\tcontentTypeHeader: \"application/octet-stream\",\n\t\t\t\tgetUrl,\n\t\t\t\tgetBody: () => input\n\t\t\t}));\n\t\t}\n\t}\n\treturn jsonHttpRequester(opts);\n};\n/**\n* @see https://trpc.io/docs/client/links/httpLink\n*/\nfunction httpLink(opts) {\n\tconst resolvedOpts = resolveHTTPLinkOptions(opts);\n\treturn () => {\n\t\treturn ({ op }) => {\n\t\t\treturn observable((observer) => {\n\t\t\t\tconst { path, input, type } = op;\n\t\t\t\t/* istanbul ignore if -- @preserve */\n\t\t\t\tif (type === \"subscription\") throw new Error(\"Subscriptions are unsupported by `httpLink` - use `httpSubscriptionLink` or `wsLink`\");\n\t\t\t\tconst request = universalRequester((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, resolvedOpts), {}, {\n\t\t\t\t\ttype,\n\t\t\t\t\tpath,\n\t\t\t\t\tinput,\n\t\t\t\t\tsignal: op.signal,\n\t\t\t\t\theaders() {\n\t\t\t\t\t\tif (!opts.headers) return {};\n\t\t\t\t\t\tif (typeof opts.headers === \"function\") return opts.headers({ op });\n\t\t\t\t\t\treturn opts.headers;\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tlet meta = void 0;\n\t\t\t\trequest.then((res) => {\n\t\t\t\t\tmeta = res.meta;\n\t\t\t\t\tconst transformed = transformResult(res.json, resolvedOpts.transformer.output);\n\t\t\t\t\tif (!transformed.ok) {\n\t\t\t\t\t\tobserver.error(TRPCClientError.from(transformed.error, { meta }));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tobserver.next({\n\t\t\t\t\t\tcontext: res.meta,\n\t\t\t\t\t\tresult: transformed.result\n\t\t\t\t\t});\n\t\t\t\t\tobserver.complete();\n\t\t\t\t}).catch((cause) => {\n\t\t\t\t\tobserver.error(TRPCClientError.from(cause, { meta }));\n\t\t\t\t});\n\t\t\t\treturn () => {};\n\t\t\t});\n\t\t};\n\t};\n}\n\n//#endregion\nexport { httpLink, isFormData, isNonJsonSerializable, isOctetType };\n//# sourceMappingURL=httpLink-CYOcG9kQ.mjs.map","import { __toESM, require_objectSpread2 } from \"./objectSpread2-BvkFp-_Y.mjs\";\nimport { TRPCClientError } from \"./TRPCClientError-CjKyS10w.mjs\";\nimport { getUrl, jsonHttpRequester, resolveHTTPLinkOptions } from \"./httpUtils-Bkv1johT.mjs\";\nimport { observable } from \"@trpc/server/observable\";\nimport { transformResult } from \"@trpc/server/unstable-core-do-not-import\";\n\n//#region src/internals/dataLoader.ts\n/**\n* A function that should never be called unless we messed something up.\n*/\nconst throwFatalError = () => {\n\tthrow new Error(\"Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new\");\n};\n/**\n* Dataloader that's very inspired by https://github.com/graphql/dataloader\n* Less configuration, no caching, and allows you to cancel requests\n* When cancelling a single fetch the whole batch will be cancelled only when _all_ items are cancelled\n*/\nfunction dataLoader(batchLoader) {\n\tlet pendingItems = null;\n\tlet dispatchTimer = null;\n\tconst destroyTimerAndPendingItems = () => {\n\t\tclearTimeout(dispatchTimer);\n\t\tdispatchTimer = null;\n\t\tpendingItems = null;\n\t};\n\t/**\n\t* Iterate through the items and split them into groups based on the `batchLoader`'s validate function\n\t*/\n\tfunction groupItems(items) {\n\t\tconst groupedItems = [[]];\n\t\tlet index = 0;\n\t\twhile (true) {\n\t\t\tconst item = items[index];\n\t\t\tif (!item) break;\n\t\t\tconst lastGroup = groupedItems[groupedItems.length - 1];\n\t\t\tif (item.aborted) {\n\t\t\t\tvar _item$reject;\n\t\t\t\t(_item$reject = item.reject) === null || _item$reject === void 0 || _item$reject.call(item, new Error(\"Aborted\"));\n\t\t\t\tindex++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst isValid = batchLoader.validate(lastGroup.concat(item).map((it) => it.key));\n\t\t\tif (isValid) {\n\t\t\t\tlastGroup.push(item);\n\t\t\t\tindex++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (lastGroup.length === 0) {\n\t\t\t\tvar _item$reject2;\n\t\t\t\t(_item$reject2 = item.reject) === null || _item$reject2 === void 0 || _item$reject2.call(item, new Error(\"Input is too big for a single dispatch\"));\n\t\t\t\tindex++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tgroupedItems.push([]);\n\t\t}\n\t\treturn groupedItems;\n\t}\n\tfunction dispatch() {\n\t\tconst groupedItems = groupItems(pendingItems);\n\t\tdestroyTimerAndPendingItems();\n\t\tfor (const items of groupedItems) {\n\t\t\tif (!items.length) continue;\n\t\t\tconst batch = { items };\n\t\t\tfor (const item of items) item.batch = batch;\n\t\t\tconst promise = batchLoader.fetch(batch.items.map((_item) => _item.key));\n\t\t\tpromise.then(async (result) => {\n\t\t\t\tawait Promise.all(result.map(async (valueOrPromise, index) => {\n\t\t\t\t\tconst item = batch.items[index];\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar _item$resolve;\n\t\t\t\t\t\tconst value = await Promise.resolve(valueOrPromise);\n\t\t\t\t\t\t(_item$resolve = item.resolve) === null || _item$resolve === void 0 || _item$resolve.call(item, value);\n\t\t\t\t\t} catch (cause) {\n\t\t\t\t\t\tvar _item$reject3;\n\t\t\t\t\t\t(_item$reject3 = item.reject) === null || _item$reject3 === void 0 || _item$reject3.call(item, cause);\n\t\t\t\t\t}\n\t\t\t\t\titem.batch = null;\n\t\t\t\t\titem.reject = null;\n\t\t\t\t\titem.resolve = null;\n\t\t\t\t}));\n\t\t\t\tfor (const item of batch.items) {\n\t\t\t\t\tvar _item$reject4;\n\t\t\t\t\t(_item$reject4 = item.reject) === null || _item$reject4 === void 0 || _item$reject4.call(item, new Error(\"Missing result\"));\n\t\t\t\t\titem.batch = null;\n\t\t\t\t}\n\t\t\t}).catch((cause) => {\n\t\t\t\tfor (const item of batch.items) {\n\t\t\t\t\tvar _item$reject5;\n\t\t\t\t\t(_item$reject5 = item.reject) === null || _item$reject5 === void 0 || _item$reject5.call(item, cause);\n\t\t\t\t\titem.batch = null;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tfunction load(key) {\n\t\tvar _dispatchTimer;\n\t\tconst item = {\n\t\t\taborted: false,\n\t\t\tkey,\n\t\t\tbatch: null,\n\t\t\tresolve: throwFatalError,\n\t\t\treject: throwFatalError\n\t\t};\n\t\tconst promise = new Promise((resolve, reject) => {\n\t\t\tvar _pendingItems;\n\t\t\titem.reject = reject;\n\t\t\titem.resolve = resolve;\n\t\t\t(_pendingItems = pendingItems) !== null && _pendingItems !== void 0 || (pendingItems = []);\n\t\t\tpendingItems.push(item);\n\t\t});\n\t\t(_dispatchTimer = dispatchTimer) !== null && _dispatchTimer !== void 0 || (dispatchTimer = setTimeout(dispatch));\n\t\treturn promise;\n\t}\n\treturn { load };\n}\n\n//#endregion\n//#region src/internals/signals.ts\n/**\n* Like `Promise.all()` but for abort signals\n* - When all signals have been aborted, the merged signal will be aborted\n* - If one signal is `null`, no signal will be aborted\n*/\nfunction allAbortSignals(...signals) {\n\tconst ac = new AbortController();\n\tconst count = signals.length;\n\tlet abortedCount = 0;\n\tconst onAbort = () => {\n\t\tif (++abortedCount === count) ac.abort();\n\t};\n\tfor (const signal of signals) if (signal === null || signal === void 0 ? void 0 : signal.aborted) onAbort();\n\telse signal === null || signal === void 0 || signal.addEventListener(\"abort\", onAbort, { once: true });\n\treturn ac.signal;\n}\n/**\n* Like `Promise.race` but for abort signals\n*\n* Basically, a ponyfill for\n* [`AbortSignal.any`](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal/any_static).\n*/\nfunction raceAbortSignals(...signals) {\n\tconst ac = new AbortController();\n\tfor (const signal of signals) if (signal === null || signal === void 0 ? void 0 : signal.aborted) ac.abort();\n\telse signal === null || signal === void 0 || signal.addEventListener(\"abort\", () => ac.abort(), { once: true });\n\treturn ac.signal;\n}\nfunction abortSignalToPromise(signal) {\n\treturn new Promise((_, reject) => {\n\t\tif (signal.aborted) {\n\t\t\treject(signal.reason);\n\t\t\treturn;\n\t\t}\n\t\tsignal.addEventListener(\"abort\", () => {\n\t\t\treject(signal.reason);\n\t\t}, { once: true });\n\t});\n}\n\n//#endregion\n//#region src/links/httpBatchLink.ts\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\n/**\n* @see https://trpc.io/docs/client/links/httpBatchLink\n*/\nfunction httpBatchLink(opts) {\n\tvar _opts$maxURLLength, _opts$maxItems;\n\tconst resolvedOpts = resolveHTTPLinkOptions(opts);\n\tconst maxURLLength = (_opts$maxURLLength = opts.maxURLLength) !== null && _opts$maxURLLength !== void 0 ? _opts$maxURLLength : Infinity;\n\tconst maxItems = (_opts$maxItems = opts.maxItems) !== null && _opts$maxItems !== void 0 ? _opts$maxItems : Infinity;\n\treturn () => {\n\t\tconst batchLoader = (type) => {\n\t\t\treturn {\n\t\t\t\tvalidate(batchOps) {\n\t\t\t\t\tif (maxURLLength === Infinity && maxItems === Infinity) return true;\n\t\t\t\t\tif (batchOps.length > maxItems) return false;\n\t\t\t\t\tconst path = batchOps.map((op) => op.path).join(\",\");\n\t\t\t\t\tconst inputs = batchOps.map((op) => op.input);\n\t\t\t\t\tconst url = getUrl((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, resolvedOpts), {}, {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tinputs,\n\t\t\t\t\t\tsignal: null\n\t\t\t\t\t}));\n\t\t\t\t\treturn url.length <= maxURLLength;\n\t\t\t\t},\n\t\t\t\tasync fetch(batchOps) {\n\t\t\t\t\tconst path = batchOps.map((op) => op.path).join(\",\");\n\t\t\t\t\tconst inputs = batchOps.map((op) => op.input);\n\t\t\t\t\tconst signal = allAbortSignals(...batchOps.map((op) => op.signal));\n\t\t\t\t\tconst res = await jsonHttpRequester((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, resolvedOpts), {}, {\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tinputs,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\theaders() {\n\t\t\t\t\t\t\tif (!opts.headers) return {};\n\t\t\t\t\t\t\tif (typeof opts.headers === \"function\") return opts.headers({ opList: batchOps });\n\t\t\t\t\t\t\treturn opts.headers;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsignal\n\t\t\t\t\t}));\n\t\t\t\t\tconst resJSON = Array.isArray(res.json) ? res.json : batchOps.map(() => res.json);\n\t\t\t\t\tconst result = resJSON.map((item) => ({\n\t\t\t\t\t\tmeta: res.meta,\n\t\t\t\t\t\tjson: item\n\t\t\t\t\t}));\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tconst query = dataLoader(batchLoader(\"query\"));\n\t\tconst mutation = dataLoader(batchLoader(\"mutation\"));\n\t\tconst loaders = {\n\t\t\tquery,\n\t\t\tmutation\n\t\t};\n\t\treturn ({ op }) => {\n\t\t\treturn observable((observer) => {\n\t\t\t\t/* istanbul ignore if -- @preserve */\n\t\t\t\tif (op.type === \"subscription\") throw new Error(\"Subscriptions are unsupported by `httpLink` - use `httpSubscriptionLink` or `wsLink`\");\n\t\t\t\tconst loader = loaders[op.type];\n\t\t\t\tconst promise = loader.load(op);\n\t\t\t\tlet _res = void 0;\n\t\t\t\tpromise.then((res) => {\n\t\t\t\t\t_res = res;\n\t\t\t\t\tconst transformed = transformResult(res.json, resolvedOpts.transformer.output);\n\t\t\t\t\tif (!transformed.ok) {\n\t\t\t\t\t\tobserver.error(TRPCClientError.from(transformed.error, { meta: res.meta }));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tobserver.next({\n\t\t\t\t\t\tcontext: res.meta,\n\t\t\t\t\t\tresult: transformed.result\n\t\t\t\t\t});\n\t\t\t\t\tobserver.complete();\n\t\t\t\t}).catch((err) => {\n\t\t\t\t\tobserver.error(TRPCClientError.from(err, { meta: _res === null || _res === void 0 ? void 0 : _res.meta }));\n\t\t\t\t});\n\t\t\t\treturn () => {};\n\t\t\t});\n\t\t};\n\t};\n}\n\n//#endregion\nexport { abortSignalToPromise, allAbortSignals, dataLoader, httpBatchLink, raceAbortSignals };\n//# sourceMappingURL=httpBatchLink-CA96-gnJ.mjs.map","import { __toESM, require_objectSpread2 } from \"./objectSpread2-BvkFp-_Y.mjs\";\nimport { observable, tap } from \"@trpc/server/observable\";\n\n//#region src/links/loggerLink.ts\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\nfunction isFormData(value) {\n\tif (typeof FormData === \"undefined\") return false;\n\treturn value instanceof FormData;\n}\nconst palettes = {\n\tcss: {\n\t\tquery: [\"72e3ff\", \"3fb0d8\"],\n\t\tmutation: [\"c5a3fc\", \"904dfc\"],\n\t\tsubscription: [\"ff49e1\", \"d83fbe\"]\n\t},\n\tansi: {\n\t\tregular: {\n\t\t\tquery: [\"\\x1B[30;46m\", \"\\x1B[97;46m\"],\n\t\t\tmutation: [\"\\x1B[30;45m\", \"\\x1B[97;45m\"],\n\t\t\tsubscription: [\"\\x1B[30;42m\", \"\\x1B[97;42m\"]\n\t\t},\n\t\tbold: {\n\t\t\tquery: [\"\\x1B[1;30;46m\", \"\\x1B[1;97;46m\"],\n\t\t\tmutation: [\"\\x1B[1;30;45m\", \"\\x1B[1;97;45m\"],\n\t\t\tsubscription: [\"\\x1B[1;30;42m\", \"\\x1B[1;97;42m\"]\n\t\t}\n\t}\n};\nfunction constructPartsAndArgs(opts) {\n\tconst { direction, type, withContext, path, id, input } = opts;\n\tconst parts = [];\n\tconst args = [];\n\tif (opts.colorMode === \"none\") parts.push(direction === \"up\" ? \">>\" : \"<<\", type, `#${id}`, path);\n\telse if (opts.colorMode === \"ansi\") {\n\t\tconst [lightRegular, darkRegular] = palettes.ansi.regular[type];\n\t\tconst [lightBold, darkBold] = palettes.ansi.bold[type];\n\t\tconst reset = \"\\x1B[0m\";\n\t\tparts.push(direction === \"up\" ? lightRegular : darkRegular, direction === \"up\" ? \">>\" : \"<<\", type, direction === \"up\" ? lightBold : darkBold, `#${id}`, path, reset);\n\t} else {\n\t\tconst [light, dark] = palettes.css[type];\n\t\tconst css = `\n    background-color: #${direction === \"up\" ? light : dark};\n    color: ${direction === \"up\" ? \"black\" : \"white\"};\n    padding: 2px;\n  `;\n\t\tparts.push(\"%c\", direction === \"up\" ? \">>\" : \"<<\", type, `#${id}`, `%c${path}%c`, \"%O\");\n\t\targs.push(css, `${css}; font-weight: bold;`, `${css}; font-weight: normal;`);\n\t}\n\tif (direction === \"up\") args.push(withContext ? {\n\t\tinput,\n\t\tcontext: opts.context\n\t} : { input });\n\telse args.push((0, import_objectSpread2.default)({\n\t\tinput,\n\t\tresult: opts.result,\n\t\telapsedMs: opts.elapsedMs\n\t}, withContext && { context: opts.context }));\n\treturn {\n\t\tparts,\n\t\targs\n\t};\n}\nconst defaultLogger = ({ c = console, colorMode = \"css\", withContext }) => (props) => {\n\tconst rawInput = props.input;\n\tconst input = isFormData(rawInput) ? Object.fromEntries(rawInput) : rawInput;\n\tconst { parts, args } = constructPartsAndArgs((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, props), {}, {\n\t\tcolorMode,\n\t\tinput,\n\t\twithContext\n\t}));\n\tconst fn = props.direction === \"down\" && props.result && (props.result instanceof Error || \"error\" in props.result.result && props.result.result.error) ? \"error\" : \"log\";\n\tc[fn].apply(null, [parts.join(\" \")].concat(args));\n};\n/**\n* @see https://trpc.io/docs/v11/client/links/loggerLink\n*/\nfunction loggerLink(opts = {}) {\n\tvar _opts$colorMode, _opts$withContext;\n\tconst { enabled = () => true } = opts;\n\tconst colorMode = (_opts$colorMode = opts.colorMode) !== null && _opts$colorMode !== void 0 ? _opts$colorMode : typeof window === \"undefined\" ? \"ansi\" : \"css\";\n\tconst withContext = (_opts$withContext = opts.withContext) !== null && _opts$withContext !== void 0 ? _opts$withContext : colorMode === \"css\";\n\tconst { logger = defaultLogger({\n\t\tc: opts.console,\n\t\tcolorMode,\n\t\twithContext\n\t}) } = opts;\n\treturn () => {\n\t\treturn ({ op, next }) => {\n\t\t\treturn observable((observer) => {\n\t\t\t\tif (enabled((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, op), {}, { direction: \"up\" }))) logger((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, op), {}, { direction: \"up\" }));\n\t\t\t\tconst requestStartTime = Date.now();\n\t\t\t\tfunction logResult(result) {\n\t\t\t\t\tconst elapsedMs = Date.now() - requestStartTime;\n\t\t\t\t\tif (enabled((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, op), {}, {\n\t\t\t\t\t\tdirection: \"down\",\n\t\t\t\t\t\tresult\n\t\t\t\t\t}))) logger((0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, op), {}, {\n\t\t\t\t\t\tdirection: \"down\",\n\t\t\t\t\t\telapsedMs,\n\t\t\t\t\t\tresult\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\treturn next(op).pipe(tap({\n\t\t\t\t\tnext(result) {\n\t\t\t\t\t\tlogResult(result);\n\t\t\t\t\t},\n\t\t\t\t\terror(result) {\n\t\t\t\t\t\tlogResult(result);\n\t\t\t\t\t}\n\t\t\t\t})).subscribe(observer);\n\t\t\t});\n\t\t};\n\t};\n}\n\n//#endregion\nexport { loggerLink };\n//# sourceMappingURL=loggerLink-ineCN1PO.mjs.map","import { __toESM, require_defineProperty, require_objectSpread2 } from \"./objectSpread2-BvkFp-_Y.mjs\";\nimport { TRPCClientError } from \"./TRPCClientError-CjKyS10w.mjs\";\nimport { getTransformer } from \"./unstable-internals-Bg7n9BBj.mjs\";\nimport { behaviorSubject, observable } from \"@trpc/server/observable\";\nimport { run, sleep, transformResult } from \"@trpc/server/unstable-core-do-not-import\";\n\n//#region src/links/wsLink/wsClient/options.ts\nconst lazyDefaults = {\n\tenabled: false,\n\tcloseMs: 0\n};\nconst keepAliveDefaults = {\n\tenabled: false,\n\tpongTimeoutMs: 1e3,\n\tintervalMs: 5e3\n};\n/**\n* Calculates a delay for exponential backoff based on the retry attempt index.\n* The delay starts at 0 for the first attempt and doubles for each subsequent attempt,\n* capped at 30 seconds.\n*/\nconst exponentialBackoff = (attemptIndex) => {\n\treturn attemptIndex === 0 ? 0 : Math.min(1e3 * 2 ** attemptIndex, 3e4);\n};\n\n//#endregion\n//#region src/links/internals/urlWithConnectionParams.ts\n/**\n* Get the result of a value or function that returns a value\n* It also optionally accepts typesafe arguments for the function\n*/\nconst resultOf = (value, ...args) => {\n\treturn typeof value === \"function\" ? value(...args) : value;\n};\n\n//#endregion\n//#region src/links/wsLink/wsClient/utils.ts\nvar import_defineProperty$3 = __toESM(require_defineProperty(), 1);\nvar TRPCWebSocketClosedError = class TRPCWebSocketClosedError extends Error {\n\tconstructor(opts) {\n\t\tsuper(opts.message, { cause: opts.cause });\n\t\tthis.name = \"TRPCWebSocketClosedError\";\n\t\tObject.setPrototypeOf(this, TRPCWebSocketClosedError.prototype);\n\t}\n};\n/**\n* Utility class for managing a timeout that can be started, stopped, and reset.\n* Useful for scenarios where the timeout duration is reset dynamically based on events.\n*/\nvar ResettableTimeout = class {\n\tconstructor(onTimeout, timeoutMs) {\n\t\tthis.onTimeout = onTimeout;\n\t\tthis.timeoutMs = timeoutMs;\n\t\t(0, import_defineProperty$3.default)(this, \"timeout\", void 0);\n\t}\n\t/**\n\t* Resets the current timeout, restarting it with the same duration.\n\t* Does nothing if no timeout is active.\n\t*/\n\treset() {\n\t\tif (!this.timeout) return;\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = setTimeout(this.onTimeout, this.timeoutMs);\n\t}\n\tstart() {\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = setTimeout(this.onTimeout, this.timeoutMs);\n\t}\n\tstop() {\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = void 0;\n\t}\n};\nfunction withResolvers() {\n\tlet resolve;\n\tlet reject;\n\tconst promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\treturn {\n\t\tpromise,\n\t\tresolve,\n\t\treject\n\t};\n}\n/**\n* Resolves a WebSocket URL and optionally appends connection parameters.\n*\n* If connectionParams are provided, appends 'connectionParams=1' query parameter.\n*/\nasync function prepareUrl(urlOptions) {\n\tconst url = await resultOf(urlOptions.url);\n\tif (!urlOptions.connectionParams) return url;\n\tconst prefix = url.includes(\"?\") ? \"&\" : \"?\";\n\tconst connectionParams = `${prefix}connectionParams=1`;\n\treturn url + connectionParams;\n}\nasync function buildConnectionMessage(connectionParams) {\n\tconst message = {\n\t\tmethod: \"connectionParams\",\n\t\tdata: await resultOf(connectionParams)\n\t};\n\treturn JSON.stringify(message);\n}\n\n//#endregion\n//#region src/links/wsLink/wsClient/requestManager.ts\nvar import_defineProperty$2 = __toESM(require_defineProperty(), 1);\n/**\n* Manages WebSocket requests, tracking their lifecycle and providing utility methods\n* for handling outgoing and pending requests.\n*\n* - **Outgoing requests**: Requests that are queued and waiting to be sent.\n* - **Pending requests**: Requests that have been sent and are in flight awaiting a response.\n*   For subscriptions, multiple responses may be received until the subscription is closed.\n*/\nvar RequestManager = class {\n\tconstructor() {\n\t\t(0, import_defineProperty$2.default)(this, \"outgoingRequests\", new Array());\n\t\t(0, import_defineProperty$2.default)(this, \"pendingRequests\", {});\n\t}\n\t/**\n\t* Registers a new request by adding it to the outgoing queue and setting up\n\t* callbacks for lifecycle events such as completion or error.\n\t*\n\t* @param message - The outgoing message to be sent.\n\t* @param callbacks - Callback functions to observe the request's state.\n\t* @returns A cleanup function to manually remove the request.\n\t*/\n\tregister(message, callbacks) {\n\t\tconst { promise: end, resolve } = withResolvers();\n\t\tthis.outgoingRequests.push({\n\t\t\tid: String(message.id),\n\t\t\tmessage,\n\t\t\tend,\n\t\t\tcallbacks: {\n\t\t\t\tnext: callbacks.next,\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tcallbacks.complete();\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\terror: (e) => {\n\t\t\t\t\tcallbacks.error(e);\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tthis.delete(message.id);\n\t\t\tcallbacks.complete();\n\t\t\tresolve();\n\t\t};\n\t}\n\t/**\n\t* Deletes a request from both the outgoing and pending collections, if it exists.\n\t*/\n\tdelete(messageId) {\n\t\tif (messageId === null) return;\n\t\tthis.outgoingRequests = this.outgoingRequests.filter(({ id }) => id !== String(messageId));\n\t\tdelete this.pendingRequests[String(messageId)];\n\t}\n\t/**\n\t* Moves all outgoing requests to the pending state and clears the outgoing queue.\n\t*\n\t* The caller is expected to handle the actual sending of the requests\n\t* (e.g., sending them over the network) after this method is called.\n\t*\n\t* @returns The list of requests that were transitioned to the pending state.\n\t*/\n\tflush() {\n\t\tconst requests = this.outgoingRequests;\n\t\tthis.outgoingRequests = [];\n\t\tfor (const request of requests) this.pendingRequests[request.id] = request;\n\t\treturn requests;\n\t}\n\t/**\n\t* Retrieves all currently pending requests, which are in flight awaiting responses\n\t* or handling ongoing subscriptions.\n\t*/\n\tgetPendingRequests() {\n\t\treturn Object.values(this.pendingRequests);\n\t}\n\t/**\n\t* Retrieves a specific pending request by its message ID.\n\t*/\n\tgetPendingRequest(messageId) {\n\t\tif (messageId === null) return null;\n\t\treturn this.pendingRequests[String(messageId)];\n\t}\n\t/**\n\t* Retrieves all outgoing requests, which are waiting to be sent.\n\t*/\n\tgetOutgoingRequests() {\n\t\treturn this.outgoingRequests;\n\t}\n\t/**\n\t* Retrieves all requests, both outgoing and pending, with their respective states.\n\t*\n\t* @returns An array of all requests with their state (\"outgoing\" or \"pending\").\n\t*/\n\tgetRequests() {\n\t\treturn [...this.getOutgoingRequests().map((request) => ({\n\t\t\tstate: \"outgoing\",\n\t\t\tmessage: request.message,\n\t\t\tend: request.end,\n\t\t\tcallbacks: request.callbacks\n\t\t})), ...this.getPendingRequests().map((request) => ({\n\t\t\tstate: \"pending\",\n\t\t\tmessage: request.message,\n\t\t\tend: request.end,\n\t\t\tcallbacks: request.callbacks\n\t\t}))];\n\t}\n\t/**\n\t* Checks if there are any pending requests, including ongoing subscriptions.\n\t*/\n\thasPendingRequests() {\n\t\treturn this.getPendingRequests().length > 0;\n\t}\n\t/**\n\t* Checks if there are any pending subscriptions\n\t*/\n\thasPendingSubscriptions() {\n\t\treturn this.getPendingRequests().some((request) => request.message.method === \"subscription\");\n\t}\n\t/**\n\t* Checks if there are any outgoing requests waiting to be sent.\n\t*/\n\thasOutgoingRequests() {\n\t\treturn this.outgoingRequests.length > 0;\n\t}\n};\n\n//#endregion\n//#region src/links/wsLink/wsClient/wsConnection.ts\nvar import_defineProperty$1 = __toESM(require_defineProperty(), 1);\n/**\n* Opens a WebSocket connection asynchronously and returns a promise\n* that resolves when the connection is successfully established.\n* The promise rejects if an error occurs during the connection attempt.\n*/\nfunction asyncWsOpen(ws) {\n\tconst { promise, resolve, reject } = withResolvers();\n\tws.addEventListener(\"open\", () => {\n\t\tws.removeEventListener(\"error\", reject);\n\t\tresolve();\n\t});\n\tws.addEventListener(\"error\", reject);\n\treturn promise;\n}\n/**\n* Sets up a periodic ping-pong mechanism to keep the WebSocket connection alive.\n*\n* - Sends \"PING\" messages at regular intervals defined by `intervalMs`.\n* - If a \"PONG\" response is not received within the `pongTimeoutMs`, the WebSocket is closed.\n* - The ping timer resets upon receiving any message to maintain activity.\n* - Automatically starts the ping process when the WebSocket connection is opened.\n* - Cleans up timers when the WebSocket is closed.\n*\n* @param ws - The WebSocket instance to manage.\n* @param options - Configuration options for ping-pong intervals and timeouts.\n*/\nfunction setupPingInterval(ws, { intervalMs, pongTimeoutMs }) {\n\tlet pingTimeout;\n\tlet pongTimeout;\n\tfunction start() {\n\t\tpingTimeout = setTimeout(() => {\n\t\t\tws.send(\"PING\");\n\t\t\tpongTimeout = setTimeout(() => {\n\t\t\t\tws.close();\n\t\t\t}, pongTimeoutMs);\n\t\t}, intervalMs);\n\t}\n\tfunction reset() {\n\t\tclearTimeout(pingTimeout);\n\t\tstart();\n\t}\n\tfunction pong() {\n\t\tclearTimeout(pongTimeout);\n\t\treset();\n\t}\n\tws.addEventListener(\"open\", start);\n\tws.addEventListener(\"message\", ({ data }) => {\n\t\tclearTimeout(pingTimeout);\n\t\tstart();\n\t\tif (data === \"PONG\") pong();\n\t});\n\tws.addEventListener(\"close\", () => {\n\t\tclearTimeout(pingTimeout);\n\t\tclearTimeout(pongTimeout);\n\t});\n}\n/**\n* Manages a WebSocket connection with support for reconnection, keep-alive mechanisms,\n* and observable state tracking.\n*/\nvar WsConnection = class WsConnection {\n\tconstructor(opts) {\n\t\tvar _opts$WebSocketPonyfi;\n\t\t(0, import_defineProperty$1.default)(this, \"id\", ++WsConnection.connectCount);\n\t\t(0, import_defineProperty$1.default)(this, \"WebSocketPonyfill\", void 0);\n\t\t(0, import_defineProperty$1.default)(this, \"urlOptions\", void 0);\n\t\t(0, import_defineProperty$1.default)(this, \"keepAliveOpts\", void 0);\n\t\t(0, import_defineProperty$1.default)(this, \"wsObservable\", behaviorSubject(null));\n\t\t(0, import_defineProperty$1.default)(this, \"openPromise\", null);\n\t\tthis.WebSocketPonyfill = (_opts$WebSocketPonyfi = opts.WebSocketPonyfill) !== null && _opts$WebSocketPonyfi !== void 0 ? _opts$WebSocketPonyfi : WebSocket;\n\t\tif (!this.WebSocketPonyfill) throw new Error(\"No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill\");\n\t\tthis.urlOptions = opts.urlOptions;\n\t\tthis.keepAliveOpts = opts.keepAlive;\n\t}\n\tget ws() {\n\t\treturn this.wsObservable.get();\n\t}\n\tset ws(ws) {\n\t\tthis.wsObservable.next(ws);\n\t}\n\t/**\n\t* Checks if the WebSocket connection is open and ready to communicate.\n\t*/\n\tisOpen() {\n\t\treturn !!this.ws && this.ws.readyState === this.WebSocketPonyfill.OPEN && !this.openPromise;\n\t}\n\t/**\n\t* Checks if the WebSocket connection is closed or in the process of closing.\n\t*/\n\tisClosed() {\n\t\treturn !!this.ws && (this.ws.readyState === this.WebSocketPonyfill.CLOSING || this.ws.readyState === this.WebSocketPonyfill.CLOSED);\n\t}\n\tasync open() {\n\t\tvar _this = this;\n\t\tif (_this.openPromise) return _this.openPromise;\n\t\t_this.id = ++WsConnection.connectCount;\n\t\tconst wsPromise = prepareUrl(_this.urlOptions).then((url) => new _this.WebSocketPonyfill(url));\n\t\t_this.openPromise = wsPromise.then(async (ws) => {\n\t\t\t_this.ws = ws;\n\t\t\tws.addEventListener(\"message\", function({ data }) {\n\t\t\t\tif (data === \"PING\") this.send(\"PONG\");\n\t\t\t});\n\t\t\tif (_this.keepAliveOpts.enabled) setupPingInterval(ws, _this.keepAliveOpts);\n\t\t\tws.addEventListener(\"close\", () => {\n\t\t\t\tif (_this.ws === ws) _this.ws = null;\n\t\t\t});\n\t\t\tawait asyncWsOpen(ws);\n\t\t\tif (_this.urlOptions.connectionParams) ws.send(await buildConnectionMessage(_this.urlOptions.connectionParams));\n\t\t});\n\t\ttry {\n\t\t\tawait _this.openPromise;\n\t\t} finally {\n\t\t\t_this.openPromise = null;\n\t\t}\n\t}\n\t/**\n\t* Closes the WebSocket connection gracefully.\n\t* Waits for any ongoing open operation to complete before closing.\n\t*/\n\tasync close() {\n\t\tvar _this2 = this;\n\t\ttry {\n\t\t\tawait _this2.openPromise;\n\t\t} finally {\n\t\t\tvar _this$ws;\n\t\t\t(_this$ws = _this2.ws) === null || _this$ws === void 0 || _this$ws.close();\n\t\t}\n\t}\n};\n(0, import_defineProperty$1.default)(WsConnection, \"connectCount\", 0);\n/**\n* Provides a backward-compatible representation of the connection state.\n*/\nfunction backwardCompatibility(connection) {\n\tif (connection.isOpen()) return {\n\t\tid: connection.id,\n\t\tstate: \"open\",\n\t\tws: connection.ws\n\t};\n\tif (connection.isClosed()) return {\n\t\tid: connection.id,\n\t\tstate: \"closed\",\n\t\tws: connection.ws\n\t};\n\tif (!connection.ws) return null;\n\treturn {\n\t\tid: connection.id,\n\t\tstate: \"connecting\",\n\t\tws: connection.ws\n\t};\n}\n\n//#endregion\n//#region src/links/wsLink/wsClient/wsClient.ts\nvar import_defineProperty = __toESM(require_defineProperty(), 1);\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\n/**\n* A WebSocket client for managing TRPC operations, supporting lazy initialization,\n* reconnection, keep-alive, and request management.\n*/\nvar WsClient = class {\n\tconstructor(opts) {\n\t\tvar _opts$retryDelayMs;\n\t\t(0, import_defineProperty.default)(this, \"connectionState\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"allowReconnect\", false);\n\t\t(0, import_defineProperty.default)(this, \"requestManager\", new RequestManager());\n\t\t(0, import_defineProperty.default)(this, \"activeConnection\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"reconnectRetryDelay\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"inactivityTimeout\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"callbacks\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"lazyMode\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"reconnecting\", null);\n\t\tthis.callbacks = {\n\t\t\tonOpen: opts.onOpen,\n\t\t\tonClose: opts.onClose,\n\t\t\tonError: opts.onError\n\t\t};\n\t\tconst lazyOptions = (0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, lazyDefaults), opts.lazy);\n\t\tthis.inactivityTimeout = new ResettableTimeout(() => {\n\t\t\tif (this.requestManager.hasOutgoingRequests() || this.requestManager.hasPendingRequests()) {\n\t\t\t\tthis.inactivityTimeout.reset();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.close().catch(() => null);\n\t\t}, lazyOptions.closeMs);\n\t\tthis.activeConnection = new WsConnection({\n\t\t\tWebSocketPonyfill: opts.WebSocket,\n\t\t\turlOptions: opts,\n\t\t\tkeepAlive: (0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, keepAliveDefaults), opts.keepAlive)\n\t\t});\n\t\tthis.activeConnection.wsObservable.subscribe({ next: (ws) => {\n\t\t\tif (!ws) return;\n\t\t\tthis.setupWebSocketListeners(ws);\n\t\t} });\n\t\tthis.reconnectRetryDelay = (_opts$retryDelayMs = opts.retryDelayMs) !== null && _opts$retryDelayMs !== void 0 ? _opts$retryDelayMs : exponentialBackoff;\n\t\tthis.lazyMode = lazyOptions.enabled;\n\t\tthis.connectionState = behaviorSubject({\n\t\t\ttype: \"state\",\n\t\t\tstate: lazyOptions.enabled ? \"idle\" : \"connecting\",\n\t\t\terror: null\n\t\t});\n\t\tif (!this.lazyMode) this.open().catch(() => null);\n\t}\n\t/**\n\t* Opens the WebSocket connection. Handles reconnection attempts and updates\n\t* the connection state accordingly.\n\t*/\n\tasync open() {\n\t\tvar _this = this;\n\t\t_this.allowReconnect = true;\n\t\tif (_this.connectionState.get().state !== \"connecting\") _this.connectionState.next({\n\t\t\ttype: \"state\",\n\t\t\tstate: \"connecting\",\n\t\t\terror: null\n\t\t});\n\t\ttry {\n\t\t\tawait _this.activeConnection.open();\n\t\t} catch (error) {\n\t\t\t_this.reconnect(new TRPCWebSocketClosedError({\n\t\t\t\tmessage: \"Initialization error\",\n\t\t\t\tcause: error\n\t\t\t}));\n\t\t\treturn _this.reconnecting;\n\t\t}\n\t}\n\t/**\n\t* Closes the WebSocket connection and stops managing requests.\n\t* Ensures all outgoing and pending requests are properly finalized.\n\t*/\n\tasync close() {\n\t\tvar _this2 = this;\n\t\t_this2.allowReconnect = false;\n\t\t_this2.inactivityTimeout.stop();\n\t\tconst requestsToAwait = [];\n\t\tfor (const request of _this2.requestManager.getRequests()) if (request.message.method === \"subscription\") request.callbacks.complete();\n\t\telse if (request.state === \"outgoing\") request.callbacks.error(TRPCClientError.from(new TRPCWebSocketClosedError({ message: \"Closed before connection was established\" })));\n\t\telse requestsToAwait.push(request.end);\n\t\tawait Promise.all(requestsToAwait).catch(() => null);\n\t\tawait _this2.activeConnection.close().catch(() => null);\n\t\t_this2.connectionState.next({\n\t\t\ttype: \"state\",\n\t\t\tstate: \"idle\",\n\t\t\terror: null\n\t\t});\n\t}\n\t/**\n\t* Method to request the server.\n\t* Handles data transformation, batching of requests, and subscription lifecycle.\n\t*\n\t* @param op - The operation details including id, type, path, input and signal\n\t* @param transformer - Data transformer for serializing requests and deserializing responses\n\t* @param lastEventId - Optional ID of the last received event for subscriptions\n\t*\n\t* @returns An observable that emits operation results and handles cleanup\n\t*/\n\trequest({ op: { id, type, path, input, signal }, transformer, lastEventId }) {\n\t\treturn observable((observer) => {\n\t\t\tconst abort = this.batchSend({\n\t\t\t\tid,\n\t\t\t\tmethod: type,\n\t\t\t\tparams: {\n\t\t\t\t\tinput: transformer.input.serialize(input),\n\t\t\t\t\tpath,\n\t\t\t\t\tlastEventId\n\t\t\t\t}\n\t\t\t}, (0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, observer), {}, { next(event) {\n\t\t\t\tconst transformed = transformResult(event, transformer.output);\n\t\t\t\tif (!transformed.ok) {\n\t\t\t\t\tobserver.error(TRPCClientError.from(transformed.error));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tobserver.next({ result: transformed.result });\n\t\t\t} }));\n\t\t\treturn () => {\n\t\t\t\tabort();\n\t\t\t\tif (type === \"subscription\" && this.activeConnection.isOpen()) this.send({\n\t\t\t\t\tid,\n\t\t\t\t\tmethod: \"subscription.stop\"\n\t\t\t\t});\n\t\t\t\tsignal === null || signal === void 0 || signal.removeEventListener(\"abort\", abort);\n\t\t\t};\n\t\t});\n\t}\n\tget connection() {\n\t\treturn backwardCompatibility(this.activeConnection);\n\t}\n\treconnect(closedError) {\n\t\tvar _this3 = this;\n\t\tthis.connectionState.next({\n\t\t\ttype: \"state\",\n\t\t\tstate: \"connecting\",\n\t\t\terror: TRPCClientError.from(closedError)\n\t\t});\n\t\tif (this.reconnecting) return;\n\t\tconst tryReconnect = async (attemptIndex) => {\n\t\t\ttry {\n\t\t\t\tawait sleep(_this3.reconnectRetryDelay(attemptIndex));\n\t\t\t\tif (_this3.allowReconnect) {\n\t\t\t\t\tawait _this3.activeConnection.close();\n\t\t\t\t\tawait _this3.activeConnection.open();\n\t\t\t\t\tif (_this3.requestManager.hasPendingRequests()) _this3.send(_this3.requestManager.getPendingRequests().map(({ message }) => message));\n\t\t\t\t}\n\t\t\t\t_this3.reconnecting = null;\n\t\t\t} catch (_unused) {\n\t\t\t\tawait tryReconnect(attemptIndex + 1);\n\t\t\t}\n\t\t};\n\t\tthis.reconnecting = tryReconnect(0);\n\t}\n\tsetupWebSocketListeners(ws) {\n\t\tvar _this4 = this;\n\t\tconst handleCloseOrError = (cause) => {\n\t\t\tconst reqs = this.requestManager.getPendingRequests();\n\t\t\tfor (const { message, callbacks } of reqs) {\n\t\t\t\tif (message.method === \"subscription\") continue;\n\t\t\t\tcallbacks.error(TRPCClientError.from(cause !== null && cause !== void 0 ? cause : new TRPCWebSocketClosedError({\n\t\t\t\t\tmessage: \"WebSocket closed\",\n\t\t\t\t\tcause\n\t\t\t\t})));\n\t\t\t\tthis.requestManager.delete(message.id);\n\t\t\t}\n\t\t};\n\t\tws.addEventListener(\"open\", () => {\n\t\t\trun(async () => {\n\t\t\t\tvar _this$callbacks$onOpe, _this$callbacks;\n\t\t\t\tif (_this4.lazyMode) _this4.inactivityTimeout.start();\n\t\t\t\t(_this$callbacks$onOpe = (_this$callbacks = _this4.callbacks).onOpen) === null || _this$callbacks$onOpe === void 0 || _this$callbacks$onOpe.call(_this$callbacks);\n\t\t\t\t_this4.connectionState.next({\n\t\t\t\t\ttype: \"state\",\n\t\t\t\t\tstate: \"pending\",\n\t\t\t\t\terror: null\n\t\t\t\t});\n\t\t\t}).catch((error) => {\n\t\t\t\tws.close(3e3);\n\t\t\t\thandleCloseOrError(error);\n\t\t\t});\n\t\t});\n\t\tws.addEventListener(\"message\", ({ data }) => {\n\t\t\tthis.inactivityTimeout.reset();\n\t\t\tif (typeof data !== \"string\" || [\"PING\", \"PONG\"].includes(data)) return;\n\t\t\tconst incomingMessage = JSON.parse(data);\n\t\t\tif (\"method\" in incomingMessage) {\n\t\t\t\tthis.handleIncomingRequest(incomingMessage);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.handleResponseMessage(incomingMessage);\n\t\t});\n\t\tws.addEventListener(\"close\", (event) => {\n\t\t\tvar _this$callbacks$onClo, _this$callbacks2;\n\t\t\thandleCloseOrError(event);\n\t\t\t(_this$callbacks$onClo = (_this$callbacks2 = this.callbacks).onClose) === null || _this$callbacks$onClo === void 0 || _this$callbacks$onClo.call(_this$callbacks2, event);\n\t\t\tif (!this.lazyMode || this.requestManager.hasPendingSubscriptions()) this.reconnect(new TRPCWebSocketClosedError({\n\t\t\t\tmessage: \"WebSocket closed\",\n\t\t\t\tcause: event\n\t\t\t}));\n\t\t});\n\t\tws.addEventListener(\"error\", (event) => {\n\t\t\tvar _this$callbacks$onErr, _this$callbacks3;\n\t\t\thandleCloseOrError(event);\n\t\t\t(_this$callbacks$onErr = (_this$callbacks3 = this.callbacks).onError) === null || _this$callbacks$onErr === void 0 || _this$callbacks$onErr.call(_this$callbacks3, event);\n\t\t\tthis.reconnect(new TRPCWebSocketClosedError({\n\t\t\t\tmessage: \"WebSocket closed\",\n\t\t\t\tcause: event\n\t\t\t}));\n\t\t});\n\t}\n\thandleResponseMessage(message) {\n\t\tconst request = this.requestManager.getPendingRequest(message.id);\n\t\tif (!request) return;\n\t\trequest.callbacks.next(message);\n\t\tlet completed = true;\n\t\tif (\"result\" in message && request.message.method === \"subscription\") {\n\t\t\tif (message.result.type === \"data\") request.message.params.lastEventId = message.result.id;\n\t\t\tif (message.result.type !== \"stopped\") completed = false;\n\t\t}\n\t\tif (completed) {\n\t\t\trequest.callbacks.complete();\n\t\t\tthis.requestManager.delete(message.id);\n\t\t}\n\t}\n\thandleIncomingRequest(message) {\n\t\tif (message.method === \"reconnect\") this.reconnect(new TRPCWebSocketClosedError({ message: \"Server requested reconnect\" }));\n\t}\n\t/**\n\t* Sends a message or batch of messages directly to the server.\n\t*/\n\tsend(messageOrMessages) {\n\t\tif (!this.activeConnection.isOpen()) throw new Error(\"Active connection is not open\");\n\t\tconst messages = messageOrMessages instanceof Array ? messageOrMessages : [messageOrMessages];\n\t\tthis.activeConnection.ws.send(JSON.stringify(messages.length === 1 ? messages[0] : messages));\n\t}\n\t/**\n\t* Groups requests for batch sending.\n\t*\n\t* @returns A function to abort the batched request.\n\t*/\n\tbatchSend(message, callbacks) {\n\t\tvar _this5 = this;\n\t\tthis.inactivityTimeout.reset();\n\t\trun(async () => {\n\t\t\tif (!_this5.activeConnection.isOpen()) await _this5.open();\n\t\t\tawait sleep(0);\n\t\t\tif (!_this5.requestManager.hasOutgoingRequests()) return;\n\t\t\t_this5.send(_this5.requestManager.flush().map(({ message: message$1 }) => message$1));\n\t\t}).catch((err) => {\n\t\t\tthis.requestManager.delete(message.id);\n\t\t\tcallbacks.error(TRPCClientError.from(err));\n\t\t});\n\t\treturn this.requestManager.register(message, callbacks);\n\t}\n};\n\n//#endregion\n//#region src/links/wsLink/createWsClient.ts\nfunction createWSClient(opts) {\n\treturn new WsClient(opts);\n}\n\n//#endregion\n//#region src/links/wsLink/wsLink.ts\nfunction wsLink(opts) {\n\tconst { client } = opts;\n\tconst transformer = getTransformer(opts.transformer);\n\treturn () => {\n\t\treturn ({ op }) => {\n\t\t\treturn observable((observer) => {\n\t\t\t\tconst connStateSubscription = op.type === \"subscription\" ? client.connectionState.subscribe({ next(result) {\n\t\t\t\t\tobserver.next({\n\t\t\t\t\t\tresult,\n\t\t\t\t\t\tcontext: op.context\n\t\t\t\t\t});\n\t\t\t\t} }) : null;\n\t\t\t\tconst requestSubscription = client.request({\n\t\t\t\t\top,\n\t\t\t\t\ttransformer\n\t\t\t\t}).subscribe(observer);\n\t\t\t\treturn () => {\n\t\t\t\t\trequestSubscription.unsubscribe();\n\t\t\t\t\tconnStateSubscription === null || connStateSubscription === void 0 || connStateSubscription.unsubscribe();\n\t\t\t\t};\n\t\t\t});\n\t\t};\n\t};\n}\n\n//#endregion\nexport { createWSClient, resultOf, wsLink };\n//# sourceMappingURL=wsLink-H5IjZfJW.mjs.map","import { __commonJS, __toESM, require_defineProperty, require_objectSpread2 } from \"./objectSpread2-BvkFp-_Y.mjs\";\nimport { createChain, splitLink } from \"./splitLink-B7Cuf2c_.mjs\";\nimport { TRPCClientError, isTRPCClientError } from \"./TRPCClientError-CjKyS10w.mjs\";\nimport { fetchHTTPResponse, getBody, getFetch, getUrl, resolveHTTPLinkOptions } from \"./httpUtils-Bkv1johT.mjs\";\nimport { httpLink, isFormData, isNonJsonSerializable, isOctetType } from \"./httpLink-CYOcG9kQ.mjs\";\nimport { abortSignalToPromise, allAbortSignals, dataLoader, httpBatchLink, raceAbortSignals } from \"./httpBatchLink-CA96-gnJ.mjs\";\nimport { getTransformer } from \"./unstable-internals-Bg7n9BBj.mjs\";\nimport { loggerLink } from \"./loggerLink-ineCN1PO.mjs\";\nimport { createWSClient, resultOf, wsLink } from \"./wsLink-H5IjZfJW.mjs\";\nimport { behaviorSubject, observable, observableToPromise, share } from \"@trpc/server/observable\";\nimport { callProcedure, createFlatProxy, createRecursiveProxy, isAbortError, isAsyncIterable, iteratorResource, jsonlStreamConsumer, makeResource, retryableRpcCodes, run, sseStreamConsumer } from \"@trpc/server/unstable-core-do-not-import\";\nimport { getTRPCErrorFromUnknown, getTRPCErrorShape, isTrackedEnvelope } from \"@trpc/server\";\nimport { TRPC_ERROR_CODES_BY_KEY } from \"@trpc/server/rpc\";\n\n//#region src/internals/TRPCUntypedClient.ts\nvar import_defineProperty = __toESM(require_defineProperty(), 1);\nvar import_objectSpread2$4 = __toESM(require_objectSpread2(), 1);\nvar TRPCUntypedClient = class {\n\tconstructor(opts) {\n\t\t(0, import_defineProperty.default)(this, \"links\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"runtime\", void 0);\n\t\t(0, import_defineProperty.default)(this, \"requestId\", void 0);\n\t\tthis.requestId = 0;\n\t\tthis.runtime = {};\n\t\tthis.links = opts.links.map((link) => link(this.runtime));\n\t}\n\t$request(opts) {\n\t\tvar _opts$context;\n\t\tconst chain$ = createChain({\n\t\t\tlinks: this.links,\n\t\t\top: (0, import_objectSpread2$4.default)((0, import_objectSpread2$4.default)({}, opts), {}, {\n\t\t\t\tcontext: (_opts$context = opts.context) !== null && _opts$context !== void 0 ? _opts$context : {},\n\t\t\t\tid: ++this.requestId\n\t\t\t})\n\t\t});\n\t\treturn chain$.pipe(share());\n\t}\n\tasync requestAsPromise(opts) {\n\t\tvar _this = this;\n\t\ttry {\n\t\t\tconst req$ = _this.$request(opts);\n\t\t\tconst envelope = await observableToPromise(req$);\n\t\t\tconst data = envelope.result.data;\n\t\t\treturn data;\n\t\t} catch (err) {\n\t\t\tthrow TRPCClientError.from(err);\n\t\t}\n\t}\n\tquery(path, input, opts) {\n\t\treturn this.requestAsPromise({\n\t\t\ttype: \"query\",\n\t\t\tpath,\n\t\t\tinput,\n\t\t\tcontext: opts === null || opts === void 0 ? void 0 : opts.context,\n\t\t\tsignal: opts === null || opts === void 0 ? void 0 : opts.signal\n\t\t});\n\t}\n\tmutation(path, input, opts) {\n\t\treturn this.requestAsPromise({\n\t\t\ttype: \"mutation\",\n\t\t\tpath,\n\t\t\tinput,\n\t\t\tcontext: opts === null || opts === void 0 ? void 0 : opts.context,\n\t\t\tsignal: opts === null || opts === void 0 ? void 0 : opts.signal\n\t\t});\n\t}\n\tsubscription(path, input, opts) {\n\t\tconst observable$ = this.$request({\n\t\t\ttype: \"subscription\",\n\t\t\tpath,\n\t\t\tinput,\n\t\t\tcontext: opts.context,\n\t\t\tsignal: opts.signal\n\t\t});\n\t\treturn observable$.subscribe({\n\t\t\tnext(envelope) {\n\t\t\t\tswitch (envelope.result.type) {\n\t\t\t\t\tcase \"state\": {\n\t\t\t\t\t\tvar _opts$onConnectionSta;\n\t\t\t\t\t\t(_opts$onConnectionSta = opts.onConnectionStateChange) === null || _opts$onConnectionSta === void 0 || _opts$onConnectionSta.call(opts, envelope.result);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"started\": {\n\t\t\t\t\t\tvar _opts$onStarted;\n\t\t\t\t\t\t(_opts$onStarted = opts.onStarted) === null || _opts$onStarted === void 0 || _opts$onStarted.call(opts, { context: envelope.context });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"stopped\": {\n\t\t\t\t\t\tvar _opts$onStopped;\n\t\t\t\t\t\t(_opts$onStopped = opts.onStopped) === null || _opts$onStopped === void 0 || _opts$onStopped.call(opts);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"data\":\n\t\t\t\t\tcase void 0: {\n\t\t\t\t\t\tvar _opts$onData;\n\t\t\t\t\t\t(_opts$onData = opts.onData) === null || _opts$onData === void 0 || _opts$onData.call(opts, envelope.result.data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\terror(err) {\n\t\t\t\tvar _opts$onError;\n\t\t\t\t(_opts$onError = opts.onError) === null || _opts$onError === void 0 || _opts$onError.call(opts, err);\n\t\t\t},\n\t\t\tcomplete() {\n\t\t\t\tvar _opts$onComplete;\n\t\t\t\t(_opts$onComplete = opts.onComplete) === null || _opts$onComplete === void 0 || _opts$onComplete.call(opts);\n\t\t\t}\n\t\t});\n\t}\n};\n\n//#endregion\n//#region src/createTRPCUntypedClient.ts\nfunction createTRPCUntypedClient(opts) {\n\treturn new TRPCUntypedClient(opts);\n}\n\n//#endregion\n//#region src/createTRPCClient.ts\nconst untypedClientSymbol = Symbol.for(\"trpc_untypedClient\");\nconst clientCallTypeMap = {\n\tquery: \"query\",\n\tmutate: \"mutation\",\n\tsubscribe: \"subscription\"\n};\n/** @internal */\nconst clientCallTypeToProcedureType = (clientCallType) => {\n\treturn clientCallTypeMap[clientCallType];\n};\n/**\n* @internal\n*/\nfunction createTRPCClientProxy(client) {\n\tconst proxy = createRecursiveProxy(({ path, args }) => {\n\t\tconst pathCopy = [...path];\n\t\tconst procedureType = clientCallTypeToProcedureType(pathCopy.pop());\n\t\tconst fullPath = pathCopy.join(\".\");\n\t\treturn client[procedureType](fullPath, ...args);\n\t});\n\treturn createFlatProxy((key) => {\n\t\tif (key === untypedClientSymbol) return client;\n\t\treturn proxy[key];\n\t});\n}\nfunction createTRPCClient(opts) {\n\tconst client = new TRPCUntypedClient(opts);\n\tconst proxy = createTRPCClientProxy(client);\n\treturn proxy;\n}\n/**\n* Get an untyped client from a proxy client\n* @internal\n*/\nfunction getUntypedClient(client) {\n\treturn client[untypedClientSymbol];\n}\n\n//#endregion\n//#region src/links/httpBatchStreamLink.ts\nvar import_objectSpread2$3 = __toESM(require_objectSpread2(), 1);\n/**\n* @see https://trpc.io/docs/client/links/httpBatchStreamLink\n*/\nfunction httpBatchStreamLink(opts) {\n\tvar _opts$maxURLLength, _opts$maxItems;\n\tconst resolvedOpts = resolveHTTPLinkOptions(opts);\n\tconst maxURLLength = (_opts$maxURLLength = opts.maxURLLength) !== null && _opts$maxURLLength !== void 0 ? _opts$maxURLLength : Infinity;\n\tconst maxItems = (_opts$maxItems = opts.maxItems) !== null && _opts$maxItems !== void 0 ? _opts$maxItems : Infinity;\n\treturn () => {\n\t\tconst batchLoader = (type) => {\n\t\t\treturn {\n\t\t\t\tvalidate(batchOps) {\n\t\t\t\t\tif (maxURLLength === Infinity && maxItems === Infinity) return true;\n\t\t\t\t\tif (batchOps.length > maxItems) return false;\n\t\t\t\t\tconst path = batchOps.map((op) => op.path).join(\",\");\n\t\t\t\t\tconst inputs = batchOps.map((op) => op.input);\n\t\t\t\t\tconst url = getUrl((0, import_objectSpread2$3.default)((0, import_objectSpread2$3.default)({}, resolvedOpts), {}, {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tinputs,\n\t\t\t\t\t\tsignal: null\n\t\t\t\t\t}));\n\t\t\t\t\treturn url.length <= maxURLLength;\n\t\t\t\t},\n\t\t\t\tasync fetch(batchOps) {\n\t\t\t\t\tconst path = batchOps.map((op) => op.path).join(\",\");\n\t\t\t\t\tconst inputs = batchOps.map((op) => op.input);\n\t\t\t\t\tconst batchSignals = allAbortSignals(...batchOps.map((op) => op.signal));\n\t\t\t\t\tconst abortController = new AbortController();\n\t\t\t\t\tconst responsePromise = fetchHTTPResponse((0, import_objectSpread2$3.default)((0, import_objectSpread2$3.default)({}, resolvedOpts), {}, {\n\t\t\t\t\t\tsignal: raceAbortSignals(batchSignals, abortController.signal),\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tcontentTypeHeader: \"application/json\",\n\t\t\t\t\t\ttrpcAcceptHeader: \"application/jsonl\",\n\t\t\t\t\t\tgetUrl,\n\t\t\t\t\t\tgetBody,\n\t\t\t\t\t\tinputs,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\theaders() {\n\t\t\t\t\t\t\tif (!opts.headers) return {};\n\t\t\t\t\t\t\tif (typeof opts.headers === \"function\") return opts.headers({ opList: batchOps });\n\t\t\t\t\t\t\treturn opts.headers;\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t\tconst res = await responsePromise;\n\t\t\t\t\tconst [head] = await jsonlStreamConsumer({\n\t\t\t\t\t\tfrom: res.body,\n\t\t\t\t\t\tdeserialize: resolvedOpts.transformer.output.deserialize,\n\t\t\t\t\t\tformatError(opts$1) {\n\t\t\t\t\t\t\tconst error = opts$1.error;\n\t\t\t\t\t\t\treturn TRPCClientError.from({ error });\n\t\t\t\t\t\t},\n\t\t\t\t\t\tabortController\n\t\t\t\t\t});\n\t\t\t\t\tconst promises = Object.keys(batchOps).map(async (key) => {\n\t\t\t\t\t\tlet json = await Promise.resolve(head[key]);\n\t\t\t\t\t\tif (\"result\" in json) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t* Not very pretty, but we need to unwrap nested data as promises\n\t\t\t\t\t\t\t* Our stream producer will only resolve top-level async values or async values that are directly nested in another async value\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tconst result = await Promise.resolve(json.result);\n\t\t\t\t\t\t\tjson = { result: { data: await Promise.resolve(result.data) } };\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tjson,\n\t\t\t\t\t\t\tmeta: { response: res }\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\treturn promises;\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tconst query = dataLoader(batchLoader(\"query\"));\n\t\tconst mutation = dataLoader(batchLoader(\"mutation\"));\n\t\tconst loaders = {\n\t\t\tquery,\n\t\t\tmutation\n\t\t};\n\t\treturn ({ op }) => {\n\t\t\treturn observable((observer) => {\n\t\t\t\t/* istanbul ignore if -- @preserve */\n\t\t\t\tif (op.type === \"subscription\") throw new Error(\"Subscriptions are unsupported by `httpBatchStreamLink` - use `httpSubscriptionLink` or `wsLink`\");\n\t\t\t\tconst loader = loaders[op.type];\n\t\t\t\tconst promise = loader.load(op);\n\t\t\t\tlet _res = void 0;\n\t\t\t\tpromise.then((res) => {\n\t\t\t\t\t_res = res;\n\t\t\t\t\tif (\"error\" in res.json) {\n\t\t\t\t\t\tobserver.error(TRPCClientError.from(res.json, { meta: res.meta }));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if (\"result\" in res.json) {\n\t\t\t\t\t\tobserver.next({\n\t\t\t\t\t\t\tcontext: res.meta,\n\t\t\t\t\t\t\tresult: res.json.result\n\t\t\t\t\t\t});\n\t\t\t\t\t\tobserver.complete();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tobserver.complete();\n\t\t\t\t}).catch((err) => {\n\t\t\t\t\tobserver.error(TRPCClientError.from(err, { meta: _res === null || _res === void 0 ? void 0 : _res.meta }));\n\t\t\t\t});\n\t\t\t\treturn () => {};\n\t\t\t});\n\t\t};\n\t};\n}\n/**\n* @deprecated use {@link httpBatchStreamLink} instead\n*/\nconst unstable_httpBatchStreamLink = httpBatchStreamLink;\n\n//#endregion\n//#region src/internals/inputWithTrackedEventId.ts\nvar import_objectSpread2$2 = __toESM(require_objectSpread2(), 1);\nfunction inputWithTrackedEventId(input, lastEventId) {\n\tif (!lastEventId) return input;\n\tif (input != null && typeof input !== \"object\") return input;\n\treturn (0, import_objectSpread2$2.default)((0, import_objectSpread2$2.default)({}, input !== null && input !== void 0 ? input : {}), {}, { lastEventId });\n}\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/asyncIterator.js\nvar require_asyncIterator = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/asyncIterator.js\"(exports, module) {\n\tfunction _asyncIterator$1(r) {\n\t\tvar n, t, o, e = 2;\n\t\tfor (\"undefined\" != typeof Symbol && (t = Symbol.asyncIterator, o = Symbol.iterator); e--;) {\n\t\t\tif (t && null != (n = r[t])) return n.call(r);\n\t\t\tif (o && null != (n = r[o])) return new AsyncFromSyncIterator(n.call(r));\n\t\t\tt = \"@@asyncIterator\", o = \"@@iterator\";\n\t\t}\n\t\tthrow new TypeError(\"Object is not async iterable\");\n\t}\n\tfunction AsyncFromSyncIterator(r) {\n\t\tfunction AsyncFromSyncIteratorContinuation(r$1) {\n\t\t\tif (Object(r$1) !== r$1) return Promise.reject(new TypeError(r$1 + \" is not an object.\"));\n\t\t\tvar n = r$1.done;\n\t\t\treturn Promise.resolve(r$1.value).then(function(r$2) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: r$2,\n\t\t\t\t\tdone: n\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\treturn AsyncFromSyncIterator = function AsyncFromSyncIterator$1(r$1) {\n\t\t\tthis.s = r$1, this.n = r$1.next;\n\t\t}, AsyncFromSyncIterator.prototype = {\n\t\t\ts: null,\n\t\t\tn: null,\n\t\t\tnext: function next() {\n\t\t\t\treturn AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments));\n\t\t\t},\n\t\t\t\"return\": function _return(r$1) {\n\t\t\t\tvar n = this.s[\"return\"];\n\t\t\t\treturn void 0 === n ? Promise.resolve({\n\t\t\t\t\tvalue: r$1,\n\t\t\t\t\tdone: !0\n\t\t\t\t}) : AsyncFromSyncIteratorContinuation(n.apply(this.s, arguments));\n\t\t\t},\n\t\t\t\"throw\": function _throw(r$1) {\n\t\t\t\tvar n = this.s[\"return\"];\n\t\t\t\treturn void 0 === n ? Promise.reject(r$1) : AsyncFromSyncIteratorContinuation(n.apply(this.s, arguments));\n\t\t\t}\n\t\t}, new AsyncFromSyncIterator(r);\n\t}\n\tmodule.exports = _asyncIterator$1, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region src/links/httpSubscriptionLink.ts\nvar import_asyncIterator = __toESM(require_asyncIterator(), 1);\nasync function urlWithConnectionParams(opts) {\n\tlet url = await resultOf(opts.url);\n\tif (opts.connectionParams) {\n\t\tconst params = await resultOf(opts.connectionParams);\n\t\tconst prefix = url.includes(\"?\") ? \"&\" : \"?\";\n\t\turl += prefix + \"connectionParams=\" + encodeURIComponent(JSON.stringify(params));\n\t}\n\treturn url;\n}\n/**\n* @see https://trpc.io/docs/client/links/httpSubscriptionLink\n*/\nfunction httpSubscriptionLink(opts) {\n\tconst transformer = getTransformer(opts.transformer);\n\treturn () => {\n\t\treturn ({ op }) => {\n\t\t\treturn observable((observer) => {\n\t\t\t\tvar _opts$EventSource;\n\t\t\t\tconst { type, path, input } = op;\n\t\t\t\t/* istanbul ignore if -- @preserve */\n\t\t\t\tif (type !== \"subscription\") throw new Error(\"httpSubscriptionLink only supports subscriptions\");\n\t\t\t\tlet lastEventId = void 0;\n\t\t\t\tconst ac = new AbortController();\n\t\t\t\tconst signal = raceAbortSignals(op.signal, ac.signal);\n\t\t\t\tconst eventSourceStream = sseStreamConsumer({\n\t\t\t\t\turl: async () => getUrl({\n\t\t\t\t\t\ttransformer,\n\t\t\t\t\t\turl: await urlWithConnectionParams(opts),\n\t\t\t\t\t\tinput: inputWithTrackedEventId(input, lastEventId),\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tsignal: null\n\t\t\t\t\t}),\n\t\t\t\t\tinit: () => resultOf(opts.eventSourceOptions, { op }),\n\t\t\t\t\tsignal,\n\t\t\t\t\tdeserialize: transformer.output.deserialize,\n\t\t\t\t\tEventSource: (_opts$EventSource = opts.EventSource) !== null && _opts$EventSource !== void 0 ? _opts$EventSource : globalThis.EventSource\n\t\t\t\t});\n\t\t\t\tconst connectionState = behaviorSubject({\n\t\t\t\t\ttype: \"state\",\n\t\t\t\t\tstate: \"connecting\",\n\t\t\t\t\terror: null\n\t\t\t\t});\n\t\t\t\tconst connectionSub = connectionState.subscribe({ next(state) {\n\t\t\t\t\tobserver.next({ result: state });\n\t\t\t\t} });\n\t\t\t\trun(async () => {\n\t\t\t\t\tvar _iteratorAbruptCompletion = false;\n\t\t\t\t\tvar _didIteratorError = false;\n\t\t\t\t\tvar _iteratorError;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator = (0, import_asyncIterator.default)(eventSourceStream), _step; _iteratorAbruptCompletion = !(_step = await _iterator.next()).done; _iteratorAbruptCompletion = false) {\n\t\t\t\t\t\t\tconst chunk = _step.value;\n\t\t\t\t\t\t\tswitch (chunk.type) {\n\t\t\t\t\t\t\t\tcase \"ping\": break;\n\t\t\t\t\t\t\t\tcase \"data\":\n\t\t\t\t\t\t\t\t\tconst chunkData = chunk.data;\n\t\t\t\t\t\t\t\t\tlet result;\n\t\t\t\t\t\t\t\t\tif (chunkData.id) {\n\t\t\t\t\t\t\t\t\t\tlastEventId = chunkData.id;\n\t\t\t\t\t\t\t\t\t\tresult = {\n\t\t\t\t\t\t\t\t\t\t\tid: chunkData.id,\n\t\t\t\t\t\t\t\t\t\t\tdata: chunkData\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t} else result = { data: chunkData.data };\n\t\t\t\t\t\t\t\t\tobserver.next({\n\t\t\t\t\t\t\t\t\t\tresult,\n\t\t\t\t\t\t\t\t\t\tcontext: { eventSource: chunk.eventSource }\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"connected\": {\n\t\t\t\t\t\t\t\t\tobserver.next({\n\t\t\t\t\t\t\t\t\t\tresult: { type: \"started\" },\n\t\t\t\t\t\t\t\t\t\tcontext: { eventSource: chunk.eventSource }\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tconnectionState.next({\n\t\t\t\t\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\t\t\t\t\tstate: \"pending\",\n\t\t\t\t\t\t\t\t\t\terror: null\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase \"serialized-error\": {\n\t\t\t\t\t\t\t\t\tconst error = TRPCClientError.from({ error: chunk.error });\n\t\t\t\t\t\t\t\t\tif (retryableRpcCodes.includes(chunk.error.code)) {\n\t\t\t\t\t\t\t\t\t\tconnectionState.next({\n\t\t\t\t\t\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\t\t\t\t\t\tstate: \"connecting\",\n\t\t\t\t\t\t\t\t\t\t\terror\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase \"connecting\": {\n\t\t\t\t\t\t\t\t\tconst lastState = connectionState.get();\n\t\t\t\t\t\t\t\t\tconst error = chunk.event && TRPCClientError.from(chunk.event);\n\t\t\t\t\t\t\t\t\tif (!error && lastState.state === \"connecting\") break;\n\t\t\t\t\t\t\t\t\tconnectionState.next({\n\t\t\t\t\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\t\t\t\t\tstate: \"connecting\",\n\t\t\t\t\t\t\t\t\t\terror\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase \"timeout\": connectionState.next({\n\t\t\t\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\t\t\t\tstate: \"connecting\",\n\t\t\t\t\t\t\t\t\terror: new TRPCClientError(`Timeout of ${chunk.ms}ms reached while waiting for a response`)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t_iteratorError = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (_iteratorAbruptCompletion && _iterator.return != null) await _iterator.return();\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError) throw _iteratorError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tobserver.next({ result: { type: \"stopped\" } });\n\t\t\t\t\tconnectionState.next({\n\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\tstate: \"idle\",\n\t\t\t\t\t\terror: null\n\t\t\t\t\t});\n\t\t\t\t\tobserver.complete();\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\tobserver.error(TRPCClientError.from(error));\n\t\t\t\t});\n\t\t\t\treturn () => {\n\t\t\t\t\tobserver.complete();\n\t\t\t\t\tac.abort();\n\t\t\t\t\tconnectionSub.unsubscribe();\n\t\t\t\t};\n\t\t\t});\n\t\t};\n\t};\n}\n/**\n* @deprecated use {@link httpSubscriptionLink} instead\n*/\nconst unstable_httpSubscriptionLink = httpSubscriptionLink;\n\n//#endregion\n//#region src/links/retryLink.ts\nvar import_objectSpread2$1 = __toESM(require_objectSpread2(), 1);\n/**\n* @see https://trpc.io/docs/v11/client/links/retryLink\n*/\nfunction retryLink(opts) {\n\treturn () => {\n\t\treturn (callOpts) => {\n\t\t\treturn observable((observer) => {\n\t\t\t\tlet next$;\n\t\t\t\tlet callNextTimeout = void 0;\n\t\t\t\tlet lastEventId = void 0;\n\t\t\t\tattempt(1);\n\t\t\t\tfunction opWithLastEventId() {\n\t\t\t\t\tconst op = callOpts.op;\n\t\t\t\t\tif (!lastEventId) return op;\n\t\t\t\t\treturn (0, import_objectSpread2$1.default)((0, import_objectSpread2$1.default)({}, op), {}, { input: inputWithTrackedEventId(op.input, lastEventId) });\n\t\t\t\t}\n\t\t\t\tfunction attempt(attempts) {\n\t\t\t\t\tconst op = opWithLastEventId();\n\t\t\t\t\tnext$ = callOpts.next(op).subscribe({\n\t\t\t\t\t\terror(error) {\n\t\t\t\t\t\t\tvar _opts$retryDelayMs, _opts$retryDelayMs2;\n\t\t\t\t\t\t\tconst shouldRetry = opts.retry({\n\t\t\t\t\t\t\t\top,\n\t\t\t\t\t\t\t\tattempts,\n\t\t\t\t\t\t\t\terror\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!shouldRetry) {\n\t\t\t\t\t\t\t\tobserver.error(error);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst delayMs = (_opts$retryDelayMs = (_opts$retryDelayMs2 = opts.retryDelayMs) === null || _opts$retryDelayMs2 === void 0 ? void 0 : _opts$retryDelayMs2.call(opts, attempts)) !== null && _opts$retryDelayMs !== void 0 ? _opts$retryDelayMs : 0;\n\t\t\t\t\t\t\tif (delayMs <= 0) {\n\t\t\t\t\t\t\t\tattempt(attempts + 1);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcallNextTimeout = setTimeout(() => attempt(attempts + 1), delayMs);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnext(envelope) {\n\t\t\t\t\t\t\tif ((!envelope.result.type || envelope.result.type === \"data\") && envelope.result.id) lastEventId = envelope.result.id;\n\t\t\t\t\t\t\tobserver.next(envelope);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete() {\n\t\t\t\t\t\t\tobserver.complete();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn () => {\n\t\t\t\t\tnext$.unsubscribe();\n\t\t\t\t\tclearTimeout(callNextTimeout);\n\t\t\t\t};\n\t\t\t});\n\t\t};\n\t};\n}\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/usingCtx.js\nvar require_usingCtx = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/usingCtx.js\"(exports, module) {\n\tfunction _usingCtx() {\n\t\tvar r = \"function\" == typeof SuppressedError ? SuppressedError : function(r$1, e$1) {\n\t\t\tvar n$1 = Error();\n\t\t\treturn n$1.name = \"SuppressedError\", n$1.error = r$1, n$1.suppressed = e$1, n$1;\n\t\t}, e = {}, n = [];\n\t\tfunction using(r$1, e$1) {\n\t\t\tif (null != e$1) {\n\t\t\t\tif (Object(e$1) !== e$1) throw new TypeError(\"using declarations can only be used with objects, functions, null, or undefined.\");\n\t\t\t\tif (r$1) var o = e$1[Symbol.asyncDispose || Symbol[\"for\"](\"Symbol.asyncDispose\")];\n\t\t\t\tif (void 0 === o && (o = e$1[Symbol.dispose || Symbol[\"for\"](\"Symbol.dispose\")], r$1)) var t = o;\n\t\t\t\tif (\"function\" != typeof o) throw new TypeError(\"Object is not disposable.\");\n\t\t\t\tt && (o = function o$1() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tt.call(e$1);\n\t\t\t\t\t} catch (r$2) {\n\t\t\t\t\t\treturn Promise.reject(r$2);\n\t\t\t\t\t}\n\t\t\t\t}), n.push({\n\t\t\t\t\tv: e$1,\n\t\t\t\t\td: o,\n\t\t\t\t\ta: r$1\n\t\t\t\t});\n\t\t\t} else r$1 && n.push({\n\t\t\t\td: e$1,\n\t\t\t\ta: r$1\n\t\t\t});\n\t\t\treturn e$1;\n\t\t}\n\t\treturn {\n\t\t\te,\n\t\t\tu: using.bind(null, !1),\n\t\t\ta: using.bind(null, !0),\n\t\t\td: function d() {\n\t\t\t\tvar o, t = this.e, s = 0;\n\t\t\t\tfunction next() {\n\t\t\t\t\tfor (; o = n.pop();) try {\n\t\t\t\t\t\tif (!o.a && 1 === s) return s = 0, n.push(o), Promise.resolve().then(next);\n\t\t\t\t\t\tif (o.d) {\n\t\t\t\t\t\t\tvar r$1 = o.d.call(o.v);\n\t\t\t\t\t\t\tif (o.a) return s |= 2, Promise.resolve(r$1).then(next, err);\n\t\t\t\t\t\t} else s |= 1;\n\t\t\t\t\t} catch (r$2) {\n\t\t\t\t\t\treturn err(r$2);\n\t\t\t\t\t}\n\t\t\t\t\tif (1 === s) return t !== e ? Promise.reject(t) : Promise.resolve();\n\t\t\t\t\tif (t !== e) throw t;\n\t\t\t\t}\n\t\t\t\tfunction err(n$1) {\n\t\t\t\t\treturn t = t !== e ? new r(n$1, t) : n$1, next();\n\t\t\t\t}\n\t\t\t\treturn next();\n\t\t\t}\n\t\t};\n\t}\n\tmodule.exports = _usingCtx, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/OverloadYield.js\nvar require_OverloadYield = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/OverloadYield.js\"(exports, module) {\n\tfunction _OverloadYield(e, d) {\n\t\tthis.v = e, this.k = d;\n\t}\n\tmodule.exports = _OverloadYield, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/awaitAsyncGenerator.js\nvar require_awaitAsyncGenerator = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/awaitAsyncGenerator.js\"(exports, module) {\n\tvar OverloadYield$1 = require_OverloadYield();\n\tfunction _awaitAsyncGenerator$1(e) {\n\t\treturn new OverloadYield$1(e, 0);\n\t}\n\tmodule.exports = _awaitAsyncGenerator$1, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region ../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/wrapAsyncGenerator.js\nvar require_wrapAsyncGenerator = __commonJS({ \"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/wrapAsyncGenerator.js\"(exports, module) {\n\tvar OverloadYield = require_OverloadYield();\n\tfunction _wrapAsyncGenerator$1(e) {\n\t\treturn function() {\n\t\t\treturn new AsyncGenerator(e.apply(this, arguments));\n\t\t};\n\t}\n\tfunction AsyncGenerator(e) {\n\t\tvar r, t;\n\t\tfunction resume(r$1, t$1) {\n\t\t\ttry {\n\t\t\t\tvar n = e[r$1](t$1), o = n.value, u = o instanceof OverloadYield;\n\t\t\t\tPromise.resolve(u ? o.v : o).then(function(t$2) {\n\t\t\t\t\tif (u) {\n\t\t\t\t\t\tvar i = \"return\" === r$1 ? \"return\" : \"next\";\n\t\t\t\t\t\tif (!o.k || t$2.done) return resume(i, t$2);\n\t\t\t\t\t\tt$2 = e[i](t$2).value;\n\t\t\t\t\t}\n\t\t\t\t\tsettle(n.done ? \"return\" : \"normal\", t$2);\n\t\t\t\t}, function(e$1) {\n\t\t\t\t\tresume(\"throw\", e$1);\n\t\t\t\t});\n\t\t\t} catch (e$1) {\n\t\t\t\tsettle(\"throw\", e$1);\n\t\t\t}\n\t\t}\n\t\tfunction settle(e$1, n) {\n\t\t\tswitch (e$1) {\n\t\t\t\tcase \"return\":\n\t\t\t\t\tr.resolve({\n\t\t\t\t\t\tvalue: n,\n\t\t\t\t\t\tdone: !0\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"throw\":\n\t\t\t\t\tr.reject(n);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: r.resolve({\n\t\t\t\t\tvalue: n,\n\t\t\t\t\tdone: !1\n\t\t\t\t});\n\t\t\t}\n\t\t\t(r = r.next) ? resume(r.key, r.arg) : t = null;\n\t\t}\n\t\tthis._invoke = function(e$1, n) {\n\t\t\treturn new Promise(function(o, u) {\n\t\t\t\tvar i = {\n\t\t\t\t\tkey: e$1,\n\t\t\t\t\targ: n,\n\t\t\t\t\tresolve: o,\n\t\t\t\t\treject: u,\n\t\t\t\t\tnext: null\n\t\t\t\t};\n\t\t\t\tt ? t = t.next = i : (r = t = i, resume(e$1, n));\n\t\t\t});\n\t\t}, \"function\" != typeof e[\"return\"] && (this[\"return\"] = void 0);\n\t}\n\tAsyncGenerator.prototype[\"function\" == typeof Symbol && Symbol.asyncIterator || \"@@asyncIterator\"] = function() {\n\t\treturn this;\n\t}, AsyncGenerator.prototype.next = function(e) {\n\t\treturn this._invoke(\"next\", e);\n\t}, AsyncGenerator.prototype[\"throw\"] = function(e) {\n\t\treturn this._invoke(\"throw\", e);\n\t}, AsyncGenerator.prototype[\"return\"] = function(e) {\n\t\treturn this._invoke(\"return\", e);\n\t};\n\tmodule.exports = _wrapAsyncGenerator$1, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n} });\n\n//#endregion\n//#region src/links/localLink.ts\nvar import_usingCtx = __toESM(require_usingCtx(), 1);\nvar import_awaitAsyncGenerator = __toESM(require_awaitAsyncGenerator(), 1);\nvar import_wrapAsyncGenerator = __toESM(require_wrapAsyncGenerator(), 1);\nvar import_objectSpread2 = __toESM(require_objectSpread2(), 1);\n/**\n* localLink is a terminating link that allows you to make tRPC procedure calls directly in your application without going through HTTP.\n*\n* @see https://trpc.io/docs/links/localLink\n*/\nfunction unstable_localLink(opts) {\n\tconst transformer = getTransformer(opts.transformer);\n\tconst transformChunk = (chunk) => {\n\t\tif (opts.transformer) return chunk;\n\t\tif (chunk === void 0) return chunk;\n\t\tconst serialized = JSON.stringify(transformer.input.serialize(chunk));\n\t\tconst deserialized = JSON.parse(transformer.output.deserialize(serialized));\n\t\treturn deserialized;\n\t};\n\treturn () => ({ op }) => observable((observer) => {\n\t\tlet ctx = void 0;\n\t\tconst ac = new AbortController();\n\t\tconst signal = raceAbortSignals(op.signal, ac.signal);\n\t\tconst signalPromise = abortSignalToPromise(signal);\n\t\tsignalPromise.catch(() => {});\n\t\tlet input = op.input;\n\t\tasync function runProcedure(newInput) {\n\t\t\tinput = newInput;\n\t\t\tctx = await opts.createContext();\n\t\t\treturn callProcedure({\n\t\t\t\trouter: opts.router,\n\t\t\t\tpath: op.path,\n\t\t\t\tgetRawInput: async () => newInput,\n\t\t\t\tctx,\n\t\t\t\ttype: op.type,\n\t\t\t\tsignal\n\t\t\t});\n\t\t}\n\t\tfunction onErrorCallback(cause) {\n\t\t\tvar _opts$onError;\n\t\t\tif (isAbortError(cause)) return;\n\t\t\t(_opts$onError = opts.onError) === null || _opts$onError === void 0 || _opts$onError.call(opts, {\n\t\t\t\terror: getTRPCErrorFromUnknown(cause),\n\t\t\t\ttype: op.type,\n\t\t\t\tpath: op.path,\n\t\t\t\tinput,\n\t\t\t\tctx\n\t\t\t});\n\t\t}\n\t\tfunction coerceToTRPCClientError(cause) {\n\t\t\tif (isTRPCClientError(cause)) return cause;\n\t\t\tconst error = getTRPCErrorFromUnknown(cause);\n\t\t\tconst shape = getTRPCErrorShape({\n\t\t\t\tconfig: opts.router._def._config,\n\t\t\t\tctx,\n\t\t\t\terror,\n\t\t\t\tinput,\n\t\t\t\tpath: op.path,\n\t\t\t\ttype: op.type\n\t\t\t});\n\t\t\treturn TRPCClientError.from({ error: transformChunk(shape) });\n\t\t}\n\t\trun(async () => {\n\t\t\tswitch (op.type) {\n\t\t\t\tcase \"query\":\n\t\t\t\tcase \"mutation\": {\n\t\t\t\t\tconst result = await runProcedure(op.input);\n\t\t\t\t\tif (!isAsyncIterable(result)) {\n\t\t\t\t\t\tobserver.next({ result: { data: transformChunk(result) } });\n\t\t\t\t\t\tobserver.complete();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tobserver.next({ result: { data: (0, import_wrapAsyncGenerator.default)(function* () {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar _usingCtx$1 = (0, import_usingCtx.default)();\n\t\t\t\t\t\t\tconst iterator = _usingCtx$1.a(iteratorResource(result));\n\t\t\t\t\t\t\tconst _finally = _usingCtx$1.u(makeResource({}, () => {\n\t\t\t\t\t\t\t\tobserver.complete();\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\t\t\tconst res = yield (0, import_awaitAsyncGenerator.default)(Promise.race([iterator.next(), signalPromise]));\n\t\t\t\t\t\t\t\t\tif (res.done) return transformChunk(res.value);\n\t\t\t\t\t\t\t\t\tyield transformChunk(res.value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (cause) {\n\t\t\t\t\t\t\t\tonErrorCallback(cause);\n\t\t\t\t\t\t\t\tthrow coerceToTRPCClientError(cause);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (_) {\n\t\t\t\t\t\t\t_usingCtx$1.e = _;\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tyield (0, import_awaitAsyncGenerator.default)(_usingCtx$1.d());\n\t\t\t\t\t\t}\n\t\t\t\t\t})() } });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"subscription\": try {\n\t\t\t\t\tvar _usingCtx3 = (0, import_usingCtx.default)();\n\t\t\t\t\tconst connectionState = behaviorSubject({\n\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\tstate: \"connecting\",\n\t\t\t\t\t\terror: null\n\t\t\t\t\t});\n\t\t\t\t\tconst connectionSub = connectionState.subscribe({ next(state) {\n\t\t\t\t\t\tobserver.next({ result: state });\n\t\t\t\t\t} });\n\t\t\t\t\tlet lastEventId = void 0;\n\t\t\t\t\tconst _finally = _usingCtx3.u(makeResource({}, async () => {\n\t\t\t\t\t\tobserver.complete();\n\t\t\t\t\t\tconnectionState.next({\n\t\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\t\tstate: \"idle\",\n\t\t\t\t\t\t\terror: null\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconnectionSub.unsubscribe();\n\t\t\t\t\t}));\n\t\t\t\t\twhile (true) try {\n\t\t\t\t\t\tvar _usingCtx4 = (0, import_usingCtx.default)();\n\t\t\t\t\t\tconst result = await runProcedure(inputWithTrackedEventId(op.input, lastEventId));\n\t\t\t\t\t\tif (!isAsyncIterable(result)) throw new Error(\"Expected an async iterable\");\n\t\t\t\t\t\tconst iterator = _usingCtx4.a(iteratorResource(result));\n\t\t\t\t\t\tobserver.next({ result: { type: \"started\" } });\n\t\t\t\t\t\tconnectionState.next({\n\t\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\t\tstate: \"pending\",\n\t\t\t\t\t\t\terror: null\n\t\t\t\t\t\t});\n\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\tlet res;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tres = await Promise.race([iterator.next(), signalPromise]);\n\t\t\t\t\t\t\t} catch (cause) {\n\t\t\t\t\t\t\t\tif (isAbortError(cause)) return;\n\t\t\t\t\t\t\t\tconst error = getTRPCErrorFromUnknown(cause);\n\t\t\t\t\t\t\t\tif (!retryableRpcCodes.includes(TRPC_ERROR_CODES_BY_KEY[error.code])) throw coerceToTRPCClientError(error);\n\t\t\t\t\t\t\t\tonErrorCallback(error);\n\t\t\t\t\t\t\t\tconnectionState.next({\n\t\t\t\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\t\t\t\tstate: \"connecting\",\n\t\t\t\t\t\t\t\t\terror: coerceToTRPCClientError(error)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (res.done) return;\n\t\t\t\t\t\t\tlet chunk;\n\t\t\t\t\t\t\tif (isTrackedEnvelope(res.value)) {\n\t\t\t\t\t\t\t\tlastEventId = res.value[0];\n\t\t\t\t\t\t\t\tchunk = {\n\t\t\t\t\t\t\t\t\tid: res.value[0],\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tid: res.value[0],\n\t\t\t\t\t\t\t\t\t\tdata: res.value[1]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else chunk = { data: res.value };\n\t\t\t\t\t\t\tobserver.next({ result: (0, import_objectSpread2.default)((0, import_objectSpread2.default)({}, chunk), {}, { data: transformChunk(chunk.data) }) });\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (_) {\n\t\t\t\t\t\t_usingCtx4.e = _;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tawait _usingCtx4.d();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t} catch (_) {\n\t\t\t\t\t_usingCtx3.e = _;\n\t\t\t\t} finally {\n\t\t\t\t\t_usingCtx3.d();\n\t\t\t\t}\n\t\t\t}\n\t\t}).catch((cause) => {\n\t\t\tonErrorCallback(cause);\n\t\t\tobserver.error(coerceToTRPCClientError(cause));\n\t\t});\n\t\treturn () => {\n\t\t\tac.abort();\n\t\t};\n\t});\n}\n/**\n* @deprecated Renamed to `unstable_localLink`. This alias will be removed in a future major release.\n*/\nconst experimental_localLink = unstable_localLink;\n\n//#endregion\nexport { TRPCClientError, TRPCUntypedClient, clientCallTypeToProcedureType, createTRPCClient, createTRPCClientProxy, createTRPCClient as createTRPCProxyClient, createTRPCUntypedClient, createWSClient, experimental_localLink, getFetch, getUntypedClient, httpBatchLink, httpBatchStreamLink, httpLink, httpSubscriptionLink, isFormData, isNonJsonSerializable, isOctetType, isTRPCClientError, loggerLink, retryLink, splitLink, unstable_httpBatchStreamLink, unstable_httpSubscriptionLink, unstable_localLink, wsLink };\n//# sourceMappingURL=index.mjs.map","export class DoubleIndexedKV {\n    constructor() {\n        this.keyToValue = new Map();\n        this.valueToKey = new Map();\n    }\n    set(key, value) {\n        this.keyToValue.set(key, value);\n        this.valueToKey.set(value, key);\n    }\n    getByKey(key) {\n        return this.keyToValue.get(key);\n    }\n    getByValue(value) {\n        return this.valueToKey.get(value);\n    }\n    clear() {\n        this.keyToValue.clear();\n        this.valueToKey.clear();\n    }\n}\n//# sourceMappingURL=double-indexed-kv.js.map","import { DoubleIndexedKV } from './double-indexed-kv.js';\nexport class Registry {\n    constructor(generateIdentifier) {\n        this.generateIdentifier = generateIdentifier;\n        this.kv = new DoubleIndexedKV();\n    }\n    register(value, identifier) {\n        if (this.kv.getByValue(value)) {\n            return;\n        }\n        if (!identifier) {\n            identifier = this.generateIdentifier(value);\n        }\n        this.kv.set(identifier, value);\n    }\n    clear() {\n        this.kv.clear();\n    }\n    getIdentifier(value) {\n        return this.kv.getByValue(value);\n    }\n    getValue(identifier) {\n        return this.kv.getByKey(identifier);\n    }\n}\n//# sourceMappingURL=registry.js.map","import { Registry } from './registry.js';\nexport class ClassRegistry extends Registry {\n    constructor() {\n        super(c => c.name);\n        this.classToAllowedProps = new Map();\n    }\n    register(value, options) {\n        if (typeof options === 'object') {\n            if (options.allowProps) {\n                this.classToAllowedProps.set(value, options.allowProps);\n            }\n            super.register(value, options.identifier);\n        }\n        else {\n            super.register(value, options);\n        }\n    }\n    getAllowedProps(value) {\n        return this.classToAllowedProps.get(value);\n    }\n}\n//# sourceMappingURL=class-registry.js.map","function valuesOfObj(record) {\n    if ('values' in Object) {\n        // eslint-disable-next-line es5/no-es6-methods\n        return Object.values(record);\n    }\n    const values = [];\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in record) {\n        if (record.hasOwnProperty(key)) {\n            values.push(record[key]);\n        }\n    }\n    return values;\n}\nexport function find(record, predicate) {\n    const values = valuesOfObj(record);\n    if ('find' in values) {\n        // eslint-disable-next-line es5/no-es6-methods\n        return values.find(predicate);\n    }\n    const valuesNotNever = values;\n    for (let i = 0; i < valuesNotNever.length; i++) {\n        const value = valuesNotNever[i];\n        if (predicate(value)) {\n            return value;\n        }\n    }\n    return undefined;\n}\nexport function forEach(record, run) {\n    Object.entries(record).forEach(([key, value]) => run(value, key));\n}\nexport function includes(arr, value) {\n    return arr.indexOf(value) !== -1;\n}\nexport function findArr(record, predicate) {\n    for (let i = 0; i < record.length; i++) {\n        const value = record[i];\n        if (predicate(value)) {\n            return value;\n        }\n    }\n    return undefined;\n}\n//# sourceMappingURL=util.js.map","import { find } from './util.js';\nexport class CustomTransformerRegistry {\n    constructor() {\n        this.transfomers = {};\n    }\n    register(transformer) {\n        this.transfomers[transformer.name] = transformer;\n    }\n    findApplicable(v) {\n        return find(this.transfomers, transformer => transformer.isApplicable(v));\n    }\n    findByName(name) {\n        return this.transfomers[name];\n    }\n}\n//# sourceMappingURL=custom-transformer-registry.js.map","const getType = (payload) => Object.prototype.toString.call(payload).slice(8, -1);\nexport const isUndefined = (payload) => typeof payload === 'undefined';\nexport const isNull = (payload) => payload === null;\nexport const isPlainObject = (payload) => {\n    if (typeof payload !== 'object' || payload === null)\n        return false;\n    if (payload === Object.prototype)\n        return false;\n    if (Object.getPrototypeOf(payload) === null)\n        return true;\n    return Object.getPrototypeOf(payload) === Object.prototype;\n};\nexport const isEmptyObject = (payload) => isPlainObject(payload) && Object.keys(payload).length === 0;\nexport const isArray = (payload) => Array.isArray(payload);\nexport const isString = (payload) => typeof payload === 'string';\nexport const isNumber = (payload) => typeof payload === 'number' && !isNaN(payload);\nexport const isBoolean = (payload) => typeof payload === 'boolean';\nexport const isRegExp = (payload) => payload instanceof RegExp;\nexport const isMap = (payload) => payload instanceof Map;\nexport const isSet = (payload) => payload instanceof Set;\nexport const isSymbol = (payload) => getType(payload) === 'Symbol';\nexport const isDate = (payload) => payload instanceof Date && !isNaN(payload.valueOf());\nexport const isError = (payload) => payload instanceof Error;\nexport const isNaNValue = (payload) => typeof payload === 'number' && isNaN(payload);\nexport const isPrimitive = (payload) => isBoolean(payload) ||\n    isNull(payload) ||\n    isUndefined(payload) ||\n    isNumber(payload) ||\n    isString(payload) ||\n    isSymbol(payload);\nexport const isBigint = (payload) => typeof payload === 'bigint';\nexport const isInfinite = (payload) => payload === Infinity || payload === -Infinity;\nexport const isTypedArray = (payload) => ArrayBuffer.isView(payload) && !(payload instanceof DataView);\nexport const isURL = (payload) => payload instanceof URL;\n//# sourceMappingURL=is.js.map","export const escapeKey = (key) => key.replace(/\\./g, '\\\\.');\nexport const stringifyPath = (path) => path\n    .map(String)\n    .map(escapeKey)\n    .join('.');\nexport const parsePath = (string) => {\n    const result = [];\n    let segment = '';\n    for (let i = 0; i < string.length; i++) {\n        let char = string.charAt(i);\n        const isEscapedDot = char === '\\\\' && string.charAt(i + 1) === '.';\n        if (isEscapedDot) {\n            segment += '.';\n            i++;\n            continue;\n        }\n        const isEndOfSegment = char === '.';\n        if (isEndOfSegment) {\n            result.push(segment);\n            segment = '';\n            continue;\n        }\n        segment += char;\n    }\n    const lastSegment = segment;\n    result.push(lastSegment);\n    return result;\n};\n//# sourceMappingURL=pathstringifier.js.map","import { isBigint, isDate, isInfinite, isMap, isNaNValue, isRegExp, isSet, isUndefined, isSymbol, isArray, isError, isTypedArray, isURL, } from './is.js';\nimport { findArr } from './util.js';\nfunction simpleTransformation(isApplicable, annotation, transform, untransform) {\n    return {\n        isApplicable,\n        annotation,\n        transform,\n        untransform,\n    };\n}\nconst simpleRules = [\n    simpleTransformation(isUndefined, 'undefined', () => null, () => undefined),\n    simpleTransformation(isBigint, 'bigint', v => v.toString(), v => {\n        if (typeof BigInt !== 'undefined') {\n            return BigInt(v);\n        }\n        console.error('Please add a BigInt polyfill.');\n        return v;\n    }),\n    simpleTransformation(isDate, 'Date', v => v.toISOString(), v => new Date(v)),\n    simpleTransformation(isError, 'Error', (v, superJson) => {\n        const baseError = {\n            name: v.name,\n            message: v.message,\n        };\n        superJson.allowedErrorProps.forEach(prop => {\n            baseError[prop] = v[prop];\n        });\n        return baseError;\n    }, (v, superJson) => {\n        const e = new Error(v.message);\n        e.name = v.name;\n        e.stack = v.stack;\n        superJson.allowedErrorProps.forEach(prop => {\n            e[prop] = v[prop];\n        });\n        return e;\n    }),\n    simpleTransformation(isRegExp, 'regexp', v => '' + v, regex => {\n        const body = regex.slice(1, regex.lastIndexOf('/'));\n        const flags = regex.slice(regex.lastIndexOf('/') + 1);\n        return new RegExp(body, flags);\n    }),\n    simpleTransformation(isSet, 'set', \n    // (sets only exist in es6+)\n    // eslint-disable-next-line es5/no-es6-methods\n    v => [...v.values()], v => new Set(v)),\n    simpleTransformation(isMap, 'map', v => [...v.entries()], v => new Map(v)),\n    simpleTransformation((v) => isNaNValue(v) || isInfinite(v), 'number', v => {\n        if (isNaNValue(v)) {\n            return 'NaN';\n        }\n        if (v > 0) {\n            return 'Infinity';\n        }\n        else {\n            return '-Infinity';\n        }\n    }, Number),\n    simpleTransformation((v) => v === 0 && 1 / v === -Infinity, 'number', () => {\n        return '-0';\n    }, Number),\n    simpleTransformation(isURL, 'URL', v => v.toString(), v => new URL(v)),\n];\nfunction compositeTransformation(isApplicable, annotation, transform, untransform) {\n    return {\n        isApplicable,\n        annotation,\n        transform,\n        untransform,\n    };\n}\nconst symbolRule = compositeTransformation((s, superJson) => {\n    if (isSymbol(s)) {\n        const isRegistered = !!superJson.symbolRegistry.getIdentifier(s);\n        return isRegistered;\n    }\n    return false;\n}, (s, superJson) => {\n    const identifier = superJson.symbolRegistry.getIdentifier(s);\n    return ['symbol', identifier];\n}, v => v.description, (_, a, superJson) => {\n    const value = superJson.symbolRegistry.getValue(a[1]);\n    if (!value) {\n        throw new Error('Trying to deserialize unknown symbol');\n    }\n    return value;\n});\nconst constructorToName = [\n    Int8Array,\n    Uint8Array,\n    Int16Array,\n    Uint16Array,\n    Int32Array,\n    Uint32Array,\n    Float32Array,\n    Float64Array,\n    Uint8ClampedArray,\n].reduce((obj, ctor) => {\n    obj[ctor.name] = ctor;\n    return obj;\n}, {});\nconst typedArrayRule = compositeTransformation(isTypedArray, v => ['typed-array', v.constructor.name], v => [...v], (v, a) => {\n    const ctor = constructorToName[a[1]];\n    if (!ctor) {\n        throw new Error('Trying to deserialize unknown typed array');\n    }\n    return new ctor(v);\n});\nexport function isInstanceOfRegisteredClass(potentialClass, superJson) {\n    if (potentialClass?.constructor) {\n        const isRegistered = !!superJson.classRegistry.getIdentifier(potentialClass.constructor);\n        return isRegistered;\n    }\n    return false;\n}\nconst classRule = compositeTransformation(isInstanceOfRegisteredClass, (clazz, superJson) => {\n    const identifier = superJson.classRegistry.getIdentifier(clazz.constructor);\n    return ['class', identifier];\n}, (clazz, superJson) => {\n    const allowedProps = superJson.classRegistry.getAllowedProps(clazz.constructor);\n    if (!allowedProps) {\n        return { ...clazz };\n    }\n    const result = {};\n    allowedProps.forEach(prop => {\n        result[prop] = clazz[prop];\n    });\n    return result;\n}, (v, a, superJson) => {\n    const clazz = superJson.classRegistry.getValue(a[1]);\n    if (!clazz) {\n        throw new Error(`Trying to deserialize unknown class '${a[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);\n    }\n    return Object.assign(Object.create(clazz.prototype), v);\n});\nconst customRule = compositeTransformation((value, superJson) => {\n    return !!superJson.customTransformerRegistry.findApplicable(value);\n}, (value, superJson) => {\n    const transformer = superJson.customTransformerRegistry.findApplicable(value);\n    return ['custom', transformer.name];\n}, (value, superJson) => {\n    const transformer = superJson.customTransformerRegistry.findApplicable(value);\n    return transformer.serialize(value);\n}, (v, a, superJson) => {\n    const transformer = superJson.customTransformerRegistry.findByName(a[1]);\n    if (!transformer) {\n        throw new Error('Trying to deserialize unknown custom value');\n    }\n    return transformer.deserialize(v);\n});\nconst compositeRules = [classRule, symbolRule, customRule, typedArrayRule];\nexport const transformValue = (value, superJson) => {\n    const applicableCompositeRule = findArr(compositeRules, rule => rule.isApplicable(value, superJson));\n    if (applicableCompositeRule) {\n        return {\n            value: applicableCompositeRule.transform(value, superJson),\n            type: applicableCompositeRule.annotation(value, superJson),\n        };\n    }\n    const applicableSimpleRule = findArr(simpleRules, rule => rule.isApplicable(value, superJson));\n    if (applicableSimpleRule) {\n        return {\n            value: applicableSimpleRule.transform(value, superJson),\n            type: applicableSimpleRule.annotation,\n        };\n    }\n    return undefined;\n};\nconst simpleRulesByAnnotation = {};\nsimpleRules.forEach(rule => {\n    simpleRulesByAnnotation[rule.annotation] = rule;\n});\nexport const untransformValue = (json, type, superJson) => {\n    if (isArray(type)) {\n        switch (type[0]) {\n            case 'symbol':\n                return symbolRule.untransform(json, type, superJson);\n            case 'class':\n                return classRule.untransform(json, type, superJson);\n            case 'custom':\n                return customRule.untransform(json, type, superJson);\n            case 'typed-array':\n                return typedArrayRule.untransform(json, type, superJson);\n            default:\n                throw new Error('Unknown transformation: ' + type);\n        }\n    }\n    else {\n        const transformation = simpleRulesByAnnotation[type];\n        if (!transformation) {\n            throw new Error('Unknown transformation: ' + type);\n        }\n        return transformation.untransform(json, superJson);\n    }\n};\n//# sourceMappingURL=transformer.js.map","import { isMap, isArray, isPlainObject, isSet } from './is.js';\nimport { includes } from './util.js';\nconst getNthKey = (value, n) => {\n    if (n > value.size)\n        throw new Error('index out of bounds');\n    const keys = value.keys();\n    while (n > 0) {\n        keys.next();\n        n--;\n    }\n    return keys.next().value;\n};\nfunction validatePath(path) {\n    if (includes(path, '__proto__')) {\n        throw new Error('__proto__ is not allowed as a property');\n    }\n    if (includes(path, 'prototype')) {\n        throw new Error('prototype is not allowed as a property');\n    }\n    if (includes(path, 'constructor')) {\n        throw new Error('constructor is not allowed as a property');\n    }\n}\nexport const getDeep = (object, path) => {\n    validatePath(path);\n    for (let i = 0; i < path.length; i++) {\n        const key = path[i];\n        if (isSet(object)) {\n            object = getNthKey(object, +key);\n        }\n        else if (isMap(object)) {\n            const row = +key;\n            const type = +path[++i] === 0 ? 'key' : 'value';\n            const keyOfRow = getNthKey(object, row);\n            switch (type) {\n                case 'key':\n                    object = keyOfRow;\n                    break;\n                case 'value':\n                    object = object.get(keyOfRow);\n                    break;\n            }\n        }\n        else {\n            object = object[key];\n        }\n    }\n    return object;\n};\nexport const setDeep = (object, path, mapper) => {\n    validatePath(path);\n    if (path.length === 0) {\n        return mapper(object);\n    }\n    let parent = object;\n    for (let i = 0; i < path.length - 1; i++) {\n        const key = path[i];\n        if (isArray(parent)) {\n            const index = +key;\n            parent = parent[index];\n        }\n        else if (isPlainObject(parent)) {\n            parent = parent[key];\n        }\n        else if (isSet(parent)) {\n            const row = +key;\n            parent = getNthKey(parent, row);\n        }\n        else if (isMap(parent)) {\n            const isEnd = i === path.length - 2;\n            if (isEnd) {\n                break;\n            }\n            const row = +key;\n            const type = +path[++i] === 0 ? 'key' : 'value';\n            const keyOfRow = getNthKey(parent, row);\n            switch (type) {\n                case 'key':\n                    parent = keyOfRow;\n                    break;\n                case 'value':\n                    parent = parent.get(keyOfRow);\n                    break;\n            }\n        }\n    }\n    const lastKey = path[path.length - 1];\n    if (isArray(parent)) {\n        parent[+lastKey] = mapper(parent[+lastKey]);\n    }\n    else if (isPlainObject(parent)) {\n        parent[lastKey] = mapper(parent[lastKey]);\n    }\n    if (isSet(parent)) {\n        const oldValue = getNthKey(parent, +lastKey);\n        const newValue = mapper(oldValue);\n        if (oldValue !== newValue) {\n            parent.delete(oldValue);\n            parent.add(newValue);\n        }\n    }\n    if (isMap(parent)) {\n        const row = +path[path.length - 2];\n        const keyToRow = getNthKey(parent, row);\n        const type = +lastKey === 0 ? 'key' : 'value';\n        switch (type) {\n            case 'key': {\n                const newKey = mapper(keyToRow);\n                parent.set(newKey, parent.get(keyToRow));\n                if (newKey !== keyToRow) {\n                    parent.delete(keyToRow);\n                }\n                break;\n            }\n            case 'value': {\n                parent.set(keyToRow, mapper(parent.get(keyToRow)));\n                break;\n            }\n        }\n    }\n    return object;\n};\n//# sourceMappingURL=accessDeep.js.map","import { isArray, isEmptyObject, isMap, isPlainObject, isPrimitive, isSet, } from './is.js';\nimport { escapeKey, stringifyPath } from './pathstringifier.js';\nimport { isInstanceOfRegisteredClass, transformValue, untransformValue, } from './transformer.js';\nimport { includes, forEach } from './util.js';\nimport { parsePath } from './pathstringifier.js';\nimport { getDeep, setDeep } from './accessDeep.js';\nfunction traverse(tree, walker, origin = []) {\n    if (!tree) {\n        return;\n    }\n    if (!isArray(tree)) {\n        forEach(tree, (subtree, key) => traverse(subtree, walker, [...origin, ...parsePath(key)]));\n        return;\n    }\n    const [nodeValue, children] = tree;\n    if (children) {\n        forEach(children, (child, key) => {\n            traverse(child, walker, [...origin, ...parsePath(key)]);\n        });\n    }\n    walker(nodeValue, origin);\n}\nexport function applyValueAnnotations(plain, annotations, superJson) {\n    traverse(annotations, (type, path) => {\n        plain = setDeep(plain, path, v => untransformValue(v, type, superJson));\n    });\n    return plain;\n}\nexport function applyReferentialEqualityAnnotations(plain, annotations) {\n    function apply(identicalPaths, path) {\n        const object = getDeep(plain, parsePath(path));\n        identicalPaths.map(parsePath).forEach(identicalObjectPath => {\n            plain = setDeep(plain, identicalObjectPath, () => object);\n        });\n    }\n    if (isArray(annotations)) {\n        const [root, other] = annotations;\n        root.forEach(identicalPath => {\n            plain = setDeep(plain, parsePath(identicalPath), () => plain);\n        });\n        if (other) {\n            forEach(other, apply);\n        }\n    }\n    else {\n        forEach(annotations, apply);\n    }\n    return plain;\n}\nconst isDeep = (object, superJson) => isPlainObject(object) ||\n    isArray(object) ||\n    isMap(object) ||\n    isSet(object) ||\n    isInstanceOfRegisteredClass(object, superJson);\nfunction addIdentity(object, path, identities) {\n    const existingSet = identities.get(object);\n    if (existingSet) {\n        existingSet.push(path);\n    }\n    else {\n        identities.set(object, [path]);\n    }\n}\nexport function generateReferentialEqualityAnnotations(identitites, dedupe) {\n    const result = {};\n    let rootEqualityPaths = undefined;\n    identitites.forEach(paths => {\n        if (paths.length <= 1) {\n            return;\n        }\n        // if we're not deduping, all of these objects continue existing.\n        // putting the shortest path first makes it easier to parse for humans\n        // if we're deduping though, only the first entry will still exist, so we can't do this optimisation.\n        if (!dedupe) {\n            paths = paths\n                .map(path => path.map(String))\n                .sort((a, b) => a.length - b.length);\n        }\n        const [representativePath, ...identicalPaths] = paths;\n        if (representativePath.length === 0) {\n            rootEqualityPaths = identicalPaths.map(stringifyPath);\n        }\n        else {\n            result[stringifyPath(representativePath)] = identicalPaths.map(stringifyPath);\n        }\n    });\n    if (rootEqualityPaths) {\n        if (isEmptyObject(result)) {\n            return [rootEqualityPaths];\n        }\n        else {\n            return [rootEqualityPaths, result];\n        }\n    }\n    else {\n        return isEmptyObject(result) ? undefined : result;\n    }\n}\nexport const walker = (object, identities, superJson, dedupe, path = [], objectsInThisPath = [], seenObjects = new Map()) => {\n    const primitive = isPrimitive(object);\n    if (!primitive) {\n        addIdentity(object, path, identities);\n        const seen = seenObjects.get(object);\n        if (seen) {\n            // short-circuit result if we've seen this object before\n            return dedupe\n                ? {\n                    transformedValue: null,\n                }\n                : seen;\n        }\n    }\n    if (!isDeep(object, superJson)) {\n        const transformed = transformValue(object, superJson);\n        const result = transformed\n            ? {\n                transformedValue: transformed.value,\n                annotations: [transformed.type],\n            }\n            : {\n                transformedValue: object,\n            };\n        if (!primitive) {\n            seenObjects.set(object, result);\n        }\n        return result;\n    }\n    if (includes(objectsInThisPath, object)) {\n        // prevent circular references\n        return {\n            transformedValue: null,\n        };\n    }\n    const transformationResult = transformValue(object, superJson);\n    const transformed = transformationResult?.value ?? object;\n    const transformedValue = isArray(transformed) ? [] : {};\n    const innerAnnotations = {};\n    forEach(transformed, (value, index) => {\n        if (index === '__proto__' ||\n            index === 'constructor' ||\n            index === 'prototype') {\n            throw new Error(`Detected property ${index}. This is a prototype pollution risk, please remove it from your object.`);\n        }\n        const recursiveResult = walker(value, identities, superJson, dedupe, [...path, index], [...objectsInThisPath, object], seenObjects);\n        transformedValue[index] = recursiveResult.transformedValue;\n        if (isArray(recursiveResult.annotations)) {\n            innerAnnotations[index] = recursiveResult.annotations;\n        }\n        else if (isPlainObject(recursiveResult.annotations)) {\n            forEach(recursiveResult.annotations, (tree, key) => {\n                innerAnnotations[escapeKey(index) + '.' + key] = tree;\n            });\n        }\n    });\n    const result = isEmptyObject(innerAnnotations)\n        ? {\n            transformedValue,\n            annotations: !!transformationResult\n                ? [transformationResult.type]\n                : undefined,\n        }\n        : {\n            transformedValue,\n            annotations: !!transformationResult\n                ? [transformationResult.type, innerAnnotations]\n                : innerAnnotations,\n        };\n    if (!primitive) {\n        seenObjects.set(object, result);\n    }\n    return result;\n};\n//# sourceMappingURL=plainer.js.map","function getType(payload) {\n  return Object.prototype.toString.call(payload).slice(8, -1);\n}\n\nfunction isAnyObject(payload) {\n  return getType(payload) === \"Object\";\n}\n\nfunction isArray(payload) {\n  return getType(payload) === \"Array\";\n}\n\nfunction isBlob(payload) {\n  return getType(payload) === \"Blob\";\n}\n\nfunction isBoolean(payload) {\n  return getType(payload) === \"Boolean\";\n}\n\nfunction isDate(payload) {\n  return getType(payload) === \"Date\" && !isNaN(payload);\n}\n\nfunction isEmptyArray(payload) {\n  return isArray(payload) && payload.length === 0;\n}\n\nfunction isPlainObject(payload) {\n  if (getType(payload) !== \"Object\")\n    return false;\n  const prototype = Object.getPrototypeOf(payload);\n  return !!prototype && prototype.constructor === Object && prototype === Object.prototype;\n}\n\nfunction isEmptyObject(payload) {\n  return isPlainObject(payload) && Object.keys(payload).length === 0;\n}\n\nfunction isEmptyString(payload) {\n  return payload === \"\";\n}\n\nfunction isError(payload) {\n  return getType(payload) === \"Error\" || payload instanceof Error;\n}\n\nfunction isFile(payload) {\n  return getType(payload) === \"File\";\n}\n\nfunction isFullArray(payload) {\n  return isArray(payload) && payload.length > 0;\n}\n\nfunction isFullObject(payload) {\n  return isPlainObject(payload) && Object.keys(payload).length > 0;\n}\n\nfunction isString(payload) {\n  return getType(payload) === \"String\";\n}\n\nfunction isFullString(payload) {\n  return isString(payload) && payload !== \"\";\n}\n\nfunction isFunction(payload) {\n  return typeof payload === \"function\";\n}\n\nfunction isType(payload, type) {\n  if (!(type instanceof Function)) {\n    throw new TypeError(\"Type must be a function\");\n  }\n  if (!Object.prototype.hasOwnProperty.call(type, \"prototype\")) {\n    throw new TypeError(\"Type is not a class\");\n  }\n  const name = type.name;\n  return getType(payload) === name || Boolean(payload && payload.constructor === type);\n}\n\nfunction isInstanceOf(value, classOrClassName) {\n  if (typeof classOrClassName === \"function\") {\n    for (let p = value; p; p = Object.getPrototypeOf(p)) {\n      if (isType(p, classOrClassName)) {\n        return true;\n      }\n    }\n    return false;\n  } else {\n    for (let p = value; p; p = Object.getPrototypeOf(p)) {\n      if (getType(p) === classOrClassName) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nfunction isMap(payload) {\n  return getType(payload) === \"Map\";\n}\n\nfunction isNaNValue(payload) {\n  return getType(payload) === \"Number\" && isNaN(payload);\n}\n\nfunction isNumber(payload) {\n  return getType(payload) === \"Number\" && !isNaN(payload);\n}\n\nfunction isNegativeNumber(payload) {\n  return isNumber(payload) && payload < 0;\n}\n\nfunction isNull(payload) {\n  return getType(payload) === \"Null\";\n}\n\nfunction isOneOf(a, b, c, d, e) {\n  return (value) => a(value) || b(value) || !!c && c(value) || !!d && d(value) || !!e && e(value);\n}\n\nfunction isUndefined(payload) {\n  return getType(payload) === \"Undefined\";\n}\n\nconst isNullOrUndefined = isOneOf(isNull, isUndefined);\n\nfunction isObject(payload) {\n  return isPlainObject(payload);\n}\n\nfunction isObjectLike(payload) {\n  return isAnyObject(payload);\n}\n\nfunction isPositiveNumber(payload) {\n  return isNumber(payload) && payload > 0;\n}\n\nfunction isSymbol(payload) {\n  return getType(payload) === \"Symbol\";\n}\n\nfunction isPrimitive(payload) {\n  return isBoolean(payload) || isNull(payload) || isUndefined(payload) || isNumber(payload) || isString(payload) || isSymbol(payload);\n}\n\nfunction isPromise(payload) {\n  return getType(payload) === \"Promise\";\n}\n\nfunction isRegExp(payload) {\n  return getType(payload) === \"RegExp\";\n}\n\nfunction isSet(payload) {\n  return getType(payload) === \"Set\";\n}\n\nfunction isWeakMap(payload) {\n  return getType(payload) === \"WeakMap\";\n}\n\nfunction isWeakSet(payload) {\n  return getType(payload) === \"WeakSet\";\n}\n\nexport { getType, isAnyObject, isArray, isBlob, isBoolean, isDate, isEmptyArray, isEmptyObject, isEmptyString, isError, isFile, isFullArray, isFullObject, isFullString, isFunction, isInstanceOf, isMap, isNaNValue, isNegativeNumber, isNull, isNullOrUndefined, isNumber, isObject, isObjectLike, isOneOf, isPlainObject, isPositiveNumber, isPrimitive, isPromise, isRegExp, isSet, isString, isSymbol, isType, isUndefined, isWeakMap, isWeakSet };\n","import { isArray, isPlainObject } from 'is-what';\n\nfunction assignProp(carry, key, newVal, originalObject, includeNonenumerable) {\n  const propType = {}.propertyIsEnumerable.call(originalObject, key) ? \"enumerable\" : \"nonenumerable\";\n  if (propType === \"enumerable\")\n    carry[key] = newVal;\n  if (includeNonenumerable && propType === \"nonenumerable\") {\n    Object.defineProperty(carry, key, {\n      value: newVal,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n  }\n}\nfunction copy(target, options = {}) {\n  if (isArray(target)) {\n    return target.map((item) => copy(item, options));\n  }\n  if (!isPlainObject(target)) {\n    return target;\n  }\n  const props = Object.getOwnPropertyNames(target);\n  const symbols = Object.getOwnPropertySymbols(target);\n  return [...props, ...symbols].reduce((carry, key) => {\n    if (isArray(options.props) && !options.props.includes(key)) {\n      return carry;\n    }\n    const val = target[key];\n    const newVal = copy(val, options);\n    assignProp(carry, key, newVal, target, options.nonenumerable);\n    return carry;\n  }, {});\n}\n\nexport { copy };\n","import { ClassRegistry } from './class-registry.js';\nimport { Registry } from './registry.js';\nimport { CustomTransformerRegistry, } from './custom-transformer-registry.js';\nimport { applyReferentialEqualityAnnotations, applyValueAnnotations, generateReferentialEqualityAnnotations, walker, } from './plainer.js';\nimport { copy } from 'copy-anything';\nexport default class SuperJSON {\n    /**\n     * @param dedupeReferentialEqualities  If true, SuperJSON will make sure only one instance of referentially equal objects are serialized and the rest are replaced with `null`.\n     */\n    constructor({ dedupe = false, } = {}) {\n        this.classRegistry = new ClassRegistry();\n        this.symbolRegistry = new Registry(s => s.description ?? '');\n        this.customTransformerRegistry = new CustomTransformerRegistry();\n        this.allowedErrorProps = [];\n        this.dedupe = dedupe;\n    }\n    serialize(object) {\n        const identities = new Map();\n        const output = walker(object, identities, this, this.dedupe);\n        const res = {\n            json: output.transformedValue,\n        };\n        if (output.annotations) {\n            res.meta = {\n                ...res.meta,\n                values: output.annotations,\n            };\n        }\n        const equalityAnnotations = generateReferentialEqualityAnnotations(identities, this.dedupe);\n        if (equalityAnnotations) {\n            res.meta = {\n                ...res.meta,\n                referentialEqualities: equalityAnnotations,\n            };\n        }\n        return res;\n    }\n    deserialize(payload) {\n        const { json, meta } = payload;\n        let result = copy(json);\n        if (meta?.values) {\n            result = applyValueAnnotations(result, meta.values, this);\n        }\n        if (meta?.referentialEqualities) {\n            result = applyReferentialEqualityAnnotations(result, meta.referentialEqualities);\n        }\n        return result;\n    }\n    stringify(object) {\n        return JSON.stringify(this.serialize(object));\n    }\n    parse(string) {\n        return this.deserialize(JSON.parse(string));\n    }\n    registerClass(v, options) {\n        this.classRegistry.register(v, options);\n    }\n    registerSymbol(v, identifier) {\n        this.symbolRegistry.register(v, identifier);\n    }\n    registerCustom(transformer, name) {\n        this.customTransformerRegistry.register({\n            name,\n            ...transformer,\n        });\n    }\n    allowErrorProps(...props) {\n        this.allowedErrorProps.push(...props);\n    }\n}\nSuperJSON.defaultInstance = new SuperJSON();\nSuperJSON.serialize = SuperJSON.defaultInstance.serialize.bind(SuperJSON.defaultInstance);\nSuperJSON.deserialize = SuperJSON.defaultInstance.deserialize.bind(SuperJSON.defaultInstance);\nSuperJSON.stringify = SuperJSON.defaultInstance.stringify.bind(SuperJSON.defaultInstance);\nSuperJSON.parse = SuperJSON.defaultInstance.parse.bind(SuperJSON.defaultInstance);\nSuperJSON.registerClass = SuperJSON.defaultInstance.registerClass.bind(SuperJSON.defaultInstance);\nSuperJSON.registerSymbol = SuperJSON.defaultInstance.registerSymbol.bind(SuperJSON.defaultInstance);\nSuperJSON.registerCustom = SuperJSON.defaultInstance.registerCustom.bind(SuperJSON.defaultInstance);\nSuperJSON.allowErrorProps = SuperJSON.defaultInstance.allowErrorProps.bind(SuperJSON.defaultInstance);\nexport { SuperJSON };\nexport const serialize = SuperJSON.serialize;\nexport const deserialize = SuperJSON.deserialize;\nexport const stringify = SuperJSON.stringify;\nexport const parse = SuperJSON.parse;\nexport const registerClass = SuperJSON.registerClass;\nexport const registerCustom = SuperJSON.registerCustom;\nexport const registerSymbol = SuperJSON.registerSymbol;\nexport const allowErrorProps = SuperJSON.allowErrorProps;\n//# sourceMappingURL=index.js.map","import { createTRPCProxyClient, httpBatchLink } from \"@trpc/client\";\nimport superjson from \"superjson\";\n\nimport type { AppRouter } from \"@sassy/api\";\n\n/**\n * tRPC Client for Chrome Extension with Clerk Authentication\n *\n * This client properly integrates with Clerk's Chrome extension authentication\n * by using the global Clerk object instead of manually extracting tokens from storage\n */\n\n/**\n * Get the server URL based on environment\n */\nconst getServerUrl = (): string => {\n  let url: string;\n\n  // For development with ngrok - check both VITE_NGROK_URL and NEXTJS_URL\n  if (import.meta.env.VITE_NGROK_URL) {\n    url = `${import.meta.env.VITE_NGROK_URL}/api/trpc`;\n  } else if (import.meta.env.VITE_NEXTJS_URL) {\n    url = `${import.meta.env.VITE_NEXTJS_URL}/api/trpc`;\n  } else if (import.meta.env.DEV) {\n    // For development with localhost\n    url = \"http://localhost:3000/api/trpc\";\n  } else {\n    // For production\n    url = \"https://engagekit.io/api/trpc\";\n  }\n\n  console.log(\"tRPC Client: Connecting to server URL:\", url);\n  return url;\n};\n\n/**\n * Cached Clerk session token - set once when commenting starts\n */\nlet cachedClerkToken: string | null = null;\n\n/**\n * Set the cached Clerk token (called when starting commenting process)\n */\nexport const setCachedClerkToken = (token: string | null) => {\n  cachedClerkToken = token;\n  console.log(\"tRPC Client: Cached token set, length:\", token?.length || 0);\n  if (token) {\n    console.log(\"tRPC Client: Cached token parts:\", token.split(\".\").length);\n    console.log(\n      \"tRPC Client: Cached token (first 50 chars):\",\n      token.substring(0, 50) + \"...\",\n    );\n  }\n};\n\n/**\n * Get Clerk session token - uses cached token for efficiency\n */\nconst getClerkToken = async (): Promise<string | null> => {\n  if (cachedClerkToken) {\n    console.log(\"tRPC Client: Using cached token\");\n    return cachedClerkToken;\n  } else {\n    console.warn(\"tRPC Client: No cached token available\");\n    return null;\n  }\n};\n\n/**\n * Create tRPC client instance\n */\nexport const createExtensionTRPCClient = () => {\n  return createTRPCProxyClient<AppRouter>({\n    links: [\n      httpBatchLink({\n        url: getServerUrl(),\n        transformer: superjson,\n        async headers() {\n          const clerkToken = await getClerkToken();\n          const headers: Record<string, string> = {\n            \"x-trpc-source\": \"chrome-extension\",\n            // Add ngrok headers to bypass browser warning page\n            \"ngrok-skip-browser-warning\": \"true\",\n            \"Content-Type\": \"application/json\",\n          };\n\n          if (clerkToken) {\n            headers.Authorization = `Bearer ${clerkToken}`;\n            console.log(\n              \"tRPC Client: Adding Authorization header with session token\",\n            );\n          } else {\n            console.warn(\n              \"tRPC Client: No token available - request will be unauthenticated\",\n            );\n          }\n\n          console.log(\"tRPC Client: Headers being sent:\", headers);\n          return headers;\n        },\n        // Handle network timeouts\n        fetch: async (input, init) => {\n          const controller = new AbortController();\n          const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout\n\n          try {\n            const response = await fetch(input, {\n              ...init,\n              signal: controller.signal,\n            });\n            clearTimeout(timeoutId);\n            return response;\n          } catch (error) {\n            clearTimeout(timeoutId);\n            throw error;\n          }\n        },\n      }),\n    ],\n  });\n};\n\n/**\n * Singleton instance of the tRPC client\n */\nlet trpcClient: ReturnType<typeof createExtensionTRPCClient> | null = null;\n\n/**\n * Get or create the tRPC client instance\n */\nexport const getTRPCClient = () => {\n  if (!trpcClient) {\n    trpcClient = createExtensionTRPCClient();\n  }\n  return trpcClient;\n};\n\n/**\n * Reset the tRPC client (useful for auth state changes)\n */\nexport const resetTRPCClient = () => {\n  trpcClient = null;\n};\n","import { createExtensionTRPCClient } from \"./trpc-client\";\n\n/**\n * AI Service for Chrome Extension\n *\n * Uses tRPC client to communicate with server-side AI comment generation\n * Replaces the local AICommentGenerator with server-side API calls\n */\n\nexport interface AICommentConfig {\n  apiKey?: string; // Not needed anymore but kept for compatibility\n  styleGuide: string;\n}\n\nexport class AIService {\n  private trpcClient = createExtensionTRPCClient();\n\n  /**\n   * Generate AI comment using server-side tRPC API\n   * @param postContent The LinkedIn post content to comment on\n   * @param config Configuration including style guide\n   * @returns Generated comment string\n   */\n  async generateComment(\n    postContent: string,\n    config: AICommentConfig,\n  ): Promise<string> {\n    console.log(\" AIService.generateComment() called - using tRPC API\");\n    console.log(\" Server URL will be determined by tRPC client\");\n    console.log(\" Post content length:\", postContent.length);\n    console.log(\" Style guide length:\", config.styleGuide.length);\n\n    try {\n      console.log(\" Making tRPC call to server...\");\n\n      const result = await this.trpcClient.aiComments.generateComment.mutate({\n        postContent,\n        styleGuide: config.styleGuide,\n      });\n\n      console.log(\" tRPC call successful! Result:\", {\n        success: result.success,\n        fallback: result.fallback,\n        commentLength: result.comment.length,\n        error: result.error,\n      });\n\n      return result.comment;\n    } catch (error) {\n      console.error(\" tRPC call failed:\", error);\n      console.error(\" Error type:\", typeof error);\n      console.error(\n        \" Error message:\",\n        error instanceof Error ? error.message : String(error),\n      );\n      console.error(\n        \" Error stack:\",\n        error instanceof Error ? error.stack : \"No stack\",\n      );\n\n      // Return fallback comment on error\n      return \"Great post! Thanks for sharing your insights.\";\n    }\n  }\n}\n","import type {\n  CommentGeneratorError,\n  MessageHandler,\n  MessageRouterDependencies,\n} from \"./background-types\";\n\n/**\n * Message Router Service\n *\n * SERVICE CLASS - Handles message routing and processing\n * - Routes incoming messages to appropriate handlers\n * - Organizes all message handling logic in clean methods\n * - Manages async response patterns consistently\n * - Centralizes message validation and error handling\n */\n\nexport class MessageRouter {\n  private dependencies: MessageRouterDependencies;\n\n  constructor(dependencies: MessageRouterDependencies) {\n    this.dependencies = dependencies;\n  }\n\n  /**\n   * Main message handler that routes messages to appropriate handlers\n   */\n  handleMessage = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean | void => {\n    switch (request.action) {\n      case \"backgroundLog\":\n        return this.handleBackgroundLog(request, sender, sendResponse);\n      case \"startAutoCommenting\":\n        return this.handleStartAutoCommenting(request, sender, sendResponse);\n      case \"stopAutoCommenting\":\n        return this.handleStopAutoCommenting(request, sender, sendResponse);\n      case \"generateComment\":\n        return this.handleGenerateComment(request, sender, sendResponse);\n      case \"updateCommentCount\":\n        return this.handleUpdateCommentCount(request, sender, sendResponse);\n      case \"commentingCompleted\":\n        return this.handleCommentingCompleted(request, sender, sendResponse);\n      case \"moveToOriginalTab\":\n        return this.handleMoveToOriginalTab(request, sender, sendResponse);\n      case \"pageReady\":\n        return this.handlePageReady(request, sender, sendResponse);\n      default:\n        console.warn(\"MessageRouter: Unknown action:\", request.action);\n        sendResponse({ success: false, error: \"Unknown action\" });\n        return false;\n    }\n  };\n\n  private handleBackgroundLog = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean => {\n    // Handle logging from content script to background console\n    const timestamp = new Date().toLocaleTimeString();\n    const tabInfo = sender.tab ? `[Tab ${sender.tab.id}]` : \"[Unknown Tab]\";\n\n    switch (request.level) {\n      case \"error\":\n        console.error(`${timestamp} ${tabInfo} CONTENT:`, ...request.args);\n        break;\n      case \"warn\":\n        console.warn(`${timestamp} ${tabInfo} CONTENT:`, ...request.args);\n        break;\n      case \"group\":\n        console.group(`${timestamp} ${tabInfo} CONTENT:`, ...request.args);\n        break;\n      case \"groupEnd\":\n        console.groupEnd();\n        break;\n      default:\n        console.log(`${timestamp} ${tabInfo} CONTENT:`, ...request.args);\n        break;\n    }\n\n    sendResponse({ success: true });\n    return false;\n  };\n\n  private handleStartAutoCommenting = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean => {\n    console.log(\"MessageRouter: Received startAutoCommenting with settings:\", {\n      scrollDuration: request.scrollDuration,\n      commentDelay: request.commentDelay,\n      maxPosts: request.maxPosts,\n      duplicateWindow: request.duplicateWindow,\n      styleGuide: request.styleGuide?.substring(0, 50) + \"...\",\n      hasClerkToken: !!request.clerkToken,\n      tokenLength: request.clerkToken?.length || 0,\n    });\n\n    // Validate that we have a Clerk token\n    if (!request.clerkToken) {\n      console.error(\"MessageRouter: No Clerk token provided!\");\n      sendResponse({\n        success: false,\n        error: \"No authentication token provided\",\n      });\n      return false;\n    }\n\n    // Save the current settings to storage for persistence\n    const settingsToSave = {\n      styleGuide: request.styleGuide,\n      scrollDuration: request.scrollDuration,\n      commentDelay: request.commentDelay,\n      maxPosts: request.maxPosts,\n      duplicateWindow: request.duplicateWindow,\n    };\n\n    console.log(\"MessageRouter: Saving settings to storage:\", settingsToSave);\n    chrome.storage.local.set(settingsToSave);\n\n    this.dependencies.startAutoCommenting(\n      request.styleGuide,\n      request.clerkToken, // Pass token instead of API key\n      request.scrollDuration,\n      request.commentDelay,\n      request.maxPosts,\n      request.duplicateWindow,\n    );\n    sendResponse({ success: true });\n    return false;\n  };\n\n  private handleStopAutoCommenting = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean => {\n    console.log(\"MessageRouter: Received stopAutoCommenting request\");\n\n    // Stop the commenting process immediately\n    this.dependencies.autoCommentingState.isRunning = false;\n\n    // Send stop message to content script immediately\n    if (this.dependencies.autoCommentingState.feedTabId) {\n      chrome.tabs.sendMessage(this.dependencies.autoCommentingState.feedTabId, {\n        action: \"stopCommentingFlow\",\n      });\n\n      // Close the LinkedIn tab\n      //   chrome.tabs\n      //     .remove(this.dependencies.autoCommentingState.feedTabId)\n      //     .catch(() => {\n      //       // Tab might already be closed, that's okay\n      //     });\n    }\n\n    // Clear current run state from storage\n    chrome.storage.local.set({\n      isRunning: false,\n      currentCommentCount: 0,\n    });\n\n    // Reset comment count\n    this.dependencies.autoCommentingState.commentCount = 0;\n\n    // Clear original tab reference\n    this.dependencies.autoCommentingState.originalTabId = undefined;\n\n    this.dependencies.sendStatusUpdate(\n      \"Process stopped and LinkedIn tab closed\",\n      {\n        isRunning: false,\n      },\n    );\n    sendResponse({ success: true });\n    return false;\n  };\n\n  private handleGenerateComment = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean => {\n    // Handle comment generation requests from content script\n    console.log(\n      \"MessageRouter: Received comment generation request for content:\",\n      request.postContent?.substring(0, 100) + \"...\",\n    );\n\n    this.dependencies\n      .generateComment(request.postContent)\n      .then((comment) => {\n        console.log(\n          \"MessageRouter: Sending comment response:\",\n          comment.substring(0, 100) + \"...\",\n        );\n        sendResponse({ comment });\n      })\n      .catch((error) => {\n        console.error(\n          \"MessageRouter: Error in comment generation promise:\",\n          error,\n        );\n\n        // Create detailed error object for content script\n        const errorDetails: CommentGeneratorError = {\n          message: error instanceof Error ? error.message : String(error),\n          stack: error instanceof Error ? error.stack : undefined,\n          name: error instanceof Error ? error.name : \"Unknown\",\n          apiKey: this.dependencies.autoCommentingState.apiKey\n            ? \"Present\"\n            : \"Missing\",\n          styleGuide: this.dependencies.autoCommentingState.styleGuide\n            ? \"Present\"\n            : \"Missing\",\n          postContentLength: request.postContent\n            ? request.postContent.length\n            : 0,\n          timestamp: new Date().toISOString(),\n          type: \"comment_generation_error\",\n        };\n\n        // Send error details to content script\n        if (this.dependencies.autoCommentingState.feedTabId) {\n          chrome.tabs\n            .sendMessage(this.dependencies.autoCommentingState.feedTabId, {\n              action: \"ai_generation_error\",\n              error: errorDetails,\n            })\n            .catch((msgError) => {\n              console.error(\n                \"MessageRouter: Failed to send error to content script:\",\n                msgError,\n              );\n            });\n        }\n\n        console.error(\"MessageRouter: Sending fallback comment due to error\");\n        sendResponse({\n          comment: \"Great post! Thanks for sharing.\",\n          error: errorDetails,\n        });\n      });\n    return true; // Indicates we will send a response asynchronously\n  };\n\n  private handleUpdateCommentCount = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean => {\n    // Handle comment count updates from content script\n    this.dependencies.autoCommentingState.commentCount = request.count;\n    this.dependencies.sendStatusUpdate(\n      request.status || `Processed ${request.count} comments`,\n      {\n        commentCount: request.count,\n      },\n    );\n    sendResponse({ success: true });\n    return false;\n  };\n\n  private handleCommentingCompleted = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean => {\n    // Handle completion notification from content script\n    this.dependencies.autoCommentingState.isRunning = false;\n\n    // Close the LinkedIn tab when automation completes\n    if (this.dependencies.autoCommentingState.feedTabId) {\n      chrome.tabs\n        .remove(this.dependencies.autoCommentingState.feedTabId)\n        .catch(() => {\n          // Tab might already be closed, that's okay\n          console.log(\"LinkedIn tab was already closed or could not be closed\");\n        });\n    }\n\n    // Clear original tab reference\n    this.dependencies.autoCommentingState.originalTabId = undefined;\n\n    this.dependencies.sendStatusUpdate(\n      `Commenting completed! LinkedIn tab closed. Check the counts above for total comments posted.`,\n      { isRunning: false },\n    );\n    sendResponse({ success: true });\n    return false;\n  };\n\n  private handleMoveToOriginalTab = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean => {\n    // Handle request to move back to the original tab\n    console.log(\n      \"MessageRouter: Received request to move back to the original tab\",\n    );\n\n    if (this.dependencies.autoCommentingState.originalTabId) {\n      // Switch focus to the original tab\n      chrome.tabs\n        .update(this.dependencies.autoCommentingState.originalTabId, {\n          active: true,\n        })\n        .then(() => {\n          console.log(\n            ` Successfully focused original tab ID: ${this.dependencies.autoCommentingState.originalTabId}`,\n          );\n          sendResponse({ success: true });\n        });\n    }\n    return true; // Indicates we will send a response asynchronously\n  };\n\n  private handlePageReady = (\n    request: any,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response?: any) => void,\n  ): boolean => {\n    // Handle signal from content script that LinkedIn page is ready\n    console.log(\"Content script signaled page ready - showing start button\");\n    this.dependencies.sendStatusUpdate(\n      \"LinkedIn feed loaded. Showing start button...\",\n    );\n\n    if (\n      this.dependencies.autoCommentingState.feedTabId &&\n      this.dependencies.autoCommentingState.isRunning\n    ) {\n      chrome.tabs.sendMessage(this.dependencies.autoCommentingState.feedTabId, {\n        action: \"showStartButton\",\n      });\n      console.log(\"Start button should now be visible in the LinkedIn tab\");\n    }\n\n    sendResponse({ success: true });\n    return false;\n  };\n}\n","import type { AutoCommentingState } from \"./background-types\";\nimport { AIService } from \"../../services/ai-service\";\nimport { setCachedClerkToken } from \"../../services/trpc-client\";\nimport { MessageRouter } from \"./message-router\";\n\nconsole.log(\"background script loaded\");\n\nlet autoCommentingState: AutoCommentingState = {\n  isRunning: false,\n  styleGuide: \"\",\n  apiKey: \"\",\n  scrollDuration: 10,\n  commentDelay: 10,\n  maxPosts: 20,\n  duplicateWindow: 24,\n  commentCount: 0,\n};\n\n// Utility function to wait for a specified time\nconst waitBackground = (ms: number): Promise<void> => {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n};\n\n// Function to send status updates to popup\nconst sendStatusUpdate = (\n  status: string,\n  updates: Partial<AutoCommentingState> = {},\n) => {\n  try {\n    chrome.runtime.sendMessage({\n      action: \"statusUpdate\",\n      status,\n      commentCount: autoCommentingState.commentCount,\n      isRunning: autoCommentingState.isRunning,\n      ...updates,\n    });\n\n    // Also save state to storage for persistence\n    chrome.storage.local.set({\n      isRunning: autoCommentingState.isRunning,\n      currentCommentCount: autoCommentingState.commentCount,\n    });\n  } catch (error) {\n    console.error(\"Error sending status update:\", error);\n  }\n};\n\n// Function to update today's comment count\nconst updateTodayComments = (newCount: number) => {\n  const today = new Date().toDateString();\n  const storageKey = `comments_today_${today}`;\n\n  chrome.storage.local.get([storageKey], (result) => {\n    const currentTodayCount = result[storageKey] || 0;\n    const updatedTodayCount = currentTodayCount + newCount;\n    chrome.storage.local.set({ [storageKey]: updatedTodayCount });\n\n    // Send updated today total to popup\n    try {\n      chrome.runtime.sendMessage({\n        action: \"statusUpdate\",\n        newTodayTotal: updatedTodayCount,\n      });\n    } catch (error) {\n      console.error(\"Error sending today total update:\", error);\n    }\n  });\n};\n\n// Initialize services\nconst aiService = new AIService();\n\n// Function to generate comment using AI service\nconst generateCommentBackground = async (\n  postContent: string,\n): Promise<string> => {\n  return aiService.generateComment(postContent, {\n    apiKey: autoCommentingState.apiKey,\n    styleGuide: autoCommentingState.styleGuide,\n  });\n};\n\n// Main function to start auto-commenting with cached token\nconst startAutoCommenting = async (\n  styleGuide: string,\n  clerkToken: string,\n  scrollDuration: number,\n  commentDelay: number,\n  maxPosts: number,\n  duplicateWindow: number,\n): Promise<void> => {\n  try {\n    // Set the cached token for tRPC client (much more efficient!)\n    setCachedClerkToken(clerkToken);\n    console.log(\"Background: Cached Clerk token for tRPC client\");\n\n    // Reset and initialize state\n    autoCommentingState.styleGuide = styleGuide;\n    autoCommentingState.apiKey = \"\"; // No longer needed - using server-side auth\n    autoCommentingState.scrollDuration = scrollDuration;\n    autoCommentingState.commentDelay = commentDelay;\n    autoCommentingState.maxPosts = maxPosts;\n    autoCommentingState.duplicateWindow = duplicateWindow;\n    autoCommentingState.isRunning = true;\n    autoCommentingState.commentCount = 0;\n\n    console.log(`Starting LinkedIn auto-commenting process...`);\n    sendStatusUpdate(`Starting LinkedIn auto-commenting...`);\n\n    // Get the current active tab to remember as the original tab\n    const currentTabs = await chrome.tabs.query({\n      active: true,\n      currentWindow: true,\n    });\n    if (currentTabs.length > 0 && currentTabs[0]?.id) {\n      autoCommentingState.originalTabId = currentTabs[0].id;\n      console.log(\n        `Captured original tab ID: ${autoCommentingState.originalTabId}`,\n      );\n    }\n\n    let feedTab: chrome.tabs.Tab | undefined;\n\n    // Create LinkedIn tab in current window instead of new background window\n    console.log(\"Creating LinkedIn tab in current window...\");\n    sendStatusUpdate(\"Creating LinkedIn tab for automation...\");\n\n    feedTab = await chrome.tabs.create({\n      url: \"https://www.linkedin.com/feed/\",\n      active: true, // Start with focus so user can see it\n      pinned: true, // Pin the tab to provide exemption from throttling\n    });\n\n    if (!feedTab || !feedTab.id) {\n      throw new Error(\"Failed to create LinkedIn feed tab\");\n    }\n\n    autoCommentingState.feedTabId = feedTab.id;\n    console.log(`LinkedIn tab created with ID: ${feedTab.id}`);\n    console.log(`LinkedIn tab pinned status: ${feedTab.pinned}`);\n    sendStatusUpdate(\n      \"LinkedIn tab created successfully as pinned tab (anti-throttling)...\",\n    );\n\n    sendStatusUpdate(\"Waiting for LinkedIn page to load...\");\n\n    // Don't show start button immediately - wait for content script to signal ready\n    // The content script will send 'pageReady' when DOM is loaded and LinkedIn feed is ready\n    console.log(\"Waiting for content script to signal page ready...\");\n  } catch (error) {\n    console.error(\"Error in auto-commenting process:\", error);\n    autoCommentingState.isRunning = false;\n    // No need to cleanup background window since we're using tabs now\n    sendStatusUpdate(\"Error occurred during auto-commenting setup\", {\n      isRunning: false,\n    });\n  }\n};\n\n// Initialize message router with dependencies\nconst messageRouter = new MessageRouter({\n  autoCommentingState,\n  sendStatusUpdate,\n  updateTodayComments,\n  startAutoCommenting,\n  generateComment: generateCommentBackground,\n});\n\n// Message listener\nchrome.runtime.onMessage.addListener(messageRouter.handleMessage);\n\n// Handle LinkedIn tab being manually closed\nchrome.tabs.onRemoved.addListener((tabId) => {\n  if (autoCommentingState.feedTabId === tabId) {\n    console.log(\"LinkedIn tab was manually closed\");\n    autoCommentingState.feedTabId = undefined;\n\n    // Stop the automation if it's running\n    if (autoCommentingState.isRunning) {\n      autoCommentingState.isRunning = false;\n\n      // Clear current run state from storage\n      chrome.storage.local.set({\n        isRunning: false,\n        currentCommentCount: 0,\n      });\n\n      // Reset comment count\n      autoCommentingState.commentCount = 0;\n\n      // Clear original tab reference\n      autoCommentingState.originalTabId = undefined;\n\n      sendStatusUpdate(\"LinkedIn tab was closed - automation stopped\", {\n        isRunning: false,\n      });\n    }\n  }\n});\n\nconsole.log(\"EngageKit background script loaded\");\n"],"names":["__create","__defProp","__getOwnPropDesc","__getOwnPropNames","__getProtoOf","__hasOwnProp","__commonJS","cb","mod","__copyProps","to","from","except","desc","keys","i","n","key","k","__toESM","isNodeMode","target","require_typeof","exports","module","_typeof$2","o","o$1","require_toPrimitive","_typeof$1","toPrimitive$1","t","r","e","require_toPropertyKey","_typeof","toPrimitive","toPropertyKey$1","require_defineProperty","toPropertyKey","_defineProperty","require_objectSpread2","defineProperty","ownKeys","r$1","_objectSpread2","observable","subscribe","self","observer","teardownRef","isDone","unsubscribed","teardownImmediately","unsubscribe","value","_observer$next","err","_observer$error","_observer$complete","operations","pipeReducer","prev","fn","observableToPromise","observable$1","ac","resolve","reject","onDone","obs$","data","share","_opts","source","refCount","subscription","observers","startIfNeeded","error","resetIfNeeded","_sub","subscriber","index","v","behaviorSubject","initialValue","observerList","addObserver","removeObserver","obs","nextValue","createChain","opts","execute","op","next","nextOp","isObject","noop","freezeIfAvailable","obj","createInnerProxy","callback","path","memo","_memo$cacheKey","cacheKey","_obj","_1","_2","args","lastOfPath","createRecursiveProxy","createFlatProxy","name","import_objectSpread2$1","transformResultInner","response","transformer","TransformResultError","transformResult","result","import_defineProperty","import_objectSpread2","isTRPCClientError","cause","TRPCClientError","isTRPCErrorResponse","getMessageFromUnknownError","fallback","message","_opts$result","_opts$result2","_cause","getTransformer","_transformer","isFunction","getFetch","customFetchImpl","resolveHTTPLinkOptions","arrayToDict","array","dict","element","METHOD","getInput","_input","getUrl","parts","url","queryParts","input","getBody","jsonHttpRequester","httpRequest","AbortError","throwIfAborted","signal","_signal$throwIfAborte","fetchHTTPResponse","_opts$methodOverride","body","type","resolvedHeaders","heads","headers","meta","res","json","throwFatalError","dataLoader","batchLoader","pendingItems","dispatchTimer","destroyTimerAndPendingItems","groupItems","items","groupedItems","item","lastGroup","_item$reject","it","_item$reject2","dispatch","batch","_item","valueOrPromise","_item$resolve","_item$reject3","_item$reject4","_item$reject5","load","_dispatchTimer","promise","_pendingItems","allAbortSignals","signals","count","abortedCount","onAbort","httpBatchLink","_opts$maxURLLength","_opts$maxItems","resolvedOpts","maxURLLength","maxItems","batchOps","inputs","query","mutation","loaders","_res","transformed","resultOf","withResolvers","rej","prepareUrl","urlOptions","connectionParams","buildConnectionMessage","import_defineProperty$1","asyncWsOpen","ws","setupPingInterval","intervalMs","pongTimeoutMs","pingTimeout","pongTimeout","start","reset","pong","WsConnection","_opts$WebSocketPonyfi","_this","wsPromise","_this2","_this$ws","import_objectSpread2$4","TRPCUntypedClient","link","_opts$context","req$","envelope","_opts$onConnectionSta","_opts$onStarted","_opts$onStopped","_opts$onData","_opts$onError","_opts$onComplete","untypedClientSymbol","clientCallTypeMap","clientCallTypeToProcedureType","clientCallType","createTRPCClientProxy","client","proxy","pathCopy","procedureType","fullPath","createTRPCClient","require_asyncIterator","_asyncIterator$1","AsyncFromSyncIterator","AsyncFromSyncIteratorContinuation","r$2","require_usingCtx","_usingCtx","e$1","n$1","using","s","require_OverloadYield","_OverloadYield","d","require_awaitAsyncGenerator","OverloadYield$1","_awaitAsyncGenerator$1","require_wrapAsyncGenerator","OverloadYield","_wrapAsyncGenerator$1","AsyncGenerator","resume","t$1","u","t$2","settle","DoubleIndexedKV","Registry","generateIdentifier","identifier","ClassRegistry","c","options","valuesOfObj","record","values","find","predicate","valuesNotNever","forEach","run","includes","arr","findArr","CustomTransformerRegistry","getType","payload","isUndefined","isNull","isPlainObject","isEmptyObject","isArray","isString","isNumber","isBoolean","isRegExp","isMap","isSet","isSymbol","isDate","isError","isNaNValue","isPrimitive","isBigint","isInfinite","isTypedArray","isURL","escapeKey","stringifyPath","parsePath","string","segment","char","lastSegment","simpleTransformation","isApplicable","annotation","transform","untransform","simpleRules","superJson","baseError","prop","regex","flags","compositeTransformation","symbolRule","_","a","constructorToName","ctor","typedArrayRule","isInstanceOfRegisteredClass","potentialClass","classRule","clazz","allowedProps","customRule","compositeRules","transformValue","applicableCompositeRule","rule","applicableSimpleRule","simpleRulesByAnnotation","untransformValue","transformation","getNthKey","validatePath","getDeep","object","row","keyOfRow","setDeep","mapper","parent","lastKey","oldValue","newValue","keyToRow","newKey","traverse","tree","walker","origin","subtree","nodeValue","children","child","applyValueAnnotations","plain","annotations","applyReferentialEqualityAnnotations","apply","identicalPaths","identicalObjectPath","root","other","identicalPath","isDeep","addIdentity","identities","existingSet","generateReferentialEqualityAnnotations","identitites","dedupe","rootEqualityPaths","paths","b","representativePath","objectsInThisPath","seenObjects","primitive","seen","transformationResult","transformedValue","innerAnnotations","recursiveResult","prototype","assignProp","carry","newVal","originalObject","includeNonenumerable","propType","copy","props","symbols","val","SuperJSON","output","equalityAnnotations","getServerUrl","cachedClerkToken","setCachedClerkToken","token","getClerkToken","createExtensionTRPCClient","createTRPCProxyClient","superjson","clerkToken","init","controller","timeoutId","AIService","__publicField","postContent","config","MessageRouter","dependencies","request","sender","sendResponse","timestamp","tabInfo","_a","_b","settingsToSave","comment","errorDetails","msgError","autoCommentingState","sendStatusUpdate","status","updates","updateTodayComments","newCount","storageKey","updatedTodayCount","aiService","generateCommentBackground","startAutoCommenting","styleGuide","scrollDuration","commentDelay","maxPosts","duplicateWindow","currentTabs","feedTab","messageRouter","tabId"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]}