(function(){var u=Object.defineProperty;var m=(t,e,o)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var s=(t,e,o)=>m(t,typeof e!="symbol"?e+"":e,o);class h{constructor(){s(this,"audioContext",null);s(this,"currentOscillator",null);s(this,"audioElement",null)}start(){return new Promise((e,o)=>{try{console.log("ðŸŽµ Initializing Web Audio API for continuous sound...");const i=window.AudioContext||window.webkitAudioContext;if(!i)throw new Error("Web Audio API is not supported in this browser. Cannot play audio.");this.audioContext=new i;const n=this.audioContext.createOscillator(),a=this.audioContext.createGain(),l=this.audioContext.createMediaStreamDestination();n.connect(a),a.connect(l),n.type="sine";const g=261.63,y=523.25,c=1e4;n.frequency.setValueAtTime(c,this.audioContext.currentTime),a.gain.setValueAtTime(.001,this.audioContext.currentTime),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=l.stream,this.audioElement.autoplay=!0,this.audioElement.loop=!0,this.audioElement.controls=!1,this.audioElement.style.cssText="position: fixed; top: -9999px; opacity: 0;",document.body.appendChild(this.audioElement),(async()=>{this.audioContext.state==="suspended"&&await this.audioContext.resume(),n.start(),this.currentOscillator=n;const r=this.audioElement.play();r!==void 0?r.then(()=>{console.log(`âœ… Playing a ${n.type} wave at ${c.toFixed(2)} Hz. Audio element injected and playing.`),e()}).catch(d=>{console.warn("âŒ Autoplay was prevented by the browser:",d),o(d)}):(console.log("âœ… Audio started successfully (no promise returned)"),e())})()}catch(i){console.error("âŒ Audio setup failed:",i),o(i)}})}stop(){try{console.log("ðŸ”‡ Stopping continuous audio..."),this.currentOscillator&&(this.currentOscillator.stop(),this.currentOscillator=null),this.audioElement&&(this.audioElement.pause(),this.audioElement.remove(),this.audioElement=null),this.audioContext&&this.audioContext.state!=="closed"&&(this.audioContext.close(),this.audioContext=null),console.log("ðŸ”‡ Continuous audio stopped")}catch(e){console.warn("âš ï¸ Error stopping audio:",e)}}}const p=new h;document.readyState!=="loading"?(console.log("document is already ready, just execute code here"),chrome.runtime.sendMessage({action:"pageReady"})):document.addEventListener("DOMContentLoaded",function(){console.log("document was not ready, place code here"),chrome.runtime.sendMessage({action:"pageReady"})});chrome.runtime.onMessage.addListener((t,e,o)=>{t.action==="startCommentingFlow"?(console.log("Received start signal - starting commenting flow"),o({success:!0})):t.action==="stopCommentingFlow"?(console.log("Received stop signal - stopping commenting flow"),p.stop(),o({success:!0})):t.action});console.log("EngageKit content script loaded - Background Window Mode");
//# sourceMappingURL=index.tsx-wI8QTdav.js.map
})()
