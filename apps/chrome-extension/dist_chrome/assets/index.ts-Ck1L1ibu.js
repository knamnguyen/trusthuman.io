var Lo=Object.defineProperty;var Vo=(t,e,n)=>e in t?Lo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>Vo(t,typeof e!="symbol"?e+"":e,n);var L;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const l={};for(const a of s)l[a]=a;return l},t.getValidEnumValues=s=>{const l=t.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),a={};for(const u of l)a[u]=s[u];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(l){return s[l]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const l=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&l.push(a);return l},t.find=(s,l)=>{for(const a of s)if(l(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function o(s,l=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(l)}t.joinValues=o,t.jsonStringifyReplacer=(s,l)=>typeof l=="bigint"?l.toString():l})(L||(L={}));var xt;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(xt||(xt={}));const v=L.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ie=t=>{switch(typeof t){case"undefined":return v.undefined;case"string":return v.string;case"number":return Number.isNaN(t)?v.nan:v.number;case"boolean":return v.boolean;case"function":return v.function;case"bigint":return v.bigint;case"symbol":return v.symbol;case"object":return Array.isArray(t)?v.array:t===null?v.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?v.promise:typeof Map<"u"&&t instanceof Map?v.map:typeof Set<"u"&&t instanceof Set?v.set:typeof Date<"u"&&t instanceof Date?v.date:v.object;default:return v.unknown}},y=L.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class te extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(l){return l.message},o={_errors:[]},s=l=>{for(const a of l.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)o._errors.push(n(a));else{let u=o,d=0;for(;d<a.path.length;){const c=a.path[d];d===a.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(n(a))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return s(this),o}static assert(e){if(!(e instanceof te))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,L.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},o=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):o.push(e(s));return{formErrors:o,fieldErrors:n}}get formErrors(){return this.flatten()}}te.create=t=>new te(t);const tt=(t,e)=>{let n;switch(t.code){case y.invalid_type:t.received===v.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,L.jsonStringifyReplacer)}`;break;case y.unrecognized_keys:n=`Unrecognized key(s) in object: ${L.joinValues(t.keys,", ")}`;break;case y.invalid_union:n="Invalid input";break;case y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${L.joinValues(t.options)}`;break;case y.invalid_enum_value:n=`Invalid enum value. Expected ${L.joinValues(t.options)}, received '${t.received}'`;break;case y.invalid_arguments:n="Invalid function arguments";break;case y.invalid_return_type:n="Invalid function return type";break;case y.invalid_date:n="Invalid date";break;case y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:L.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case y.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case y.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case y.custom:n="Invalid input";break;case y.invalid_intersection_types:n="Intersection results could not be merged";break;case y.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case y.not_finite:n="Number must be finite";break;default:n=e.defaultError,L.assertNever(t)}return{message:n}};let Fo=tt;function Uo(){return Fo}const Go=t=>{const{data:e,path:n,errorMaps:o,issueData:s}=t,l=[...n,...s.path||[]],a={...s,path:l};if(s.message!==void 0)return{...s,path:l,message:s.message};let u="";const d=o.filter(c=>!!c).slice().reverse();for(const c of d)u=c(a,{data:e,defaultError:u}).message;return{...s,path:l,message:u}};function C(t,e){const n=Uo(),o=Go({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===tt?void 0:tt].filter(s=>!!s)});t.common.issues.push(o)}class H{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const o=[];for(const s of n){if(s.status==="aborted")return P;s.status==="dirty"&&e.dirty(),o.push(s.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,n){const o=[];for(const s of n){const l=await s.key,a=await s.value;o.push({key:l,value:a})}return H.mergeObjectSync(e,o)}static mergeObjectSync(e,n){const o={};for(const s of n){const{key:l,value:a}=s;if(l.status==="aborted"||a.status==="aborted")return P;l.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(o[l.value]=a.value)}return{status:e.value,value:o}}}const P=Object.freeze({status:"aborted"}),Re=t=>({status:"dirty",value:t}),Y=t=>({status:"valid",value:t}),Rt=t=>t.status==="aborted",Pt=t=>t.status==="dirty",Ce=t=>t.status==="valid",qe=t=>typeof Promise<"u"&&t instanceof Promise;var _;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_||(_={}));class j{constructor(e,n,o,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=o,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wt=(t,e)=>{if(Ce(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new te(t.common.issues);return this._error=n,this._error}}};function k(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:o,description:s}=t;if(e&&(n||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,u)=>{const{message:d}=t;return a.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??o??u.defaultError}:a.code!=="invalid_type"?{message:u.defaultError}:{message:d??n??u.defaultError}},description:s}}class D{get description(){return this._def.description}_getType(e){return ie(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new H,ctx:{common:e.parent.common,data:e.data,parsedType:ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(qe(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const o=this.safeParse(e,n);if(o.success)return o.data;throw o.error}safeParse(e,n){const o={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ie(e)},s=this._parseSync({data:e,path:o.path,parent:o});return wt(o,s)}"~validate"(e){var o,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ie(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:n});return Ce(l)?{value:l.value}:{issues:n.common.issues}}catch(l){(s=(o=l==null?void 0:l.message)==null?void 0:o.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(l=>Ce(l)?{value:l.value}:{issues:n.common.issues})}async parseAsync(e,n){const o=await this.safeParseAsync(e,n);if(o.success)return o.data;throw o.error}async safeParseAsync(e,n){const o={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ie(e)},s=this._parse({data:e,path:o.path,parent:o}),l=await(qe(s)?s:Promise.resolve(s));return wt(o,l)}refine(e,n){const o=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,l)=>{const a=e(s),u=()=>l.addIssue({code:y.custom,...o(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(d=>d?!0:(u(),!1)):a?!0:(u(),!1)})}refinement(e,n){return this._refinement((o,s)=>e(o)?!0:(s.addIssue(typeof n=="function"?n(o,s):n),!1))}_refinement(e){return new Se({schema:this,typeName:R.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return re.create(this,this._def)}nullable(){return Ee.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Q.create(this)}promise(){return He.create(this,this._def)}or(e){return $e.create([this,e],this._def)}and(e){return be.create(this,e,this._def)}transform(e){return new Se({...k(this._def),schema:this,typeName:R.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new rt({...k(this._def),innerType:this,defaultValue:n,typeName:R.ZodDefault})}brand(){return new li({typeName:R.ZodBranded,type:this,...k(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new st({...k(this._def),innerType:this,catchValue:n,typeName:R.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Ct.create(this,e)}readonly(){return lt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qo=/^c[^\s-]{8,}$/i,Bo=/^[0-9a-z]+$/,$o=/^[0-9A-HJKMNP-TV-Z]{26}$/i,bo=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jo=/^[a-z0-9_-]{21}$/i,Ho=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Wo=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ko=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Yo="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let je;const Zo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Oo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,zo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Xo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qo=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,jo=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,io="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ei=new RegExp(`^${io}$`);function ro(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function ti(t){return new RegExp(`^${ro(t)}$`)}function ni(t){let e=`${io}T${ro(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function oi(t,e){return!!((e==="v4"||!e)&&Zo.test(t)||(e==="v6"||!e)&&zo.test(t))}function ii(t,e){if(!Ho.test(t))return!1;try{const[n]=t.split("."),o=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(o));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function ri(t,e){return!!((e==="v4"||!e)&&Oo.test(t)||(e==="v6"||!e)&&Xo.test(t))}class z extends D{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==v.string){const l=this._getOrReturnCtx(e);return C(l,{code:y.invalid_type,expected:v.string,received:l.parsedType}),P}const o=new H;let s;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(s=this._getOrReturnCtx(e,s),C(s,{code:y.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if(l.kind==="max")e.data.length>l.value&&(s=this._getOrReturnCtx(e,s),C(s,{code:y.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if(l.kind==="length"){const a=e.data.length>l.value,u=e.data.length<l.value;(a||u)&&(s=this._getOrReturnCtx(e,s),a?C(s,{code:y.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):u&&C(s,{code:y.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if(l.kind==="email")Ko.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"email",code:y.invalid_string,message:l.message}),o.dirty());else if(l.kind==="emoji")je||(je=new RegExp(Yo,"u")),je.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"emoji",code:y.invalid_string,message:l.message}),o.dirty());else if(l.kind==="uuid")bo.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"uuid",code:y.invalid_string,message:l.message}),o.dirty());else if(l.kind==="nanoid")Jo.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"nanoid",code:y.invalid_string,message:l.message}),o.dirty());else if(l.kind==="cuid")qo.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"cuid",code:y.invalid_string,message:l.message}),o.dirty());else if(l.kind==="cuid2")Bo.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"cuid2",code:y.invalid_string,message:l.message}),o.dirty());else if(l.kind==="ulid")$o.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"ulid",code:y.invalid_string,message:l.message}),o.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),C(s,{validation:"url",code:y.invalid_string,message:l.message}),o.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"regex",code:y.invalid_string,message:l.message}),o.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(s=this._getOrReturnCtx(e,s),C(s,{code:y.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(s=this._getOrReturnCtx(e,s),C(s,{code:y.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(s=this._getOrReturnCtx(e,s),C(s,{code:y.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):l.kind==="datetime"?ni(l).test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{code:y.invalid_string,validation:"datetime",message:l.message}),o.dirty()):l.kind==="date"?ei.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{code:y.invalid_string,validation:"date",message:l.message}),o.dirty()):l.kind==="time"?ti(l).test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{code:y.invalid_string,validation:"time",message:l.message}),o.dirty()):l.kind==="duration"?Wo.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"duration",code:y.invalid_string,message:l.message}),o.dirty()):l.kind==="ip"?oi(e.data,l.version)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"ip",code:y.invalid_string,message:l.message}),o.dirty()):l.kind==="jwt"?ii(e.data,l.alg)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"jwt",code:y.invalid_string,message:l.message}),o.dirty()):l.kind==="cidr"?ri(e.data,l.version)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"cidr",code:y.invalid_string,message:l.message}),o.dirty()):l.kind==="base64"?Qo.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"base64",code:y.invalid_string,message:l.message}),o.dirty()):l.kind==="base64url"?jo.test(e.data)||(s=this._getOrReturnCtx(e,s),C(s,{validation:"base64url",code:y.invalid_string,message:l.message}),o.dirty()):L.assertNever(l);return{status:o.value,value:e.data}}_regex(e,n,o){return this.refinement(s=>e.test(s),{validation:n,code:y.invalid_string,..._.errToObj(o)})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,..._.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,..._.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,..._.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,..._.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,..._.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,..._.errToObj(n)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new z({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new z({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new z({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}z.create=t=>new z({checks:[],typeName:R.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...k(t)});function si(t,e){const n=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,s=n>o?n:o,l=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return l%a/10**s}class ue extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==v.number){const l=this._getOrReturnCtx(e);return C(l,{code:y.invalid_type,expected:v.number,received:l.parsedType}),P}let o;const s=new H;for(const l of this._def.checks)l.kind==="int"?L.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{code:y.invalid_type,expected:"integer",received:"float",message:l.message}),s.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="multipleOf"?si(e.data,l.value)!==0&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{code:y.not_finite,message:l.message}),s.dirty()):L.assertNever(l);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,_.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_.toString(n))}setLimit(e,n,o,s){return new ue({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:o,message:_.toString(s)}]})}_addCheck(e){return new ue({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&L.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(n===null||o.value>n)&&(n=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ue.create=t=>new ue({checks:[],typeName:R.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...k(t)});class ce extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==v.bigint)return this._getInvalidInput(e);let o;const s=new H;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):L.assertNever(l);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return C(n,{code:y.invalid_type,expected:v.bigint,received:n.parsedType}),P}gte(e,n){return this.setLimit("min",e,!0,_.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_.toString(n))}setLimit(e,n,o,s){return new ce({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:o,message:_.toString(s)}]})}_addCheck(e){return new ce({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ce.create=t=>new ce({checks:[],typeName:R.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...k(t)});class Be extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==v.boolean){const o=this._getOrReturnCtx(e);return C(o,{code:y.invalid_type,expected:v.boolean,received:o.parsedType}),P}return Y(e.data)}}Be.create=t=>new Be({typeName:R.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...k(t)});class ve extends D{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==v.date){const l=this._getOrReturnCtx(e);return C(l,{code:y.invalid_type,expected:v.date,received:l.parsedType}),P}if(Number.isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return C(l,{code:y.invalid_date}),P}const o=new H;let s;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(s=this._getOrReturnCtx(e,s),C(s,{code:y.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),o.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(s=this._getOrReturnCtx(e,s),C(s,{code:y.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),o.dirty()):L.assertNever(l);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ve({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ve.create=t=>new ve({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:R.ZodDate,...k(t)});class Nt extends D{_parse(e){if(this._getType(e)!==v.symbol){const o=this._getOrReturnCtx(e);return C(o,{code:y.invalid_type,expected:v.symbol,received:o.parsedType}),P}return Y(e.data)}}Nt.create=t=>new Nt({typeName:R.ZodSymbol,...k(t)});class kt extends D{_parse(e){if(this._getType(e)!==v.undefined){const o=this._getOrReturnCtx(e);return C(o,{code:y.invalid_type,expected:v.undefined,received:o.parsedType}),P}return Y(e.data)}}kt.create=t=>new kt({typeName:R.ZodUndefined,...k(t)});class Dt extends D{_parse(e){if(this._getType(e)!==v.null){const o=this._getOrReturnCtx(e);return C(o,{code:y.invalid_type,expected:v.null,received:o.parsedType}),P}return Y(e.data)}}Dt.create=t=>new Dt({typeName:R.ZodNull,...k(t)});class Lt extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return Y(e.data)}}Lt.create=t=>new Lt({typeName:R.ZodAny,...k(t)});class nt extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Y(e.data)}}nt.create=t=>new nt({typeName:R.ZodUnknown,...k(t)});class se extends D{_parse(e){const n=this._getOrReturnCtx(e);return C(n,{code:y.invalid_type,expected:v.never,received:n.parsedType}),P}}se.create=t=>new se({typeName:R.ZodNever,...k(t)});class Vt extends D{_parse(e){if(this._getType(e)!==v.undefined){const o=this._getOrReturnCtx(e);return C(o,{code:y.invalid_type,expected:v.void,received:o.parsedType}),P}return Y(e.data)}}Vt.create=t=>new Vt({typeName:R.ZodVoid,...k(t)});class Q extends D{_parse(e){const{ctx:n,status:o}=this._processInputParams(e),s=this._def;if(n.parsedType!==v.array)return C(n,{code:y.invalid_type,expected:v.array,received:n.parsedType}),P;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,u=n.data.length<s.exactLength.value;(a||u)&&(C(n,{code:a?y.too_big:y.too_small,minimum:u?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),o.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(C(n,{code:y.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),o.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(C(n,{code:y.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),o.dirty()),n.common.async)return Promise.all([...n.data].map((a,u)=>s.type._parseAsync(new j(n,a,n.path,u)))).then(a=>H.mergeArray(o,a));const l=[...n.data].map((a,u)=>s.type._parseSync(new j(n,a,n.path,u)));return H.mergeArray(o,l)}get element(){return this._def.type}min(e,n){return new Q({...this._def,minLength:{value:e,message:_.toString(n)}})}max(e,n){return new Q({...this._def,maxLength:{value:e,message:_.toString(n)}})}length(e,n){return new Q({...this._def,exactLength:{value:e,message:_.toString(n)}})}nonempty(e){return this.min(1,e)}}Q.create=(t,e)=>new Q({type:t,minLength:null,maxLength:null,exactLength:null,typeName:R.ZodArray,...k(e)});function he(t){if(t instanceof b){const e={};for(const n in t.shape){const o=t.shape[n];e[n]=re.create(he(o))}return new b({...t._def,shape:()=>e})}else return t instanceof Q?new Q({...t._def,type:he(t.element)}):t instanceof re?re.create(he(t.unwrap())):t instanceof Ee?Ee.create(he(t.unwrap())):t instanceof de?de.create(t.items.map(e=>he(e))):t}class b extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=L.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==v.object){const c=this._getOrReturnCtx(e);return C(c,{code:y.invalid_type,expected:v.object,received:c.parsedType}),P}const{status:o,ctx:s}=this._processInputParams(e),{shape:l,keys:a}=this._getCached(),u=[];if(!(this._def.catchall instanceof se&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||u.push(c);const d=[];for(const c of a){const f=l[c],m=s.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new j(s,m,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof se){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(c==="strict")u.length>0&&(C(s,{code:y.unrecognized_keys,keys:u}),o.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const m=s.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new j(s,m,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of d){const m=await f.key,p=await f.value;c.push({key:m,value:p,alwaysSet:f.alwaysSet})}return c}).then(c=>H.mergeObjectSync(o,c)):H.mergeObjectSync(o,d)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new b({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,o)=>{var l,a;const s=((a=(l=this._def).errorMap)==null?void 0:a.call(l,n,o).message)??o.defaultError;return n.code==="unrecognized_keys"?{message:_.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new b({...this._def,unknownKeys:"strip"})}passthrough(){return new b({...this._def,unknownKeys:"passthrough"})}extend(e){return new b({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new b({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:R.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new b({...this._def,catchall:e})}pick(e){const n={};for(const o of L.objectKeys(e))e[o]&&this.shape[o]&&(n[o]=this.shape[o]);return new b({...this._def,shape:()=>n})}omit(e){const n={};for(const o of L.objectKeys(this.shape))e[o]||(n[o]=this.shape[o]);return new b({...this._def,shape:()=>n})}deepPartial(){return he(this)}partial(e){const n={};for(const o of L.objectKeys(this.shape)){const s=this.shape[o];e&&!e[o]?n[o]=s:n[o]=s.optional()}return new b({...this._def,shape:()=>n})}required(e){const n={};for(const o of L.objectKeys(this.shape))if(e&&!e[o])n[o]=this.shape[o];else{let l=this.shape[o];for(;l instanceof re;)l=l._def.innerType;n[o]=l}return new b({...this._def,shape:()=>n})}keyof(){return so(L.objectKeys(this.shape))}}b.create=(t,e)=>new b({shape:()=>t,unknownKeys:"strip",catchall:se.create(),typeName:R.ZodObject,...k(e)});b.strictCreate=(t,e)=>new b({shape:()=>t,unknownKeys:"strict",catchall:se.create(),typeName:R.ZodObject,...k(e)});b.lazycreate=(t,e)=>new b({shape:t,unknownKeys:"strip",catchall:se.create(),typeName:R.ZodObject,...k(e)});class $e extends D{_parse(e){const{ctx:n}=this._processInputParams(e),o=this._def.options;function s(l){for(const u of l)if(u.result.status==="valid")return u.result;for(const u of l)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const a=l.map(u=>new te(u.ctx.common.issues));return C(n,{code:y.invalid_union,unionErrors:a}),P}if(n.common.async)return Promise.all(o.map(async l=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await l._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let l;const a=[];for(const d of o){const c={...n,common:{...n.common,issues:[]},parent:null},f=d._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!l&&(l={result:f,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const u=a.map(d=>new te(d));return C(n,{code:y.invalid_union,unionErrors:u}),P}}get options(){return this._def.options}}$e.create=(t,e)=>new $e({options:t,typeName:R.ZodUnion,...k(e)});function ot(t,e){const n=ie(t),o=ie(e);if(t===e)return{valid:!0,data:t};if(n===v.object&&o===v.object){const s=L.objectKeys(e),l=L.objectKeys(t).filter(u=>s.indexOf(u)!==-1),a={...t,...e};for(const u of l){const d=ot(t[u],e[u]);if(!d.valid)return{valid:!1};a[u]=d.data}return{valid:!0,data:a}}else if(n===v.array&&o===v.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let l=0;l<t.length;l++){const a=t[l],u=e[l],d=ot(a,u);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return n===v.date&&o===v.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class be extends D{_parse(e){const{status:n,ctx:o}=this._processInputParams(e),s=(l,a)=>{if(Rt(l)||Rt(a))return P;const u=ot(l.value,a.value);return u.valid?((Pt(l)||Pt(a))&&n.dirty(),{status:n.value,value:u.data}):(C(o,{code:y.invalid_intersection_types}),P)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([l,a])=>s(l,a)):s(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}be.create=(t,e,n)=>new be({left:t,right:e,typeName:R.ZodIntersection,...k(n)});class de extends D{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==v.array)return C(o,{code:y.invalid_type,expected:v.array,received:o.parsedType}),P;if(o.data.length<this._def.items.length)return C(o,{code:y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),P;!this._def.rest&&o.data.length>this._def.items.length&&(C(o,{code:y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const l=[...o.data].map((a,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new j(o,a,o.path,u)):null}).filter(a=>!!a);return o.common.async?Promise.all(l).then(a=>H.mergeArray(n,a)):H.mergeArray(n,l)}get items(){return this._def.items}rest(e){return new de({...this._def,rest:e})}}de.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new de({items:t,typeName:R.ZodTuple,rest:null,...k(e)})};class Je extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==v.object)return C(o,{code:y.invalid_type,expected:v.object,received:o.parsedType}),P;const s=[],l=this._def.keyType,a=this._def.valueType;for(const u in o.data)s.push({key:l._parse(new j(o,u,o.path,u)),value:a._parse(new j(o,o.data[u],o.path,u)),alwaysSet:u in o.data});return o.common.async?H.mergeObjectAsync(n,s):H.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,o){return n instanceof D?new Je({keyType:e,valueType:n,typeName:R.ZodRecord,...k(o)}):new Je({keyType:z.create(),valueType:e,typeName:R.ZodRecord,...k(n)})}}class Ft extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==v.map)return C(o,{code:y.invalid_type,expected:v.map,received:o.parsedType}),P;const s=this._def.keyType,l=this._def.valueType,a=[...o.data.entries()].map(([u,d],c)=>({key:s._parse(new j(o,u,o.path,[c,"key"])),value:l._parse(new j(o,d,o.path,[c,"value"]))}));if(o.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of a){const c=await d.key,f=await d.value;if(c.status==="aborted"||f.status==="aborted")return P;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(c.value,f.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const d of a){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return P;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(c.value,f.value)}return{status:n.value,value:u}}}}Ft.create=(t,e,n)=>new Ft({valueType:e,keyType:t,typeName:R.ZodMap,...k(n)});class Ne extends D{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==v.set)return C(o,{code:y.invalid_type,expected:v.set,received:o.parsedType}),P;const s=this._def;s.minSize!==null&&o.data.size<s.minSize.value&&(C(o,{code:y.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&o.data.size>s.maxSize.value&&(C(o,{code:y.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const l=this._def.valueType;function a(d){const c=new Set;for(const f of d){if(f.status==="aborted")return P;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const u=[...o.data.values()].map((d,c)=>l._parse(new j(o,d,o.path,c)));return o.common.async?Promise.all(u).then(d=>a(d)):a(u)}min(e,n){return new Ne({...this._def,minSize:{value:e,message:_.toString(n)}})}max(e,n){return new Ne({...this._def,maxSize:{value:e,message:_.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ne.create=(t,e)=>new Ne({valueType:t,minSize:null,maxSize:null,typeName:R.ZodSet,...k(e)});class it extends D{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}it.create=(t,e)=>new it({getter:t,typeName:R.ZodLazy,...k(e)});class Ut extends D{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return C(n,{received:n.data,code:y.invalid_literal,expected:this._def.value}),P}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ut.create=(t,e)=>new Ut({value:t,typeName:R.ZodLiteral,...k(e)});function so(t,e){return new _e({values:t,typeName:R.ZodEnum,...k(e)})}class _e extends D{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),o=this._def.values;return C(n,{expected:L.joinValues(o),received:n.parsedType,code:y.invalid_type}),P}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),o=this._def.values;return C(n,{received:n.data,code:y.invalid_enum_value,options:o}),P}return Y(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return _e.create(e,{...this._def,...n})}exclude(e,n=this._def){return _e.create(this.options.filter(o=>!e.includes(o)),{...this._def,...n})}}_e.create=so;class Gt extends D{_parse(e){const n=L.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==v.string&&o.parsedType!==v.number){const s=L.objectValues(n);return C(o,{expected:L.joinValues(s),received:o.parsedType,code:y.invalid_type}),P}if(this._cache||(this._cache=new Set(L.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=L.objectValues(n);return C(o,{received:o.data,code:y.invalid_enum_value,options:s}),P}return Y(e.data)}get enum(){return this._def.values}}Gt.create=(t,e)=>new Gt({values:t,typeName:R.ZodNativeEnum,...k(e)});class He extends D{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==v.promise&&n.common.async===!1)return C(n,{code:y.invalid_type,expected:v.promise,received:n.parsedType}),P;const o=n.parsedType===v.promise?n.data:Promise.resolve(n.data);return Y(o.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}He.create=(t,e)=>new He({type:t,typeName:R.ZodPromise,...k(e)});class Se extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===R.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:o}=this._processInputParams(e),s=this._def.effect||null,l={addIssue:a=>{C(o,a),a.fatal?n.abort():n.dirty()},get path(){return o.path}};if(l.addIssue=l.addIssue.bind(l),s.type==="preprocess"){const a=s.transform(o.data,l);if(o.common.async)return Promise.resolve(a).then(async u=>{if(n.value==="aborted")return P;const d=await this._def.schema._parseAsync({data:u,path:o.path,parent:o});return d.status==="aborted"?P:d.status==="dirty"||n.value==="dirty"?Re(d.value):d});{if(n.value==="aborted")return P;const u=this._def.schema._parseSync({data:a,path:o.path,parent:o});return u.status==="aborted"?P:u.status==="dirty"||n.value==="dirty"?Re(u.value):u}}if(s.type==="refinement"){const a=u=>{const d=s.refinement(u,l);if(o.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(o.common.async===!1){const u=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return u.status==="aborted"?P:(u.status==="dirty"&&n.dirty(),a(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(u=>u.status==="aborted"?P:(u.status==="dirty"&&n.dirty(),a(u.value).then(()=>({status:n.value,value:u.value}))))}if(s.type==="transform")if(o.common.async===!1){const a=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Ce(a))return P;const u=s.transform(a.value,l);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(a=>Ce(a)?Promise.resolve(s.transform(a.value,l)).then(u=>({status:n.value,value:u})):P);L.assertNever(s)}}Se.create=(t,e,n)=>new Se({schema:t,typeName:R.ZodEffects,effect:e,...k(n)});Se.createWithPreprocess=(t,e,n)=>new Se({schema:e,effect:{type:"preprocess",transform:t},typeName:R.ZodEffects,...k(n)});class re extends D{_parse(e){return this._getType(e)===v.undefined?Y(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}re.create=(t,e)=>new re({innerType:t,typeName:R.ZodOptional,...k(e)});class Ee extends D{_parse(e){return this._getType(e)===v.null?Y(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ee.create=(t,e)=>new Ee({innerType:t,typeName:R.ZodNullable,...k(e)});class rt extends D{_parse(e){const{ctx:n}=this._processInputParams(e);let o=n.data;return n.parsedType===v.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}rt.create=(t,e)=>new rt({innerType:t,typeName:R.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...k(e)});class st extends D{_parse(e){const{ctx:n}=this._processInputParams(e),o={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return qe(s)?s.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new te(o.common.issues)},input:o.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new te(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}st.create=(t,e)=>new st({innerType:t,typeName:R.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...k(e)});class qt extends D{_parse(e){if(this._getType(e)!==v.nan){const o=this._getOrReturnCtx(e);return C(o,{code:y.invalid_type,expected:v.nan,received:o.parsedType}),P}return{status:"valid",value:e.data}}}qt.create=t=>new qt({typeName:R.ZodNaN,...k(t)});class li extends D{_parse(e){const{ctx:n}=this._processInputParams(e),o=n.data;return this._def.type._parse({data:o,path:n.path,parent:n})}unwrap(){return this._def.type}}class Ct extends D{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return l.status==="aborted"?P:l.status==="dirty"?(n.dirty(),Re(l.value)):this._def.out._parseAsync({data:l.value,path:o.path,parent:o})})();{const s=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?P:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:o.path,parent:o})}}static create(e,n){return new Ct({in:e,out:n,typeName:R.ZodPipeline})}}class lt extends D{_parse(e){const n=this._def.innerType._parse(e),o=s=>(Ce(s)&&(s.value=Object.freeze(s.value)),s);return qe(n)?n.then(s=>o(s)):o(n)}unwrap(){return this._def.innerType}}lt.create=(t,e)=>new lt({innerType:t,typeName:R.ZodReadonly,...k(e)});var R;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(R||(R={}));const le=z.create,Bt=ue.create;ce.create;const ai=Be.create;ve.create;const $t=nt.create;se.create;const Pe=Q.create,ui=b.create,ci=$e.create;be.create;de.create;const di=Je.create,fi=it.create,mi=_e.create;He.create;re.create;Ee.create;const pe={string:t=>z.create({...t,coerce:!0}),number:t=>ue.create({...t,coerce:!0}),boolean:t=>Be.create({...t,coerce:!0}),bigint:t=>ce.create({...t,coerce:!0}),date:t=>ve.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pi,hi;function gi(){return{geminiUrl:pi,vertexUrl:hi}}function yi(t,e,n){var o,s,l;if(!(!((o=t.httpOptions)===null||o===void 0)&&o.baseUrl)){const a=gi();return t.vertexai?(s=a.vertexUrl)!==null&&s!==void 0?s:e:(l=a.geminiUrl)!==null&&l!==void 0?l:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class me{}function E(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function r(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];r(f,e.slice(l+1),n[c])}else for(const c of d)r(c,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];r(d[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else t[o]=n}function i(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const o=e[n];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const l=t[s];return Array.isArray(l)?l.map(a=>i(a,e.slice(n+1))):void 0}else return}else t=t[o]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bt;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(bt||(bt={}));var Jt;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Jt||(Jt={}));var X;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(X||(X={}));var Ht;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Ht||(Ht={}));var Wt;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Wt||(Wt={}));var Kt;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Kt||(Kt={}));var Yt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Yt||(Yt={}));var Zt;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Zt||(Zt={}));var Ot;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Ot||(Ot={}));var zt;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(zt||(zt={}));var Xt;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xt||(Xt={}));var Qt;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Qt||(Qt={}));var jt;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jt||(jt={}));var We;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(We||(We={}));var en;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(en||(en={}));var at;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(at||(at={}));var tn;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(tn||(tn={}));var nn;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(nn||(nn={}));var on;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(on||(on={}));var rn;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(rn||(rn={}));var sn;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(sn||(sn={}));var ln;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(ln||(ln={}));var an;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(an||(an={}));var un;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(un||(un={}));var cn;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(cn||(cn={}));var dn;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(dn||(dn={}));var fn;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fn||(fn={}));var mn;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mn||(mn={}));var pn;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(pn||(pn={}));var hn;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(hn||(hn={}));var gn;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gn||(gn={}));var yn;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(yn||(yn={}));var Tn;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Tn||(Tn={}));var Cn;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Cn||(Cn={}));var vn;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vn||(vn={}));var _n;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(_n||(_n={}));var Sn;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sn||(Sn={}));var En;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(En||(En={}));var An;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(An||(An={}));var ge;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ge||(ge={}));class ut{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class xe{get text(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const m=[];for(const p of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(p))h!=="text"&&h!=="thought"&&(g!==null||g!==void 0)&&m.push(h);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,c+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const m of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[p,h]of Object.entries(m))p!=="inlineData"&&(h!==null||h!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,s,l,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,s,l,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class In{}class Mn{}class Ti{}class Ci{}class xn{}class Rn{}class Pn{}class vi{}class wn{}class Nn{}class kn{}class _i{}class Si{}class Ei{}class Dn{}class Ai{get text(){var e,n,o;let s="",l=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Ii{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function lo(t,e){const n=F(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ao(t){return Array.isArray(t)?t.map(e=>Ke(e)):[Ke(t)]}function Ke(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Mi(t){const e=Ke(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function xi(t){const e=Ke(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ln(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function uo(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ln(e)):[Ln(t)]}function ct(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Vn(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Fn(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function J(t){if(t==null)throw new Error("ContentUnion is required");return ct(t)?t:{role:"user",parts:uo(t)}}function co(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=J(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=J(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>J(n)):[J(e)]}function K(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Vn(t)||Fn(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[J(t)]}const e=[],n=[],o=ct(t[0]);for(const s of t){const l=ct(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(Vn(s)||Fn(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:uo(n)}),e}const Ri=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Un=mi(["string","number","integer","object","array","boolean","null"]),Pi=ci([Un,Pe(Un)]);function wi(t=!0){const e=fi(()=>{const n=ui({type:Pi.optional(),format:le().optional(),title:le().optional(),description:le().optional(),default:$t().optional(),items:e.optional(),minItems:pe.string().optional(),maxItems:pe.string().optional(),enum:Pe($t()).optional(),properties:di(le(),e).optional(),required:Pe(le()).optional(),minProperties:pe.string().optional(),maxProperties:pe.string().optional(),propertyOrdering:Pe(le()).optional(),minimum:Bt().optional(),maximum:Bt().optional(),minLength:pe.string().optional(),maxLength:pe.string().optional(),pattern:le().optional(),anyOf:Pe(e).optional(),additionalProperties:ai().optional()});return t?n.strict():n});return e}function Ni(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(X).includes(n[0].toUpperCase())?n[0].toUpperCase():X.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(X).includes(o.toUpperCase())?o.toUpperCase():X.TYPE_UNSPECIFIED})}}function ye(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&Ni(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(X).includes(u.toUpperCase())?u.toUpperCase():X.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=ye(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(ye(c))}e[a]=d}else if(s.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=ye(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function ke(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=wi().parse(t);return ye(e)}else return ye(t)}function vt(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function _t(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ae(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=ke(e.parameters)),e.response&&(e.response=ke(e.response));return t}function Ie(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ki(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function ne(t,e){if(typeof e!="string")throw new Error("name must be a string");return ki(t,e,"cachedContents")}function fo(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function oe(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Di(t){return t!=null&&typeof t=="object"&&"name"in t}function Li(t){return t!=null&&typeof t=="object"&&"video"in t}function Vi(t){return t!=null&&typeof t=="object"&&"uri"in t}function mo(t){var e;let n;if(Di(t)&&(n=t.name),!(Vi(t)&&(n=t.uri,n===void 0))&&!(Li(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function po(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function ho(t){for(const e of["models","tunedModels","publisherModels"])if(Fi(t,e))return t[e];return[]}function Fi(t,e){return t!==null&&typeof t=="object"&&e in t}function Ui(t,e={}){const n=t,o={name:n.name,description:n.description,parameters:ye(Ye(n.inputSchema))};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Gi(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=Ui(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function qi(t){const e=[];for(const n of t)e.push(Ye(n));return e}function Bi(t){const e={};for(const[n,o]of Object.entries(t)){const s=o;e[n]=Ye(s)}return e}function Ye(t){const e=new Set(["items"]),n=new Set(["anyOf"]),o=new Set(["properties"]),s={};for(const[l,a]of Object.entries(t))if(e.has(l))s[l]=Ye(a);else if(n.has(l))s[l]=qi(a);else if(o.has(l))s[l]=Bi(a);else if(l==="type"){const u=a.toUpperCase();s[l]=Object.values(X).includes(u)?u:X.TYPE_UNSPECIFIED}else Ri.has(l)&&(s[l]=a);return s}function go(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function $i(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ze(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function yo(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bi(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Ji(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Hi(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Wi(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],bi(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ji(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Hi(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function To(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Wi(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ki(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const m=i(t,["maxProperties"]);m!=null&&r(e,["maxProperties"],m);const p=i(t,["maximum"]);p!=null&&r(e,["maximum"],p);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const g=i(t,["minLength"]);g!=null&&r(e,["minLength"],g);const T=i(t,["minProperties"]);T!=null&&r(e,["minProperties"],T);const S=i(t,["minimum"]);S!=null&&r(e,["minimum"],S);const A=i(t,["nullable"]);A!=null&&r(e,["nullable"],A);const x=i(t,["pattern"]);x!=null&&r(e,["pattern"],x);const I=i(t,["properties"]);I!=null&&r(e,["properties"],I);const w=i(t,["propertyOrdering"]);w!=null&&r(e,["propertyOrdering"],w);const M=i(t,["required"]);M!=null&&r(e,["required"],M);const U=i(t,["title"]);U!=null&&r(e,["title"],U);const G=i(t,["type"]);return G!=null&&r(e,["type"],G),e}function Yi(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&r(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function Zi(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Oi(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function zi(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Oi(n)),e}function Xi(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Qi(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Xi(n)),e}function ji(){return{}}function er(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>Zi(d))),r(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],zi(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Qi(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],ji());const a=i(t,["codeExecution"]);return a!=null&&r(e,["codeExecution"],a),e}function tr(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function nr(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function or(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],nr(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function ir(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],tr(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],or(o)),e}function rr(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Co(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],rr(n)),e}function sr(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Co(o)),e}function lr(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>sr(s))),r(e,["speakerVoiceConfigs"],o)}return e}function ar(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Co(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],lr(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function ur(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function cr(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],To(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&r(o,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&r(o,["logprobs"],p);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const g=i(e,["frequencyPenalty"]);g!=null&&r(o,["frequencyPenalty"],g);const T=i(e,["seed"]);T!=null&&r(o,["seed"],T);const S=i(e,["responseMimeType"]);S!=null&&r(o,["responseMimeType"],S);const A=i(e,["responseSchema"]);A!=null&&r(o,["responseSchema"],Ki(ke(A)));const x=i(e,["responseJsonSchema"]);if(x!=null&&r(o,["responseJsonSchema"],x),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=i(e,["safetySettings"]);if(n!==void 0&&I!=null){let V=I;Array.isArray(V)&&(V=V.map(O=>Yi(O))),r(n,["safetySettings"],V)}const w=i(e,["tools"]);if(n!==void 0&&w!=null){let V=Ie(w);Array.isArray(V)&&(V=V.map(O=>er(Ae(O)))),r(n,["tools"],V)}const M=i(e,["toolConfig"]);if(n!==void 0&&M!=null&&r(n,["toolConfig"],ir(M)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=i(e,["cachedContent"]);n!==void 0&&U!=null&&r(n,["cachedContent"],ne(t,U));const G=i(e,["responseModalities"]);G!=null&&r(o,["responseModalities"],G);const W=i(e,["mediaResolution"]);W!=null&&r(o,["mediaResolution"],W);const N=i(e,["speechConfig"]);if(N!=null&&r(o,["speechConfig"],ar(vt(N))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=i(e,["thinkingConfig"]);return q!=null&&r(o,["thinkingConfig"],ur(q)),o}function dr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["request","model"],F(t,o));const s=i(e,["contents"]);if(s!=null){let a=K(s);Array.isArray(a)&&(a=a.map(u=>To(u))),r(n,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["request","generationConfig"],cr(t,l,n)),n}function fr(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&r(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>dr(t,a))),r(n,["requests","requests"],l)}return n}function mr(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&r(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function pr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["src"]);s!=null&&r(n,["batch","inputConfig"],fr(t,go(t,s)));const l=i(e,["config"]);return l!=null&&r(n,["config"],mr(l,n)),n}function hr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ze(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function gr(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ze(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function yr(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Tr(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],yr(n,e)),e}function Cr(t){const e={},n=i(t,["format"]);n!=null&&r(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function vr(t){const e={},n=i(t,["format"]);n!=null&&r(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function _r(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&r(e,["outputConfig"],vr($i(s))),n}function Sr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],F(t,o));const s=i(e,["src"]);s!=null&&r(n,["inputConfig"],Cr(go(t,s)));const l=i(e,["config"]);return l!=null&&r(n,["config"],_r(l,n)),n}function Er(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ze(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Ar(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],Ze(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Ir(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function Mr(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Ir(n,e)),e}function xr(){return{}}function Rr(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Pr(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function wr(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Nr(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Rr(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Pr(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],wr(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function kr(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Nr(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Dr(t){const e={},n=i(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function Lr(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Vr(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Lr(s))),r(e,["urlMetadata"],o)}return e}function Fr(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],kr(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],Dr(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],Vr(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const m=i(t,["safetyRatings"]);return m!=null&&r(e,["safetyRatings"],m),e}function Ur(t){const e={},n=i(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Fr(u))),r(e,["candidates"],a)}const o=i(t,["modelVersion"]);o!=null&&r(e,["modelVersion"],o);const s=i(t,["promptFeedback"]);s!=null&&r(e,["promptFeedback"],s);const l=i(t,["usageMetadata"]);return l!=null&&r(e,["usageMetadata"],l),e}function Gr(t){const e={},n=i(t,["response"]);return n!=null&&r(e,["response"],Ur(n)),i(t,["error"])!=null&&r(e,["error"],xr()),e}function qr(t){const e={},n=i(t,["responsesFile"]);n!=null&&r(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Gr(l))),r(e,["inlinedResponses"],s)}return e}function dt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&r(e,["state"],yo(s));const l=i(t,["metadata","createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["metadata","endTime"]);a!=null&&r(e,["endTime"],a);const u=i(t,["metadata","updateTime"]);u!=null&&r(e,["updateTime"],u);const d=i(t,["metadata","model"]);d!=null&&r(e,["model"],d);const c=i(t,["metadata","output"]);return c!=null&&r(e,["dest"],qr(c)),e}function Br(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>dt(l))),r(e,["batchJobs"],s)}return e}function $r(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["code"]);o!=null&&r(e,["code"],o);const s=i(t,["message"]);return s!=null&&r(e,["message"],s),e}function br(t){const e={},n=i(t,["instancesFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function Jr(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function ft(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],yo(s));const l=i(t,["error"]);l!=null&&r(e,["error"],$r(l));const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["startTime"]);u!=null&&r(e,["startTime"],u);const d=i(t,["endTime"]);d!=null&&r(e,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&r(e,["updateTime"],c);const f=i(t,["model"]);f!=null&&r(e,["model"],f);const m=i(t,["inputConfig"]);m!=null&&r(e,["src"],br(m));const p=i(t,["outputConfig"]);return p!=null&&r(e,["dest"],Jr(p)),e}function Hr(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>ft(l))),r(e,["batchJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fe;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(fe||(fe={}));class De{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};o?typeof o=="object"?a=Object.assign({},o):a=o:a={config:{}},a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wr extends me{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new De(fe.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}async createInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Sr(this.apiClient,e);return u=E("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>ft(f))}else{const c=pr(this.apiClient,e);return u=E("{model}:batchGenerateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>dt(f))}}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Er(this.apiClient,e);return u=E("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>ft(f))}else{const c=hr(this.apiClient,e);return u=E("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>dt(f))}}async cancel(e){var n,o,s,l;let a="",u={};if(this.apiClient.isVertexAI()){const d=Ar(this.apiClient,e);a=E("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=gr(this.apiClient,e);a=E("batches/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Mr(e);return u=E("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Hr(f),p=new Dn;return Object.assign(p,m),p})}else{const c=Tr(e);return u=E("batches",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Br(f),p=new Dn;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kr(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Yr(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Zr(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Or(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Kr(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Yr(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Zr(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function Gn(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Or(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function zr(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Xr(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Qr(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Xr(n)),e}function jr(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function es(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],jr(n)),e}function ts(){return{}}function ns(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>zr(d))),r(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],Qr(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],es(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],ts());const a=i(t,["codeExecution"]);return a!=null&&r(e,["codeExecution"],a),e}function os(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function is(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function rs(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],is(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function ss(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],os(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],rs(o)),e}function ls(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=K(a);Array.isArray(f)&&(f=f.map(m=>Gn(m))),r(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],Gn(J(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(m=>ns(m))),r(e,["tools"],f)}const c=i(t,["toolConfig"]);if(e!==void 0&&c!=null&&r(e,["toolConfig"],ss(c)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function as(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],lo(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],ls(s,n)),n}function us(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],ne(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function cs(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],ne(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function ds(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function fs(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],ne(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],ds(s,n)),n}function ms(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function ps(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],ms(n,e)),e}function hs(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function gs(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function ys(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Ts(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],hs(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],gs(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],ys(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function qn(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Ts(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Cs(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function vs(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function _s(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],vs(n)),e}function Ss(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Es(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Ss(n)),e}function As(){return{}}function Is(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Ms(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Is(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function xs(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Ms(n)),e}function Rs(){return{}}function Ps(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Cs(m))),r(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],_s(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Es(l)),i(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],As());const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],xs(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],Rs());const c=i(t,["codeExecution"]);return c!=null&&r(e,["codeExecution"],c),e}function ws(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function Ns(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function ks(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],Ns(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Ds(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],ws(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],ks(o)),e}function Ls(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let m=K(a);Array.isArray(m)&&(m=m.map(p=>qn(p))),r(e,["contents"],m)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],qn(J(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(p=>Ps(p))),r(e,["tools"],m)}const c=i(t,["toolConfig"]);e!==void 0&&c!=null&&r(e,["toolConfig"],Ds(c));const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&r(e,["encryption_spec","kmsKeyName"],f),n}function Vs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],lo(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Ls(s,n)),n}function Fs(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],ne(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Us(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],ne(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Gs(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function qs(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],ne(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Gs(s,n)),n}function Bs(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function $s(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Bs(n,e)),e}function Fe(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["model"]);s!=null&&r(e,["model"],s);const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&r(e,["updateTime"],a);const u=i(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function bs(){return{}}function Js(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Fe(l))),r(e,["cachedContents"],s)}return e}function Ue(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["model"]);s!=null&&r(e,["model"],s);const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&r(e,["updateTime"],a);const u=i(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Hs(){return{}}function Ws(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Ue(l))),r(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ks extends me{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new De(fe.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Vs(this.apiClient,e);return u=E("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ue(f))}else{const c=as(this.apiClient,e);return u=E("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Fe(f))}}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Fs(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ue(f))}else{const c=us(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Fe(f))}}async delete(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Us(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Hs(),m=new Nn;return Object.assign(m,f),m})}else{const c=cs(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=bs(),m=new Nn;return Object.assign(m,f),m})}}async update(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=qs(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ue(f))}else{const c=fs(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Fe(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=$s(e);return u=E("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Ws(f),p=new kn;return Object.assign(p,m),p})}else{const c=ps(e);return u=E("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Js(f),p=new kn;return Object.assign(p,m),p})}}}function Bn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(t){return this instanceof B?(this.v=t,this):new B(t)}function Te(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(h){return function(g){return Promise.resolve(g).then(h,m)}}function u(h,g){o[h]&&(s[h]=function(T){return new Promise(function(S,A){l.push([h,T,S,A])>1||d(h,T)})},g&&(s[h]=g(s[h])))}function d(h,g){try{c(o[h](g))}catch(T){p(l[0][3],T)}}function c(h){h.value instanceof B?Promise.resolve(h.value.v).then(f,m):p(l[0][2],h)}function f(h){d("next",h)}function m(h){d("throw",h)}function p(h,g){h(g),l.shift(),l.length&&d(l[0][0],l[0][1])}}function we(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Bn=="function"?Bn(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(u,d){a=t[l](a),s(u,d,a.done,a.value)})}}function s(l,a,u,d){Promise.resolve(d).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ys(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:vo(n)}function vo(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Zs(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function $n(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!vo(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class Os{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new zs(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class zs{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),Zs(l)}async sendMessage(e){var n;await this.sendPromise;const o=J(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,a,u;const d=await s,c=(a=(l=d.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(m))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(o,h,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=J(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?$n(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,s;return Te(this,arguments,function*(){var a,u,d,c;const f=[];try{for(var m=!0,p=we(e),h;h=yield B(p.next()),a=h.done,!a;m=!0){c=h.value,m=!1;const g=c;if(Ys(g)){const T=(s=(o=g.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content;T!==void 0&&f.push(T)}yield yield B(g)}}catch(g){u={error:g}}finally{try{!m&&!a&&(d=p.return)&&(yield B(d.call(p)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...$n(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oe extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Oe.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xs(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Qs(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Xs(n,e)),e}function js(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["message"]);o!=null&&r(e,["message"],o);const s=i(t,["code"]);return s!=null&&r(e,["code"],s),e}function el(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["mimeType"]);s!=null&&r(e,["mimeType"],s);const l=i(t,["sizeBytes"]);l!=null&&r(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&r(e,["uri"],f);const m=i(t,["downloadUri"]);m!=null&&r(e,["downloadUri"],m);const p=i(t,["state"]);p!=null&&r(e,["state"],p);const h=i(t,["source"]);h!=null&&r(e,["source"],h);const g=i(t,["videoMetadata"]);g!=null&&r(e,["videoMetadata"],g);const T=i(t,["error"]);return T!=null&&r(e,["error"],js(T)),e}function tl(t){const e={},n=i(t,["file"]);n!=null&&r(e,["file"],el(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function nl(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","file"],mo(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function ol(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","file"],mo(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function il(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["message"]);o!=null&&r(e,["message"],o);const s=i(t,["code"]);return s!=null&&r(e,["code"],s),e}function mt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["mimeType"]);s!=null&&r(e,["mimeType"],s);const l=i(t,["sizeBytes"]);l!=null&&r(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&r(e,["uri"],f);const m=i(t,["downloadUri"]);m!=null&&r(e,["downloadUri"],m);const p=i(t,["state"]);p!=null&&r(e,["state"],p);const h=i(t,["source"]);h!=null&&r(e,["source"],h);const g=i(t,["videoMetadata"]);g!=null&&r(e,["videoMetadata"],g);const T=i(t,["error"]);return T!=null&&r(e,["error"],il(T)),e}function rl(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>mt(l))),r(e,["files"],s)}return e}function sl(){return{}}function ll(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class al extends me{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new De(fe.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>mt(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qs(e);return l=E("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=rl(d),f=new _i;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tl(e);return l=E("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=sl(),c=new Si;return Object.assign(c,d),c})}}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nl(e);return l=E("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>mt(d))}}async delete(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ol(e);return l=E("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=ll(),c=new Ei;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ul(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function cl(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function _o(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],ul(n)),e}function dl(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],cl(n)),e}function fl(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],_o(o)),e}function ml(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>fl(s))),r(e,["speakerVoiceConfigs"],o)}return e}function pl(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],_o(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],ml(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function hl(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],dl(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function gl(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function yl(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Tl(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Cl(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function vl(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function _l(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Sl(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],gl(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Tl(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],vl(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function El(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],yl(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Cl(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],_l(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function Al(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Sl(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Il(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>El(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ml(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function xl(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function Rl(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Pl(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function wl(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Rl(n)),e}function Nl(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Pl(n)),e}function kl(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Dl(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Ll(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],kl(n)),e}function Vl(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Dl(n)),e}function Fl(){return{}}function Ul(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Gl(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Ul(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function ql(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Gl(n)),e}function Bl(){return{}}function $l(){return{}}function bl(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>Ml(d))),r(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],wl(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Ll(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],Bl());const a=i(t,["codeExecution"]);return a!=null&&r(e,["codeExecution"],a),e}function Jl(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>xl(m))),r(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],Nl(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Vl(l)),i(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Fl());const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],ql(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],$l());const c=i(t,["codeExecution"]);return c!=null&&r(e,["codeExecution"],c),e}function Hl(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Wl(t){const e={},n=i(t,["handle"]);n!=null&&r(e,["handle"],n);const o=i(t,["transparent"]);return o!=null&&r(e,["transparent"],o),e}function bn(){return{}}function Jn(){return{}}function Kl(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function Yl(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function Zl(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],Kl(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function Ol(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],Yl(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function zl(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Xl(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Ql(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],zl(o)),e}function jl(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],Xl(o)),e}function ea(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function ta(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function na(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","speechConfig"],pl(_t(m)));const p=i(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],Al(J(h)));const g=i(t,["tools"]);if(e!==void 0&&g!=null){let M=Ie(g);Array.isArray(M)&&(M=M.map(U=>bl(Ae(U)))),r(e,["setup","tools"],M)}const T=i(t,["sessionResumption"]);e!==void 0&&T!=null&&r(e,["setup","sessionResumption"],Hl(T));const S=i(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&r(e,["setup","inputAudioTranscription"],bn());const A=i(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&r(e,["setup","outputAudioTranscription"],bn());const x=i(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&r(e,["setup","realtimeInputConfig"],Zl(x));const I=i(t,["contextWindowCompression"]);e!==void 0&&I!=null&&r(e,["setup","contextWindowCompression"],Ql(I));const w=i(t,["proactivity"]);return e!==void 0&&w!=null&&r(e,["setup","proactivity"],ea(w)),n}function oa(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","speechConfig"],hl(_t(m)));const p=i(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],Il(J(h)));const g=i(t,["tools"]);if(e!==void 0&&g!=null){let M=Ie(g);Array.isArray(M)&&(M=M.map(U=>Jl(Ae(U)))),r(e,["setup","tools"],M)}const T=i(t,["sessionResumption"]);e!==void 0&&T!=null&&r(e,["setup","sessionResumption"],Wl(T));const S=i(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&r(e,["setup","inputAudioTranscription"],Jn());const A=i(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&r(e,["setup","outputAudioTranscription"],Jn());const x=i(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&r(e,["setup","realtimeInputConfig"],Ol(x));const I=i(t,["contextWindowCompression"]);e!==void 0&&I!=null&&r(e,["setup","contextWindowCompression"],jl(I));const w=i(t,["proactivity"]);return e!==void 0&&w!=null&&r(e,["setup","proactivity"],ta(w)),n}function ia(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],na(s,n)),n}function ra(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],oa(s,n)),n}function sa(){return{}}function la(){return{}}function aa(){return{}}function ua(){return{}}function ca(t){const e={},n=i(t,["media"]);n!=null&&r(e,["mediaChunks"],ao(n));const o=i(t,["audio"]);o!=null&&r(e,["audio"],xi(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],Mi(l));const a=i(t,["text"]);return a!=null&&r(e,["text"],a),i(t,["activityStart"])!=null&&r(e,["activityStart"],sa()),i(t,["activityEnd"])!=null&&r(e,["activityEnd"],aa()),e}function da(t){const e={},n=i(t,["media"]);if(n!=null&&r(e,["mediaChunks"],ao(n)),i(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=i(t,["audioStreamEnd"]);if(o!=null&&r(e,["audioStreamEnd"],o),i(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(i(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return i(t,["activityStart"])!=null&&r(e,["activityStart"],la()),i(t,["activityEnd"])!=null&&r(e,["activityEnd"],ua()),e}function So(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["weight"]);return o!=null&&r(e,["weight"],o),e}function fa(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>So(s))),r(e,["weightedPrompts"],o)}return e}function Eo(t){const e={},n=i(t,["temperature"]);n!=null&&r(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&r(e,["topK"],o);const s=i(t,["seed"]);s!=null&&r(e,["seed"],s);const l=i(t,["guidance"]);l!=null&&r(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&r(e,["bpm"],a);const u=i(t,["density"]);u!=null&&r(e,["density"],u);const d=i(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&r(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const m=i(t,["muteDrums"]);m!=null&&r(e,["muteDrums"],m);const p=i(t,["onlyBassAndDrums"]);return p!=null&&r(e,["onlyBassAndDrums"],p),e}function ma(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&r(e,["musicGenerationConfig"],Eo(n)),e}function Ao(t){const e={},n=i(t,["model"]);return n!=null&&r(e,["model"],n),e}function Io(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>So(s))),r(e,["weightedPrompts"],o)}return e}function pt(t){const e={},n=i(t,["setup"]);n!=null&&r(e,["setup"],Ao(n));const o=i(t,["clientContent"]);o!=null&&r(e,["clientContent"],Io(o));const s=i(t,["musicGenerationConfig"]);s!=null&&r(e,["musicGenerationConfig"],Eo(s));const l=i(t,["playbackControl"]);return l!=null&&r(e,["playbackControl"],l),e}function pa(){return{}}function ha(){return{}}function ga(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function ya(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Ta(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ca(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function va(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function _a(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Sa(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ga(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ta(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],va(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function Ea(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ya(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ca(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],_a(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function Aa(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Sa(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ia(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Ea(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Hn(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["finished"]);return o!=null&&r(e,["finished"],o),e}function Wn(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["finished"]);return o!=null&&r(e,["finished"],o),e}function Ma(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function xa(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ma(s))),r(e,["urlMetadata"],o)}return e}function Ra(t){const e={},n=i(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],Aa(n));const o=i(t,["turnComplete"]);o!=null&&r(e,["turnComplete"],o);const s=i(t,["interrupted"]);s!=null&&r(e,["interrupted"],s);const l=i(t,["groundingMetadata"]);l!=null&&r(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&r(e,["generationComplete"],a);const u=i(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],Hn(u));const d=i(t,["outputTranscription"]);d!=null&&r(e,["outputTranscription"],Hn(d));const c=i(t,["urlContextMetadata"]);return c!=null&&r(e,["urlContextMetadata"],xa(c)),e}function Pa(t){const e={},n=i(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],Ia(n));const o=i(t,["turnComplete"]);o!=null&&r(e,["turnComplete"],o);const s=i(t,["interrupted"]);s!=null&&r(e,["interrupted"],s);const l=i(t,["groundingMetadata"]);l!=null&&r(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&r(e,["generationComplete"],a);const u=i(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],Wn(u));const d=i(t,["outputTranscription"]);return d!=null&&r(e,["outputTranscription"],Wn(d)),e}function wa(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);return s!=null&&r(e,["name"],s),e}function Na(t){const e={},n=i(t,["args"]);n!=null&&r(e,["args"],n);const o=i(t,["name"]);return o!=null&&r(e,["name"],o),e}function ka(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>wa(s))),r(e,["functionCalls"],o)}return e}function Da(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Na(s))),r(e,["functionCalls"],o)}return e}function La(t){const e={},n=i(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function Va(t){const e={},n=i(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function Le(t){const e={},n=i(t,["modality"]);n!=null&&r(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&r(e,["tokenCount"],o),e}function Ve(t){const e={},n=i(t,["modality"]);n!=null&&r(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&r(e,["tokenCount"],o),e}function Fa(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["responseTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>Le(h))),r(e,["promptTokensDetails"],p)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>Le(h))),r(e,["cacheTokensDetails"],p)}const f=i(t,["responseTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>Le(h))),r(e,["responseTokensDetails"],p)}const m=i(t,["toolUsePromptTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(h=>Le(h))),r(e,["toolUsePromptTokensDetails"],p)}return e}function Ua(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>Ve(g))),r(e,["promptTokensDetails"],h)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Ve(g))),r(e,["cacheTokensDetails"],h)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Ve(g))),r(e,["responseTokensDetails"],h)}const m=i(t,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>Ve(g))),r(e,["toolUsePromptTokensDetails"],h)}const p=i(t,["trafficType"]);return p!=null&&r(e,["trafficType"],p),e}function Ga(t){const e={},n=i(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function qa(t){const e={},n=i(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function Ba(t){const e={},n=i(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&r(e,["resumable"],o);const s=i(t,["lastConsumedClientMessageIndex"]);return s!=null&&r(e,["lastConsumedClientMessageIndex"],s),e}function $a(t){const e={},n=i(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&r(e,["resumable"],o);const s=i(t,["lastConsumedClientMessageIndex"]);return s!=null&&r(e,["lastConsumedClientMessageIndex"],s),e}function ba(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],pa());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],Ra(o));const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],ka(s));const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],La(l));const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],Fa(a));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],Ga(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],Ba(d)),e}function Ja(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],ha());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],Pa(o));const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],Da(s));const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],Va(l));const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],Ua(a));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],qa(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],$a(d)),e}function Ha(){return{}}function Wa(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["weight"]);return o!=null&&r(e,["weight"],o),e}function Ka(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Wa(s))),r(e,["weightedPrompts"],o)}return e}function Ya(t){const e={},n=i(t,["temperature"]);n!=null&&r(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&r(e,["topK"],o);const s=i(t,["seed"]);s!=null&&r(e,["seed"],s);const l=i(t,["guidance"]);l!=null&&r(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&r(e,["bpm"],a);const u=i(t,["density"]);u!=null&&r(e,["density"],u);const d=i(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&r(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const m=i(t,["muteDrums"]);m!=null&&r(e,["muteDrums"],m);const p=i(t,["onlyBassAndDrums"]);return p!=null&&r(e,["onlyBassAndDrums"],p),e}function Za(t){const e={},n=i(t,["clientContent"]);n!=null&&r(e,["clientContent"],Ka(n));const o=i(t,["musicGenerationConfig"]);return o!=null&&r(e,["musicGenerationConfig"],Ya(o)),e}function Oa(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);o!=null&&r(e,["mimeType"],o);const s=i(t,["sourceMetadata"]);return s!=null&&r(e,["sourceMetadata"],Za(s)),e}function za(t){const e={},n=i(t,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Oa(s))),r(e,["audioChunks"],o)}return e}function Xa(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["filteredReason"]);return o!=null&&r(e,["filteredReason"],o),e}function Qa(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],Ha());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],za(o));const s=i(t,["filteredPrompt"]);return s!=null&&r(e,["filteredPrompt"],Xa(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ja(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function eu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function tu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function nu(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ja(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],eu(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],tu(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function ze(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>nu(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function ou(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const m=i(t,["maxProperties"]);m!=null&&r(e,["maxProperties"],m);const p=i(t,["maximum"]);p!=null&&r(e,["maximum"],p);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const g=i(t,["minLength"]);g!=null&&r(e,["minLength"],g);const T=i(t,["minProperties"]);T!=null&&r(e,["minProperties"],T);const S=i(t,["minimum"]);S!=null&&r(e,["minimum"],S);const A=i(t,["nullable"]);A!=null&&r(e,["nullable"],A);const x=i(t,["pattern"]);x!=null&&r(e,["pattern"],x);const I=i(t,["properties"]);I!=null&&r(e,["properties"],I);const w=i(t,["propertyOrdering"]);w!=null&&r(e,["propertyOrdering"],w);const M=i(t,["required"]);M!=null&&r(e,["required"],M);const U=i(t,["title"]);U!=null&&r(e,["title"],U);const G=i(t,["type"]);return G!=null&&r(e,["type"],G),e}function iu(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&r(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function ru(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function su(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function lu(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],su(n)),e}function au(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function uu(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],au(n)),e}function cu(){return{}}function du(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>ru(d))),r(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],lu(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],uu(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],cu());const a=i(t,["codeExecution"]);return a!=null&&r(e,["codeExecution"],a),e}function fu(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function mu(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function pu(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],mu(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function hu(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],fu(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],pu(o)),e}function gu(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Mo(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],gu(n)),e}function yu(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Mo(o)),e}function Tu(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>yu(s))),r(e,["speakerVoiceConfigs"],o)}return e}function Cu(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Mo(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],Tu(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function vu(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function _u(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],ze(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&r(o,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&r(o,["logprobs"],p);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const g=i(e,["frequencyPenalty"]);g!=null&&r(o,["frequencyPenalty"],g);const T=i(e,["seed"]);T!=null&&r(o,["seed"],T);const S=i(e,["responseMimeType"]);S!=null&&r(o,["responseMimeType"],S);const A=i(e,["responseSchema"]);A!=null&&r(o,["responseSchema"],ou(ke(A)));const x=i(e,["responseJsonSchema"]);if(x!=null&&r(o,["responseJsonSchema"],x),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=i(e,["safetySettings"]);if(n!==void 0&&I!=null){let V=I;Array.isArray(V)&&(V=V.map(O=>iu(O))),r(n,["safetySettings"],V)}const w=i(e,["tools"]);if(n!==void 0&&w!=null){let V=Ie(w);Array.isArray(V)&&(V=V.map(O=>du(Ae(O)))),r(n,["tools"],V)}const M=i(e,["toolConfig"]);if(n!==void 0&&M!=null&&r(n,["toolConfig"],hu(M)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=i(e,["cachedContent"]);n!==void 0&&U!=null&&r(n,["cachedContent"],ne(t,U));const G=i(e,["responseModalities"]);G!=null&&r(o,["responseModalities"],G);const W=i(e,["mediaResolution"]);W!=null&&r(o,["mediaResolution"],W);const N=i(e,["speechConfig"]);if(N!=null&&r(o,["speechConfig"],Cu(vt(N))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=i(e,["thinkingConfig"]);return q!=null&&r(o,["thinkingConfig"],vu(q)),o}function Kn(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["contents"]);if(s!=null){let a=K(s);Array.isArray(a)&&(a=a.map(u=>ze(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],_u(t,l,n)),n}function Su(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Eu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["contents"]);s!=null&&r(n,["requests[]","content"],co(t,s));const l=i(e,["config"]);l!=null&&r(n,["config"],Su(l,n));const a=i(e,["model"]);return a!==void 0&&r(n,["requests[]","model"],F(t,a)),n}function Au(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&r(e,["parameters","aspectRatio"],s);const l=i(t,["guidanceScale"]);if(e!==void 0&&l!=null&&r(e,["parameters","guidanceScale"],l),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&r(e,["parameters","safetySetting"],a);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&r(e,["parameters","includeSafetyAttributes"],d);const c=i(t,["includeRaiReason"]);e!==void 0&&c!=null&&r(e,["parameters","includeRaiReason"],c);const f=i(t,["language"]);e!==void 0&&f!=null&&r(e,["parameters","language"],f);const m=i(t,["outputMimeType"]);e!==void 0&&m!=null&&r(e,["parameters","outputOptions","mimeType"],m);const p=i(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&r(e,["parameters","outputOptions","compressionQuality"],p),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Iu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&r(n,["config"],Au(l,n)),n}function Mu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function xu(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],po(t,u)),o}function Ru(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],xu(t,o,n)),n}function Pu(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function wu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Pu(s,n)),n}function Nu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function ku(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Du(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["contents"]);if(s!=null){let a=K(s);Array.isArray(a)&&(a=a.map(u=>ze(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],ku(l)),n}function Lu(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],oe(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Vu(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&r(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["aspectRatio"]);if(e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l),i(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=i(t,["personGeneration"]);if(e!==void 0&&a!=null&&r(e,["parameters","personGeneration"],a),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=i(t,["negativePrompt"]);e!==void 0&&u!=null&&r(e,["parameters","negativePrompt"],u);const d=i(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&r(e,["parameters","enhancePrompt"],d),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Fu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);if(l!=null&&r(n,["instances[0]","image"],Lu(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["config"]);return a!=null&&r(n,["config"],Vu(a,n)),n}function Uu(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Gu(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function qu(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Bu(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Uu(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Gu(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],qu(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function Me(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Bu(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function $u(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const m=i(t,["maxProperties"]);m!=null&&r(e,["maxProperties"],m);const p=i(t,["maximum"]);p!=null&&r(e,["maximum"],p);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const g=i(t,["minLength"]);g!=null&&r(e,["minLength"],g);const T=i(t,["minProperties"]);T!=null&&r(e,["minProperties"],T);const S=i(t,["minimum"]);S!=null&&r(e,["minimum"],S);const A=i(t,["nullable"]);A!=null&&r(e,["nullable"],A);const x=i(t,["pattern"]);x!=null&&r(e,["pattern"],x);const I=i(t,["properties"]);I!=null&&r(e,["properties"],I);const w=i(t,["propertyOrdering"]);w!=null&&r(e,["propertyOrdering"],w);const M=i(t,["required"]);M!=null&&r(e,["required"],M);const U=i(t,["title"]);U!=null&&r(e,["title"],U);const G=i(t,["type"]);return G!=null&&r(e,["type"],G),e}function bu(t){const e={},n=i(t,["featureSelectionPreference"]);return n!=null&&r(e,["featureSelectionPreference"],n),e}function Ju(t){const e={},n=i(t,["method"]);n!=null&&r(e,["method"],n);const o=i(t,["category"]);o!=null&&r(e,["category"],o);const s=i(t,["threshold"]);return s!=null&&r(e,["threshold"],s),e}function Hu(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function Wu(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Ku(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Wu(n)),e}function Yu(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Zu(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Yu(n)),e}function Ou(){return{}}function zu(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Xu(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],zu(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Qu(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Xu(n)),e}function ju(){return{}}function xo(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Hu(m))),r(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],Ku(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Zu(l)),i(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Ou());const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Qu(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],ju());const c=i(t,["codeExecution"]);return c!=null&&r(e,["codeExecution"],c),e}function ec(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function tc(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function nc(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],tc(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function oc(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],ec(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],nc(o)),e}function ic(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function rc(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],ic(n)),e}function sc(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],rc(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function lc(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function ac(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],Me(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&r(o,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&r(o,["logprobs"],p);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const g=i(e,["frequencyPenalty"]);g!=null&&r(o,["frequencyPenalty"],g);const T=i(e,["seed"]);T!=null&&r(o,["seed"],T);const S=i(e,["responseMimeType"]);S!=null&&r(o,["responseMimeType"],S);const A=i(e,["responseSchema"]);A!=null&&r(o,["responseSchema"],$u(ke(A)));const x=i(e,["responseJsonSchema"]);x!=null&&r(o,["responseJsonSchema"],x);const I=i(e,["routingConfig"]);I!=null&&r(o,["routingConfig"],I);const w=i(e,["modelSelectionConfig"]);w!=null&&r(o,["modelConfig"],bu(w));const M=i(e,["safetySettings"]);if(n!==void 0&&M!=null){let ee=M;Array.isArray(ee)&&(ee=ee.map(Qe=>Ju(Qe))),r(n,["safetySettings"],ee)}const U=i(e,["tools"]);if(n!==void 0&&U!=null){let ee=Ie(U);Array.isArray(ee)&&(ee=ee.map(Qe=>xo(Ae(Qe)))),r(n,["tools"],ee)}const G=i(e,["toolConfig"]);n!==void 0&&G!=null&&r(n,["toolConfig"],oc(G));const W=i(e,["labels"]);n!==void 0&&W!=null&&r(n,["labels"],W);const N=i(e,["cachedContent"]);n!==void 0&&N!=null&&r(n,["cachedContent"],ne(t,N));const q=i(e,["responseModalities"]);q!=null&&r(o,["responseModalities"],q);const V=i(e,["mediaResolution"]);V!=null&&r(o,["mediaResolution"],V);const O=i(e,["speechConfig"]);O!=null&&r(o,["speechConfig"],sc(vt(O)));const It=i(e,["audioTimestamp"]);It!=null&&r(o,["audioTimestamp"],It);const Mt=i(e,["thinkingConfig"]);return Mt!=null&&r(o,["thinkingConfig"],lc(Mt)),o}function Yn(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["contents"]);if(s!=null){let a=K(s);Array.isArray(a)&&(a=a.map(u=>Me(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],ac(t,l,n)),n}function uc(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["instances[]","title"],s);const l=i(t,["outputDimensionality"]);e!==void 0&&l!=null&&r(e,["parameters","outputDimensionality"],l);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&r(e,["instances[]","mimeType"],a);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&r(e,["parameters","autoTruncate"],u),n}function cc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["contents"]);s!=null&&r(n,["instances[]","content"],co(t,s));const l=i(e,["config"]);return l!=null&&r(n,["config"],uc(l,n)),n}function dc(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const m=i(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&r(e,["parameters","includeSafetyAttributes"],m);const p=i(t,["includeRaiReason"]);e!==void 0&&p!=null&&r(e,["parameters","includeRaiReason"],p);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const g=i(t,["outputMimeType"]);e!==void 0&&g!=null&&r(e,["parameters","outputOptions","mimeType"],g);const T=i(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&r(e,["parameters","outputOptions","compressionQuality"],T);const S=i(t,["addWatermark"]);e!==void 0&&S!=null&&r(e,["parameters","addWatermark"],S);const A=i(t,["enhancePrompt"]);return e!==void 0&&A!=null&&r(e,["parameters","enhancePrompt"],A),n}function fc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&r(n,["config"],dc(l,n)),n}function Xe(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&r(e,["bytesBase64Encoded"],oe(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function mc(t){const e={},n=i(t,["maskMode"]);n!=null&&r(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&r(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&r(e,["dilation"],s),e}function pc(t){const e={},n=i(t,["controlType"]);n!=null&&r(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&r(e,["computeControl"],o),e}function hc(t){const e={},n=i(t,["styleDescription"]);return n!=null&&r(e,["styleDescription"],n),e}function gc(t){const e={},n=i(t,["subjectType"]);n!=null&&r(e,["subjectType"],n);const o=i(t,["subjectDescription"]);return o!=null&&r(e,["subjectDescription"],o),e}function yc(t){const e={},n=i(t,["referenceImage"]);n!=null&&r(e,["referenceImage"],Xe(n));const o=i(t,["referenceId"]);o!=null&&r(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&r(e,["referenceType"],s);const l=i(t,["maskImageConfig"]);l!=null&&r(e,["maskImageConfig"],mc(l));const a=i(t,["controlImageConfig"]);a!=null&&r(e,["controlImageConfig"],pc(a));const u=i(t,["styleImageConfig"]);u!=null&&r(e,["styleImageConfig"],hc(u));const d=i(t,["subjectImageConfig"]);return d!=null&&r(e,["subjectImageConfig"],gc(d)),e}function Tc(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const m=i(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&r(e,["parameters","includeSafetyAttributes"],m);const p=i(t,["includeRaiReason"]);e!==void 0&&p!=null&&r(e,["parameters","includeRaiReason"],p);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const g=i(t,["outputMimeType"]);e!==void 0&&g!=null&&r(e,["parameters","outputOptions","mimeType"],g);const T=i(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&r(e,["parameters","outputOptions","compressionQuality"],T);const S=i(t,["editMode"]);e!==void 0&&S!=null&&r(e,["parameters","editMode"],S);const A=i(t,["baseSteps"]);return e!==void 0&&A!=null&&r(e,["parameters","editConfig","baseSteps"],A),n}function Cc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>yc(d))),r(n,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&r(n,["config"],Tc(a,n)),n}function vc(t,e){const n={},o=i(t,["includeRaiReason"]);e!==void 0&&o!=null&&r(e,["parameters","includeRaiReason"],o);const s=i(t,["outputMimeType"]);e!==void 0&&s!=null&&r(e,["parameters","outputOptions","mimeType"],s);const l=i(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&r(e,["parameters","outputOptions","compressionQuality"],l);const a=i(t,["enhanceInputImage"]);e!==void 0&&a!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],a);const u=i(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const d=i(t,["numberOfImages"]);e!==void 0&&d!=null&&r(e,["parameters","sampleCount"],d);const c=i(t,["mode"]);return e!==void 0&&c!=null&&r(e,["parameters","mode"],c),n}function _c(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["image"]);s!=null&&r(n,["instances[0]","image"],Xe(s));const l=i(e,["upscaleFactor"]);l!=null&&r(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&r(n,["config"],vc(a,n)),n}function Sc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Ec(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],po(t,u)),o}function Ac(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Ec(t,o,n)),n}function Ic(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function Mc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Ic(s,n)),n}function xc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Rc(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&r(e,["systemInstruction"],Me(J(o)));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>xo(u))),r(e,["tools"],a)}const l=i(t,["generationConfig"]);return e!==void 0&&l!=null&&r(e,["generationConfig"],l),n}function Pc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["contents"]);if(s!=null){let a=K(s);Array.isArray(a)&&(a=a.map(u=>Me(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],Rc(l,n)),n}function wc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["contents"]);if(s!=null){let a=K(s);Array.isArray(a)&&(a=a.map(u=>Me(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],l),n}function Nc(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&r(e,["bytesBase64Encoded"],oe(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function kc(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const l=i(t,["fps"]);e!==void 0&&l!=null&&r(e,["parameters","fps"],l);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&r(e,["parameters","durationSeconds"],a);const u=i(t,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&r(e,["parameters","aspectRatio"],d);const c=i(t,["resolution"]);e!==void 0&&c!=null&&r(e,["parameters","resolution"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const m=i(t,["pubsubTopic"]);e!==void 0&&m!=null&&r(e,["parameters","pubsubTopic"],m);const p=i(t,["negativePrompt"]);e!==void 0&&p!=null&&r(e,["parameters","negativePrompt"],p);const h=i(t,["enhancePrompt"]);e!==void 0&&h!=null&&r(e,["parameters","enhancePrompt"],h);const g=i(t,["generateAudio"]);e!==void 0&&g!=null&&r(e,["parameters","generateAudio"],g);const T=i(t,["lastFrame"]);e!==void 0&&T!=null&&r(e,["instances[0]","lastFrame"],Xe(T));const S=i(t,["compressionQuality"]);return e!==void 0&&S!=null&&r(e,["parameters","compressionQuality"],S),n}function Dc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],F(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(n,["instances[0]","image"],Xe(l));const a=i(e,["video"]);a!=null&&r(n,["instances[0]","video"],Nc(a));const u=i(e,["config"]);return u!=null&&r(n,["config"],kc(u,n)),n}function Lc(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Vc(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Fc(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Uc(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Lc(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Vc(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Fc(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function Gc(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Uc(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function qc(t){const e={},n=i(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function Bc(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function $c(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Bc(s))),r(e,["urlMetadata"],o)}return e}function bc(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],Gc(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],qc(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],$c(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const m=i(t,["safetyRatings"]);return m!=null&&r(e,["safetyRatings"],m),e}function Zn(t){const e={},n=i(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>bc(u))),r(e,["candidates"],a)}const o=i(t,["modelVersion"]);o!=null&&r(e,["modelVersion"],o);const s=i(t,["promptFeedback"]);s!=null&&r(e,["promptFeedback"],s);const l=i(t,["usageMetadata"]);return l!=null&&r(e,["usageMetadata"],l),e}function Jc(t){const e={},n=i(t,["values"]);return n!=null&&r(e,["values"],n),e}function Hc(){return{}}function Wc(t){const e={},n=i(t,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Jc(l))),r(e,["embeddings"],s)}return i(t,["metadata"])!=null&&r(e,["metadata"],Hc()),e}function Kc(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],oe(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ro(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function Yc(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],Kc(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&r(e,["safetyAttributes"],Ro(s)),e}function Zc(t){const e={},n=i(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Yc(l))),r(e,["generatedImages"],s)}const o=i(t,["positivePromptSafetyAttributes"]);return o!=null&&r(e,["positivePromptSafetyAttributes"],Ro(o)),e}function Oc(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function ht(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["version"]);l!=null&&r(e,["version"],l);const a=i(t,["_self"]);a!=null&&r(e,["tunedModelInfo"],Oc(a));const u=i(t,["inputTokenLimit"]);u!=null&&r(e,["inputTokenLimit"],u);const d=i(t,["outputTokenLimit"]);d!=null&&r(e,["outputTokenLimit"],d);const c=i(t,["supportedGenerationMethods"]);return c!=null&&r(e,["supportedActions"],c),e}function zc(t,e){const n={},o=i(e,["nextPageToken"]);o!=null&&r(n,["nextPageToken"],o);const s=i(e,["_self"]);if(s!=null){let l=ho(s);Array.isArray(l)&&(l=l.map(a=>ht(a))),r(n,["models"],l)}return n}function Xc(){return{}}function Qc(t){const e={},n=i(t,["totalTokens"]);n!=null&&r(e,["totalTokens"],n);const o=i(t,["cachedContentTokenCount"]);return o!=null&&r(e,["cachedContentTokenCount"],o),e}function jc(t){const e={},n=i(t,["video","uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&r(e,["videoBytes"],oe(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function ed(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],jc(n)),e}function td(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ed(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function nd(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],td(a)),e}function od(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function id(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function rd(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function sd(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],od(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],id(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],rd(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function ld(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>sd(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function ad(t){const e={},n=i(t,["citations"]);return n!=null&&r(e,["citations"],n),e}function ud(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function cd(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ud(s))),r(e,["urlMetadata"],o)}return e}function dd(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],ld(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],ad(o));const s=i(t,["finishMessage"]);s!=null&&r(e,["finishMessage"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],cd(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const m=i(t,["safetyRatings"]);return m!=null&&r(e,["safetyRatings"],m),e}function On(t){const e={},n=i(t,["candidates"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>dd(c))),r(e,["candidates"],d)}const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["responseId"]);s!=null&&r(e,["responseId"],s);const l=i(t,["modelVersion"]);l!=null&&r(e,["modelVersion"],l);const a=i(t,["promptFeedback"]);a!=null&&r(e,["promptFeedback"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function fd(t){const e={},n=i(t,["truncated"]);n!=null&&r(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&r(e,["tokenCount"],o),e}function md(t){const e={},n=i(t,["values"]);n!=null&&r(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&r(e,["statistics"],fd(o)),e}function pd(t){const e={},n=i(t,["billableCharacterCount"]);return n!=null&&r(e,["billableCharacterCount"],n),e}function hd(t){const e={},n=i(t,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>md(l))),r(e,["embeddings"],s)}const o=i(t,["metadata"]);return o!=null&&r(e,["metadata"],pd(o)),e}function gd(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["imageBytes"],oe(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Po(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function St(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],gd(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&r(e,["safetyAttributes"],Po(s));const l=i(t,["prompt"]);return l!=null&&r(e,["enhancedPrompt"],l),e}function yd(t){const e={},n=i(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>St(l))),r(e,["generatedImages"],s)}const o=i(t,["positivePromptSafetyAttributes"]);return o!=null&&r(e,["positivePromptSafetyAttributes"],Po(o)),e}function Td(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>St(s))),r(e,["generatedImages"],o)}return e}function Cd(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>St(s))),r(e,["generatedImages"],o)}return e}function vd(t){const e={},n=i(t,["endpoint"]);n!=null&&r(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&r(e,["deployedModelId"],o),e}function _d(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function Sd(t){const e={},n=i(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&r(e,["epoch"],o);const s=i(t,["step"]);return s!=null&&r(e,["step"],s),e}function gt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["versionId"]);l!=null&&r(e,["version"],l);const a=i(t,["deployedModels"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>vd(p))),r(e,["endpoints"],m)}const u=i(t,["labels"]);u!=null&&r(e,["labels"],u);const d=i(t,["_self"]);d!=null&&r(e,["tunedModelInfo"],_d(d));const c=i(t,["defaultCheckpointId"]);c!=null&&r(e,["defaultCheckpointId"],c);const f=i(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>Sd(p))),r(e,["checkpoints"],m)}return e}function Ed(t,e){const n={},o=i(e,["nextPageToken"]);o!=null&&r(n,["nextPageToken"],o);const s=i(e,["_self"]);if(s!=null){let l=ho(s);Array.isArray(l)&&(l=l.map(a=>gt(a))),r(n,["models"],l)}return n}function Ad(){return{}}function Id(t){const e={},n=i(t,["totalTokens"]);return n!=null&&r(e,["totalTokens"],n),e}function Md(t){const e={},n=i(t,["tokensInfo"]);return n!=null&&r(e,["tokensInfo"],n),e}function xd(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],oe(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Rd(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],xd(n)),e}function Pd(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Rd(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function wd(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],Pd(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nd="Content-Type",kd="X-Server-Timeout",Dd="User-Agent",yt="x-goog-api-client",Ld="1.7.0",Vd=`google-genai-sdk/${Ld}`,Fd="v1beta1",Ud="v1beta",zn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Gd{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Fd,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Ud,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))s.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o){if(n&&n.timeout||o){const s=new AbortController,l=s.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>s.abort(),n.timeout),o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=l}return n&&n.extraBody!==null&&qd(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Xn(s),new ut(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Xn(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Te(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield B(s.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(d);try{const m=JSON.parse(c);if("error"in m){const p=JSON.parse(JSON.stringify(m.error)),h=p.status,g=p.code,T=`got status: ${h}. ${JSON.stringify(m)}`;if(g>=400&&g<600)throw new Oe({message:T,status:g})}}catch(m){if(m.name==="ApiError")throw m}a+=c;let f=a.match(zn);for(;f;){const m=f[1];try{const p=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield B(new ut(p)),a=a.slice(f[0].length),f=a.match(zn)}catch(p){throw new Error(`exception parsing stream chunk ${m}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=Vd+" "+this.clientOptions.userAgentExtra;return e[Dd]=n,e[yt]=n,e[Nd]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))n.append(o,s);e.timeout&&e.timeout>0&&n.append(kd,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);s.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const d=await this.fetchUploadUrl(s,n);return l.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var o;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:E("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a==null?void 0:a.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Xn(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new Oe({message:s,status:n}):new Error(s)}}function qd(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bd="mcp_used/unknown";function wo(t){for(const e of t)if(Et(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function No(t){var e;const n=(e=t[yt])!==null&&e!==void 0?e:"";t[yt]=(n+` ${Bd}`).trimStart()}function $d(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Et(s)))!==null&&o!==void 0?o:!1}function bd(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!Et(s)))!==null&&o!==void 0?o:!1}function Et(t){return t!==null&&typeof t=="object"&&t instanceof At}function Jd(t,e=100){return Te(this,arguments,function*(){let o,s=0;for(;s<e;){const l=yield B(t.listTools({cursor:o}));for(const a of l.tools)yield yield B(a),s++;if(!l.nextCursor)break;o=l.nextCursor}})}class At{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new At(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,we(Jd(f))),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const m=s;a.push(m);const p=m.name;if(l[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);l[p]=f}}catch(m){n={error:m}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Gi(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Hd(t,e,n){const o=new Ii;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const l=Qa(s);Object.assign(o,l),e(o)}class Wd{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=Zd(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(I=>{c=I}),m=e.callbacks,p=function(){c({})},h=this.apiClient,g={onopen:p,onmessage:I=>{Hd(h,m.onmessage,I)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(I){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(I){}},T=this.webSocketFactory.create(d,Yd(a),g);T.connect(),await f;const S=F(this.apiClient,e.model),A=Ao({model:S}),x=pt({setup:A});return T.send(JSON.stringify(x)),new Kd(T,this.apiClient)}}class Kd{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=fa(e),o=Io(n);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=ma(e),o=pt(n);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const n=pt({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ge.PLAY)}pause(){this.sendPlaybackControl(ge.PAUSE)}stop(){this.sendPlaybackControl(ge.STOP)}resetContext(){this.sendPlaybackControl(ge.RESET_CONTEXT)}close(){this.conn.close()}}function Yd(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Zd(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Od="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function zd(t,e,n){const o=new Ai;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const a=Ja(l);Object.assign(o,a)}else{const a=ba(l);Object.assign(o,a)}e(o)}class Xd{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new Wd(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,l,a,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const m=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&wo(e.config.tools)&&No(m);const p=tf(m);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const N=this.apiClient.getApiKey();let q="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),q="BidiGenerateContentConstrained",V="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${q}?${V}=${N}`}let h=()=>{};const g=new Promise(N=>{h=N}),T=e.callbacks,S=function(){var N;(N=T==null?void 0:T.onopen)===null||N===void 0||N.call(T),h({})},A=this.apiClient,x={onopen:S,onmessage:N=>{zd(A,T.onmessage,N)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(N){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(N){}},I=this.webSocketFactory.create(f,ef(p),x);I.connect(),await g;let w=F(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const N=this.apiClient.getProject(),q=this.apiClient.getLocation();w=`projects/${N}/locations/${q}/`+w}let M={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[We.AUDIO]}:e.config.responseModalities=[We.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],G=[];for(const N of U)if(this.isCallableTool(N)){const q=N;G.push(await q.tool())}else G.push(N);G.length>0&&(e.config.tools=G);const W={model:w,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=ra(this.apiClient,W):M=ia(this.apiClient,W),delete M.config,I.send(JSON.stringify(M)),new jd(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Qd={turnComplete:!0};class jd{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=K(n.turns),e.isVertexAI()?o=o.map(s=>Me(s)):o=o.map(s=>ze(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Od)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Qd),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:da(e)}:n={realtimeInput:ca(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ef(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function tf(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qn=10;function jn(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ge(a)){s=!0;break}if(!s)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ge(t){return"callTool"in t&&typeof t.callTool=="function"}function eo(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nf extends me{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,l,a,u;const d=await this.processParamsForMcpUsage(n);if(!$d(n)||jn(n.config))return await this.generateContentInternal(d);if(bd(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const m=K(d.contents),p=(l=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Qn;let h=0;for(;h<p&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const g=c.candidates[0].content,T=[];for(const S of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Ge(S)){const x=await S.callTool(c.functionCalls);T.push(...x)}h++,f={role:"user",parts:T},d.contents=K(d.contents),d.contents.push(g),d.contents.push(f),eo(d.config)&&(m.push(g),m.push(f))}return eo(d.config)&&(c.automaticFunctionCallingHistory=m),c},this.generateContentStream=async n=>{if(jn(n.config)){const o=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let l;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=d==null?void 0:d.safetyAttributes:a.push(d);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l}:u={generatedImages:a},u}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new De(fe.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(e){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=await Promise.all(l.map(async d=>Ge(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&wo(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),No(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,s;const l=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Ge(a)){const u=a,d=await u.tool();for(const c of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l}async processAfcStream(e){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Qn;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,m){var p,h;return Te(this,arguments,function*(){for(var g,T,S,A;u<l;){a&&(u++,a=!1);const M=yield B(c.processParamsForMcpUsage(m)),U=yield B(c.generateContentStreamInternal(M)),G=[],W=[];try{for(var x=!0,I=(T=void 0,we(U)),w;w=yield B(I.next()),g=w.done,!g;x=!0){A=w.value,x=!1;const N=A;if(yield yield B(N),N.candidates&&(!((p=N.candidates[0])===null||p===void 0)&&p.content)){W.push(N.candidates[0].content);for(const q of(h=N.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<l&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(q.functionCall.name)){const V=yield B(f.get(q.functionCall.name).callTool([q.functionCall]));G.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch(N){T={error:N}}finally{try{!x&&!g&&(S=I.return)&&(yield B(S.call(I)))}finally{if(T)throw T.error}}if(G.length>0){a=!0;const N=new xe;N.candidates=[{content:{role:"user",parts:G}}],yield yield B(N);const q=[];q.push(...W),q.push({role:"user",parts:G});const V=K(m.contents).concat(q);m.contents=V}else break}})}(this,d,e)}async generateContentInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Yn(this.apiClient,e);return u=E("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=On(f),p=new xe;return Object.assign(p,m),p})}else{const c=Kn(this.apiClient,e);return u=E("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Zn(f),p=new xe;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Yn(this.apiClient,e);return u=E("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(m){return Te(this,arguments,function*(){var p,h,g,T;try{for(var S=!0,A=we(m),x;x=yield B(A.next()),p=x.done,!p;S=!0){T=x.value,S=!1;const w=On(yield B(T.json())),M=new xe;Object.assign(M,w),yield yield B(M)}}catch(I){h={error:I}}finally{try{!S&&!p&&(g=A.return)&&(yield B(g.call(A)))}finally{if(h)throw h.error}}})})}else{const c=Kn(this.apiClient,e);return u=E("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(m){return Te(this,arguments,function*(){var p,h,g,T;try{for(var S=!0,A=we(m),x;x=yield B(A.next()),p=x.done,!p;S=!0){T=x.value,S=!1;const w=Zn(yield B(T.json())),M=new xe;Object.assign(M,w),yield yield B(M)}}catch(I){h={error:I}}finally{try{!S&&!p&&(g=A.return)&&(yield B(g.call(A)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=cc(this.apiClient,e);return u=E("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=hd(f),p=new In;return Object.assign(p,m),p})}else{const c=Eu(this.apiClient,e);return u=E("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Wc(f),p=new In;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=fc(this.apiClient,e);return u=E("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=yd(f),p=new Mn;return Object.assign(p,m),p})}else{const c=Iu(this.apiClient,e);return u=E("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Zc(f),p=new Mn;return Object.assign(p,m),p})}}async editImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Cc(this.apiClient,e);return l=E("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Td(d),f=new Ti;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=_c(this.apiClient,e);return l=E("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Cd(d),f=new Ci;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Sc(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>gt(f))}else{const c=Mu(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>ht(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ac(this.apiClient,e);return u=E("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Ed(this.apiClient,f),p=new xn;return Object.assign(p,m),p})}else{const c=Ru(this.apiClient,e);return u=E("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=zc(this.apiClient,f),p=new xn;return Object.assign(p,m),p})}}async update(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Mc(this.apiClient,e);return u=E("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>gt(f))}else{const c=wu(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>ht(f))}}async delete(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=xc(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Ad(),m=new Rn;return Object.assign(m,f),m})}else{const c=Nu(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Xc(),m=new Rn;return Object.assign(m,f),m})}}async countTokens(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Pc(this.apiClient,e);return u=E("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Id(f),p=new Pn;return Object.assign(p,m),p})}else{const c=Du(this.apiClient,e);return u=E("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Qc(f),p=new Pn;return Object.assign(p,m),p})}}async computeTokens(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=wc(this.apiClient,e);return l=E("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Md(d),f=new vi;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Dc(this.apiClient,e);return u=E("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>wd(f))}else{const c=Fu(this.apiClient,e);return u=E("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>nd(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function of(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function rf(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function sf(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["operationName"],n);const o=i(t,["resourceName"]);o!=null&&r(e,["_url","resourceName"],o);const s=i(t,["config"]);return s!=null&&r(e,["config"],s),e}function lf(t){const e={},n=i(t,["video","uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&r(e,["videoBytes"],oe(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function af(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],lf(n)),e}function uf(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>af(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function cf(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],uf(a)),e}function df(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],oe(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function ff(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],df(n)),e}function mf(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ff(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function to(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],mf(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pf extends me{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;return o&&"httpOptions"in o&&(l=o.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:n.name,config:o})}async getVideosOperationInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=rf(e);return u=E("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>to(f))}else{const c=of(e);return u=E("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>cf(f))}}async fetchPredictVideosOperationInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=sf(e);return l=E("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>to(d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hf(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function ko(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],hf(n)),e}function gf(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],ko(o)),e}function yf(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>gf(s))),r(e,["speakerVoiceConfigs"],o)}return e}function Tf(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],ko(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],yf(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function Cf(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function vf(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function _f(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Sf(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Cf(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],vf(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],_f(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const m=i(t,["text"]);return m!=null&&r(e,["text"],m),e}function Ef(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Sf(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Af(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function If(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Mf(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],If(n)),e}function xf(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Rf(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],xf(n)),e}function Pf(){return{}}function wf(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>Af(d))),r(e,["functionDeclarations"],u)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],Mf(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Rf(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],Pf());const a=i(t,["codeExecution"]);return a!=null&&r(e,["codeExecution"],a),e}function Nf(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function no(){return{}}function kf(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function Df(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],kf(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function Lf(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Vf(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],Lf(o)),e}function Ff(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Uf(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","speechConfig"],Tf(_t(m)));const p=i(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],Ef(J(h)));const g=i(t,["tools"]);if(e!==void 0&&g!=null){let M=Ie(g);Array.isArray(M)&&(M=M.map(U=>wf(Ae(U)))),r(e,["setup","tools"],M)}const T=i(t,["sessionResumption"]);e!==void 0&&T!=null&&r(e,["setup","sessionResumption"],Nf(T));const S=i(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&r(e,["setup","inputAudioTranscription"],no());const A=i(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&r(e,["setup","outputAudioTranscription"],no());const x=i(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&r(e,["setup","realtimeInputConfig"],Df(x));const I=i(t,["contextWindowCompression"]);e!==void 0&&I!=null&&r(e,["setup","contextWindowCompression"],Vf(I));const w=i(t,["proactivity"]);return e!==void 0&&w!=null&&r(e,["setup","proactivity"],Ff(w)),n}function Gf(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],F(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Uf(s,n)),n}function qf(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&r(n,["expireTime"],s);const l=i(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&r(n,["newSessionExpireTime"],l);const a=i(e,["uses"]);n!==void 0&&a!=null&&r(n,["uses"],a);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&r(n,["bidiGenerateContentSetup"],Gf(t,u));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&r(n,["fieldMask"],d),o}function Bf(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],qf(t,o,n)),n}function $f(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bf(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function Jf(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=bf(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];l&&d.push(l),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Hf extends me{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Bf(this.apiClient,e);l=E("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=Jf(u,e.config);return s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>$f(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wf(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function Kf(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function Yf(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Kf(n,e)),e}function Zf(t){const e={},n=i(t,["textInput"]);n!=null&&r(e,["textInput"],n);const o=i(t,["output"]);return o!=null&&r(e,["output"],o),e}function Of(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Zf(s))),r(e,["examples","examples"],o)}return e}function zf(t,e){const n={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&r(e,["displayName"],o),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=i(t,["epochCount"]);e!==void 0&&s!=null&&r(e,["tuningTask","hyperparameters","epochCount"],s);const l=i(t,["learningRateMultiplier"]);if(l!=null&&r(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(t,["batchSize"]);e!==void 0&&a!=null&&r(e,["tuningTask","hyperparameters","batchSize"],a);const u=i(t,["learningRate"]);return e!==void 0&&u!=null&&r(e,["tuningTask","hyperparameters","learningRate"],u),n}function Xf(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["trainingDataset"]);o!=null&&r(e,["tuningTask","trainingData"],Of(o));const s=i(t,["config"]);return s!=null&&r(e,["config"],zf(s,e)),e}function Qf(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function jf(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function em(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],jf(n,e)),e}function tm(t,e){const n={},o=i(t,["gcsUri"]);if(e!==void 0&&o!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],o),i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function nm(t){const e={},n=i(t,["gcsUri"]);return n!=null&&r(e,["validationDatasetUri"],n),e}function om(t,e){const n={},o=i(t,["validationDataset"]);e!==void 0&&o!=null&&r(e,["supervisedTuningSpec"],nm(o));const s=i(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&r(e,["tunedModelDisplayName"],s);const l=i(t,["description"]);e!==void 0&&l!=null&&r(e,["description"],l);const a=i(t,["epochCount"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=i(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=i(t,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=i(t,["adapterSize"]);if(e!==void 0&&c!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function im(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["trainingDataset"]);o!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],tm(o,e));const s=i(t,["config"]);return s!=null&&r(e,["config"],om(s,e)),e}function rm(t){const e={},n=i(t,["name"]);n!=null&&r(e,["model"],n);const o=i(t,["name"]);return o!=null&&r(e,["endpoint"],o),e}function Do(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["state"]);o!=null&&r(e,["state"],fo(o));const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(t,["tuningTask","startTime"]);l!=null&&r(e,["startTime"],l);const a=i(t,["tuningTask","completeTime"]);a!=null&&r(e,["endTime"],a);const u=i(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const d=i(t,["description"]);d!=null&&r(e,["description"],d);const c=i(t,["baseModel"]);c!=null&&r(e,["baseModel"],c);const f=i(t,["_self"]);f!=null&&r(e,["tunedModel"],rm(f));const m=i(t,["distillationSpec"]);m!=null&&r(e,["distillationSpec"],m);const p=i(t,["experiment"]);p!=null&&r(e,["experiment"],p);const h=i(t,["labels"]);h!=null&&r(e,["labels"],h);const g=i(t,["pipelineJob"]);g!=null&&r(e,["pipelineJob"],g);const T=i(t,["serviceAccount"]);T!=null&&r(e,["serviceAccount"],T);const S=i(t,["tunedModelDisplayName"]);return S!=null&&r(e,["tunedModelDisplayName"],S),e}function sm(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Do(l))),r(e,["tuningJobs"],s)}return e}function lm(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],l),e}function am(t){const e={},n=i(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&r(e,["epoch"],o);const s=i(t,["step"]);s!=null&&r(e,["step"],s);const l=i(t,["endpoint"]);return l!=null&&r(e,["endpoint"],l),e}function um(t){const e={},n=i(t,["model"]);n!=null&&r(e,["model"],n);const o=i(t,["endpoint"]);o!=null&&r(e,["endpoint"],o);const s=i(t,["checkpoints"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>am(a))),r(e,["checkpoints"],l)}return e}function Tt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["state"]);o!=null&&r(e,["state"],fo(o));const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(t,["startTime"]);l!=null&&r(e,["startTime"],l);const a=i(t,["endTime"]);a!=null&&r(e,["endTime"],a);const u=i(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const d=i(t,["error"]);d!=null&&r(e,["error"],d);const c=i(t,["description"]);c!=null&&r(e,["description"],c);const f=i(t,["baseModel"]);f!=null&&r(e,["baseModel"],f);const m=i(t,["tunedModel"]);m!=null&&r(e,["tunedModel"],um(m));const p=i(t,["supervisedTuningSpec"]);p!=null&&r(e,["supervisedTuningSpec"],p);const h=i(t,["tuningDataStats"]);h!=null&&r(e,["tuningDataStats"],h);const g=i(t,["encryptionSpec"]);g!=null&&r(e,["encryptionSpec"],g);const T=i(t,["partnerModelTuningSpec"]);T!=null&&r(e,["partnerModelTuningSpec"],T);const S=i(t,["distillationSpec"]);S!=null&&r(e,["distillationSpec"],S);const A=i(t,["experiment"]);A!=null&&r(e,["experiment"],A);const x=i(t,["labels"]);x!=null&&r(e,["labels"],x);const I=i(t,["pipelineJob"]);I!=null&&r(e,["pipelineJob"],I);const w=i(t,["serviceAccount"]);w!=null&&r(e,["serviceAccount"],w);const M=i(t,["tunedModelDisplayName"]);return M!=null&&r(e,["tunedModelDisplayName"],M),e}function cm(t){const e={},n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const o=i(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Tt(l))),r(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dm extends me{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new De(fe.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const o=await this.tuneMldevInternal(n);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:at.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Qf(e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Tt(f))}else{const c=Wf(e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Do(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=em(e);return u=E("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=cm(f),p=new wn;return Object.assign(p,m),p})}else{const c=Yf(e);return u=E("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=sm(f),p=new wn;return Object.assign(p,m),p})}}async tuneInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=im(e);return l=E("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Tt(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xf(e);return l=E("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>lm(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fm{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const mm=1024*1024*8,pm=3,hm=1e3,gm=2,et="x-goog-upload-status";async function ym(t,e,n){var o,s,l;let a=0,u=0,d=new ut(new Response),c="upload";for(a=t.size;u<a;){const m=Math.min(mm,a-u),p=t.slice(u,u+m);u+m>=a&&(c+=", finalize");let h=0,g=hm;for(;h<pm&&(d=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[et]));)h++,await Cm(g),g=g*gm;if(u+=m,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[et])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((l=d==null?void 0:d.headers)===null||l===void 0?void 0:l[et])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Tm(t){return{size:t.size,type:t.type}}function Cm(t){return new Promise(e=>setTimeout(e,t))}class vm{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ym(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Tm(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _m{create(e,n,o){return new Sm(e,n,o)}}class Sm{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oo="x-goog-api-key";class Em{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(oo)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(oo,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Am="gl-node/";class Im{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=yi(e,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const s=new Em(this.apiKey);this.apiClient=new Gd({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Am+"web",uploader:new vm,downloader:new fm}),this.models=new nf(this.apiClient),this.live=new Xd(this.apiClient,s,new _m),this.batches=new Wr(this.apiClient),this.chats=new Os(this.models,this.apiClient),this.caches=new Ks(this.apiClient),this.files=new al(this.apiClient),this.operations=new pf(this.apiClient),this.authTokens=new Hf(this.apiClient),this.tunings=new dm(this.apiClient)}}class Mm{async generateComment(e,n){console.log("AICommentGenerator: Starting comment generation for content length:",(e==null?void 0:e.length)||0);const o=new Im({apiKey:n.apiKey}),s=`
  You are a LinkedIn influencer commenting on a post. 
  
  Generate concise but engaging comments for a single LinkedIn. 

  Super Importantly, ONLY REPSOND WITH THE COMMENT. DO NOT REPLY WITH ANYTHING ELSE LIKE QUOTATIONS OR ANYTHING ELSE.
  
  You must ahere to the style guide: ${n.styleGuide}. 
  
  Importantly, ahere strictly to the following additional rules:
  - Keep comments professional yet conversational
  - under 100 words
  - avoid generic responses.

  Super Importantly, ONLY REPSOND WITH THE COMMENT. DO NOT REPLY WITH ANYTHING ELSE LIKE QUOTATIONS OR ANYTHING ELSE.

  Generate a thoughtful comment for this LinkedIn post: ${e}

  Super Importantly, ONLY REPSOND WITH THE COMMENT. DO NOT REPLY WITH ANYTHING ELSE LIKE QUOTATIONS OR ANYTHING ELSE.

  Super Importantly, do not return any artefacts that might imply that the comment was generated by AI like placeholders [First's Name] or [Post Content].

  The postContent above likely starts with the author's name. Address the author's name somewhere in your comment. If you can't find a name, don't try to put in placeholder, just don't address them.

  It's important that you think very hard to make sure that what you return is as natural and human sounding/looking as possible without raising any red flags.

  `;try{const a=(await o.models.generateContent({model:"gemini-2.0-flash-lite",contents:s,config:{maxOutputTokens:100,temperature:.7}})).text||"Great post! Thanks for sharing.";return console.log("AICommentGenerator: Successfully generated comment:",a.substring(0,100)+"..."),a}catch(l){const a={message:l instanceof Error?l.message:String(l),stack:l instanceof Error?l.stack:void 0,name:l instanceof Error?l.name:"Unknown",apiKey:n.apiKey?"Present":"Missing",styleGuide:n.styleGuide?"Present":"Missing",postContentLength:e?e.length:0,timestamp:new Date().toISOString(),type:"google_genai_error"};console.error("AICommentGenerator: Error generating comment:",a);try{chrome.tabs.query({active:!0,currentWindow:!0},u=>{var d;(d=u[0])!=null&&d.id&&chrome.tabs.sendMessage(u[0].id,{action:"statusUpdate",error:a})})}catch(u){console.error("AICommentGenerator: Failed to send error message to content script:",u)}throw l}}}class xm{constructor(e){Z(this,"dependencies");Z(this,"handleMessage",(e,n,o)=>{switch(e.action){case"backgroundLog":return this.handleBackgroundLog(e,n,o);case"startAutoCommenting":return this.handleStartAutoCommenting(e,n,o);case"stopAutoCommenting":return this.handleStopAutoCommenting(e,n,o);case"generateComment":return this.handleGenerateComment(e,n,o);case"updateCommentCount":return this.handleUpdateCommentCount(e,n,o);case"commentingCompleted":return this.handleCommentingCompleted(e,n,o);case"moveToOriginalTab":return this.handleMoveToOriginalTab(e,n,o);case"pageReady":return this.handlePageReady(e,n,o);default:return console.warn("MessageRouter: Unknown action:",e.action),o({success:!1,error:"Unknown action"}),!1}});Z(this,"handleBackgroundLog",(e,n,o)=>{const s=new Date().toLocaleTimeString(),l=n.tab?`[Tab ${n.tab.id}]`:"[Unknown Tab]";switch(e.level){case"error":console.error(`${s} ${l} CONTENT:`,...e.args);break;case"warn":console.warn(`${s} ${l} CONTENT:`,...e.args);break;case"group":console.group(`${s} ${l} CONTENT:`,...e.args);break;case"groupEnd":console.groupEnd();break;default:console.log(`${s} ${l} CONTENT:`,...e.args);break}return o({success:!0}),!1});Z(this,"handleStartAutoCommenting",(e,n,o)=>{var l;console.log("MessageRouter: Received startAutoCommenting with settings:",{scrollDuration:e.scrollDuration,commentDelay:e.commentDelay,maxPosts:e.maxPosts,duplicateWindow:e.duplicateWindow,styleGuide:((l=e.styleGuide)==null?void 0:l.substring(0,50))+"...",hasApiKey:!!e.apiKey});const s={apiKey:e.apiKey,styleGuide:e.styleGuide,scrollDuration:e.scrollDuration,commentDelay:e.commentDelay,maxPosts:e.maxPosts,duplicateWindow:e.duplicateWindow};return console.log("MessageRouter: Saving settings to storage:",s),chrome.storage.local.set(s),this.dependencies.startAutoCommenting(e.styleGuide,e.apiKey,e.scrollDuration,e.commentDelay,e.maxPosts,e.duplicateWindow),o({success:!0}),!1});Z(this,"handleStopAutoCommenting",(e,n,o)=>(console.log("MessageRouter: Received stopAutoCommenting request"),this.dependencies.autoCommentingState.isRunning=!1,this.dependencies.autoCommentingState.feedTabId&&(chrome.tabs.sendMessage(this.dependencies.autoCommentingState.feedTabId,{action:"stopCommentingFlow"}),chrome.tabs.remove(this.dependencies.autoCommentingState.feedTabId).catch(()=>{})),chrome.storage.local.set({isRunning:!1,currentCommentCount:0}),this.dependencies.autoCommentingState.commentCount=0,this.dependencies.autoCommentingState.originalTabId=void 0,this.dependencies.sendStatusUpdate("Process stopped and LinkedIn tab closed",{isRunning:!1}),o({success:!0}),!1));Z(this,"handleGenerateComment",(e,n,o)=>{var s;return console.log("MessageRouter: Received comment generation request for content:",((s=e.postContent)==null?void 0:s.substring(0,100))+"..."),this.dependencies.generateComment(e.postContent).then(l=>{console.log("MessageRouter: Sending comment response:",l.substring(0,100)+"..."),o({comment:l})}).catch(l=>{console.error("MessageRouter: Error in comment generation promise:",l);const a={message:l instanceof Error?l.message:String(l),stack:l instanceof Error?l.stack:void 0,name:l instanceof Error?l.name:"Unknown",apiKey:this.dependencies.autoCommentingState.apiKey?"Present":"Missing",styleGuide:this.dependencies.autoCommentingState.styleGuide?"Present":"Missing",postContentLength:e.postContent?e.postContent.length:0,timestamp:new Date().toISOString(),type:"comment_generation_error"};this.dependencies.autoCommentingState.feedTabId&&chrome.tabs.sendMessage(this.dependencies.autoCommentingState.feedTabId,{action:"openrouter_error",error:a}).catch(u=>{console.error("MessageRouter: Failed to send error to content script:",u)}),console.error("MessageRouter: Sending fallback comment due to error"),o({comment:"Great post! Thanks for sharing.",error:a})}),!0});Z(this,"handleUpdateCommentCount",(e,n,o)=>(this.dependencies.autoCommentingState.commentCount=e.count,this.dependencies.sendStatusUpdate(e.status||`Processed ${e.count} comments`,{commentCount:e.count}),o({success:!0}),!1));Z(this,"handleCommentingCompleted",(e,n,o)=>(this.dependencies.autoCommentingState.isRunning=!1,this.dependencies.autoCommentingState.feedTabId&&chrome.tabs.remove(this.dependencies.autoCommentingState.feedTabId).catch(()=>{console.log("LinkedIn tab was already closed or could not be closed")}),this.dependencies.autoCommentingState.originalTabId=void 0,this.dependencies.sendStatusUpdate("Commenting completed! LinkedIn tab closed. Check the counts above for total comments posted.",{isRunning:!1}),o({success:!0}),!1));Z(this,"handleMoveToOriginalTab",(e,n,o)=>(console.log("MessageRouter: Received request to move back to the original tab"),this.dependencies.autoCommentingState.originalTabId&&chrome.tabs.update(this.dependencies.autoCommentingState.originalTabId,{active:!0}).then(()=>{console.log(` Successfully focused original tab ID: ${this.dependencies.autoCommentingState.originalTabId}`),o({success:!0})}),!0));Z(this,"handlePageReady",(e,n,o)=>(console.log("Content script signaled page ready - showing start button"),this.dependencies.sendStatusUpdate("LinkedIn feed loaded. Showing start button..."),this.dependencies.autoCommentingState.feedTabId&&(chrome.tabs.sendMessage(this.dependencies.autoCommentingState.feedTabId,{action:"showStartButton"}),console.log("Start button should now be visible in the LinkedIn tab")),o({success:!0}),!1));this.dependencies=e}}console.log("background script loaded");let $={isRunning:!1,styleGuide:"",apiKey:"",scrollDuration:10,commentDelay:10,maxPosts:20,duplicateWindow:24,commentCount:0};const ae=(t,e={})=>{try{chrome.runtime.sendMessage({action:"statusUpdate",status:t,commentCount:$.commentCount,isRunning:$.isRunning,...e}),chrome.storage.local.set({isRunning:$.isRunning,currentCommentCount:$.commentCount})}catch(n){console.error("Error sending status update:",n)}},Rm=t=>{const n=`comments_today_${new Date().toDateString()}`;chrome.storage.local.get([n],o=>{const l=(o[n]||0)+t;chrome.storage.local.set({[n]:l});try{chrome.runtime.sendMessage({action:"statusUpdate",newTodayTotal:l})}catch(a){console.error("Error sending today total update:",a)}})},Pm=new Mm,wm=async t=>Pm.generateComment(t,{apiKey:$.apiKey,styleGuide:$.styleGuide}),Nm=async(t,e,n,o,s,l)=>{var a;try{$.styleGuide=t,$.apiKey=e,$.scrollDuration=n,$.commentDelay=o,$.maxPosts=s,$.duplicateWindow=l,$.isRunning=!0,$.commentCount=0,console.log("Starting LinkedIn auto-commenting process..."),ae("Starting LinkedIn auto-commenting...");const u=await chrome.tabs.query({active:!0,currentWindow:!0});u.length>0&&((a=u[0])!=null&&a.id)&&($.originalTabId=u[0].id,console.log(`Captured original tab ID: ${$.originalTabId}`));let d;if(console.log("Creating LinkedIn tab in current window..."),ae("Creating LinkedIn tab for automation..."),d=await chrome.tabs.create({url:"https://www.linkedin.com/feed/",active:!0,pinned:!0}),!d||!d.id)throw new Error("Failed to create LinkedIn feed tab");$.feedTabId=d.id,console.log(`LinkedIn tab created with ID: ${d.id}`),console.log(`LinkedIn tab pinned status: ${d.pinned}`),ae("LinkedIn tab created successfully as pinned tab (anti-throttling)..."),ae("Waiting for LinkedIn page to load..."),console.log("Waiting for content script to signal page ready...")}catch(u){console.error("Error in auto-commenting process:",u),$.isRunning=!1,ae("Error occurred during auto-commenting setup",{isRunning:!1})}},km=new xm({autoCommentingState:$,sendStatusUpdate:ae,updateTodayComments:Rm,startAutoCommenting:Nm,generateComment:wm});chrome.runtime.onMessage.addListener(km.handleMessage);chrome.tabs.onRemoved.addListener(t=>{$.feedTabId===t&&(console.log("LinkedIn tab was manually closed"),$.feedTabId=void 0,$.isRunning&&($.isRunning=!1,chrome.storage.local.set({isRunning:!1,currentCommentCount:0}),$.commentCount=0,$.originalTabId=void 0,ae("LinkedIn tab was closed - automation stopped",{isRunning:!1})))});console.log("EngageKit background script loaded");
//# sourceMappingURL=index.ts-Ck1L1ibu.js.map
