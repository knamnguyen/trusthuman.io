// Analytics and Email Preferences Models
// For weekly LinkedIn analytics email feature

model LinkedInAnalyticsDaily {
  id        String   @id @default(uuid())
  accountId String
  date      DateTime // Date of the snapshot (YYYY-MM-DD, stored as timestamp)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // LinkedIn metrics
  followers     Int // Total followers count
  invites       Int // Total invites count
  comments      Int // Total comments count
  contentReach  Int // Content impressions (totalImpressions from useContentImpressionsHistory)
  profileViews  Int // Profile views count
  engageReach   Int // Profile impressions (totalImpressions from useProfileImpressionsHistory)

  // Relations
  account LinkedInAccount @relation(fields: [accountId], references: [id], onDelete: Cascade)

  // Composite unique index: one record per account per day
  @@unique([accountId, date])
  // Index for queries by account
  @@index([accountId])
  // Index for time-based queries
  @@index([date])
}

model UserEmailPreferences {
  id                      String    @id @default(uuid())
  userId                  String    @unique
  weeklyAnalyticsEnabled  Boolean   @default(true)
  unsubscribedAt          DateTime?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt

  // Relations
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  // Index for queries by user
  @@index([userId])
}
