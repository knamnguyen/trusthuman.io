// PlatformLink - Connect LinkedIn/X account (auto-detected from extension)
model PlatformLink {
  id             String @id @default(uuid())
  trustProfileId String
  platform       String // "linkedin" | "x"

  // Profile info (scraped from DOM by extension)
  profileUrl    String  // Canonical URL (linkedin.com/in/xxx or x.com/xxx)
  profileHandle String  // @username (X) or /in/slug (LinkedIn)
  displayName   String?
  avatarUrl     String?

  // Metadata
  autoDetected Boolean  @default(true) // Was this auto-captured on first verification?
  linkedAt     DateTime @default(now())
  updatedAt    DateTime @updatedAt

  trustProfile TrustProfile @relation(fields: [trustProfileId], references: [id], onDelete: Cascade)

  @@unique([trustProfileId, platform]) // One link per platform per user
  @@unique([platform, profileUrl]) // Each profile globally unique
  @@index([platform, profileHandle]) // For badge lookup by handle
}
